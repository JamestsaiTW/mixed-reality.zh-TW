---
title: DirectX 中的實習和運動控制器
description: 在原生 DirectX 應用程式中使用手動追蹤和動作控制器的開發人員指南。
author: caseymeekhof
ms.author: cmeekhof
ms.date: 04/30/2019
ms.topic: article
keywords: 手、運動控制器、directx、輸入、全息影像
ms.openlocfilehash: 08666c8c26cd4851c0c003a96a9e96d7a90228ac
ms.sourcegitcommit: 45676da11ebe33a2aa3dccec0e8ad7d714420853
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 05/15/2019
ms.locfileid: "65629641"
---
# <a name="hands-and-motion-controllers-in-directx"></a><span data-ttu-id="eac96-104">DirectX 中的實習和運動控制器</span><span class="sxs-lookup"><span data-stu-id="eac96-104">Hands and motion controllers in DirectX</span></span>

<span data-ttu-id="eac96-105">在 Windows Mixed Reality 中, 會透過[windows. UI. input](https://docs.microsoft.com/uwp/api/windows.ui.input.spatial)命名空間中找到的空間輸入 api 來處理「手」和「[移動控制器](motion-controllers.md)」輸入。</span><span class="sxs-lookup"><span data-stu-id="eac96-105">In Windows Mixed Reality, both hand and [motion controller](motion-controllers.md) input is handled through the spatial input APIs, found in the [Windows.UI.Input.Spatial](https://docs.microsoft.com/uwp/api/windows.ui.input.spatial) namespace.</span></span> <span data-ttu-id="eac96-106">如此一來, 您就可以輕鬆處理一般動作, 像是在手和運動控制器上同時按相同方式。</span><span class="sxs-lookup"><span data-stu-id="eac96-106">This enables you to easily handle common actions like **Select** presses the same way across both hands and motion controllers.</span></span>

## <a name="getting-started"></a><span data-ttu-id="eac96-107">使用者入門</span><span class="sxs-lookup"><span data-stu-id="eac96-107">Getting started</span></span>

<span data-ttu-id="eac96-108">若要存取 Windows Mixed Reality 中的空間輸入, 請從 SpatialInteractionManager 介面開始。</span><span class="sxs-lookup"><span data-stu-id="eac96-108">To access spatial input in Windows Mixed Reality, start with the SpatialInteractionManager interface.</span></span>  <span data-ttu-id="eac96-109">您可以藉由呼叫[SpatialInteractionManager:: GetForCurrentView](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.getforcurrentview)來存取此介面, 通常是在應用程式啟動期間的一段時間。</span><span class="sxs-lookup"><span data-stu-id="eac96-109">You can access this interface by calling  [SpatialInteractionManager::GetForCurrentView](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.getforcurrentview), typically sometime during app startup.</span></span>

```cpp
using namespace winrt::Windows::UI::Input::Spatial;

SpatialInteractionManager interactionManager = SpatialInteractionManager::GetForCurrentView();
```

<span data-ttu-id="eac96-110">SpatialInteractionManager 的工作是提供[SpatialInteractionSources](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsource)的存取權, 這代表輸入的來源。</span><span class="sxs-lookup"><span data-stu-id="eac96-110">The SpatialInteractionManager's job is to provide access to [SpatialInteractionSources](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsource), which represent a source of input.</span></span>  <span data-ttu-id="eac96-111">系統中有三種可用的 SpatialInteractionSources。</span><span class="sxs-lookup"><span data-stu-id="eac96-111">There are three kinds of SpatialInteractionSources available in the system.</span></span>
* <span data-ttu-id="eac96-112">**手**代表使用者所偵測到的手。</span><span class="sxs-lookup"><span data-stu-id="eac96-112">**Hand** represents a user's detected hand.</span></span> <span data-ttu-id="eac96-113">手來源提供以裝置為基礎的不同功能, 範圍從 HoloLens 上的基本手勢到 HoloLens 2 上的完整清楚表達追蹤。</span><span class="sxs-lookup"><span data-stu-id="eac96-113">Hand sources offer different features based on the device, ranging from basic gestures on HoloLens to fully articulated hand tracking on HoloLens 2.</span></span> 
* <span data-ttu-id="eac96-114">**控制器**代表配對的動作控制器。</span><span class="sxs-lookup"><span data-stu-id="eac96-114">**Controller** represents a paired motion controller.</span></span> <span data-ttu-id="eac96-115">動作控制器可以提供各種功能。</span><span class="sxs-lookup"><span data-stu-id="eac96-115">Motion controllers can offer a variety of capabilities.</span></span>  <span data-ttu-id="eac96-116">例如: 選取 [觸發程式]、[功能表按鈕]、[touchpads] 和 [thumbsticks]。</span><span class="sxs-lookup"><span data-stu-id="eac96-116">For example: Select triggers, Menu buttons, Grasp buttons, touchpads and thumbsticks.</span></span>
* <span data-ttu-id="eac96-117">**Voice**代表使用者的語音說話系統偵測到的關鍵字。</span><span class="sxs-lookup"><span data-stu-id="eac96-117">**Voice** represents the user's voice speaking system-detected keywords.</span></span> <span data-ttu-id="eac96-118">例如, 每當使用者說「Select」時, 此來源就會插入 Select 按和放開。</span><span class="sxs-lookup"><span data-stu-id="eac96-118">For example, this source will inject a Select press and release whenever the user says "Select".</span></span>

<span data-ttu-id="eac96-119">來源的每個畫面格資料會以[SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate)介面表示。</span><span class="sxs-lookup"><span data-stu-id="eac96-119">Per-frame data for a source is represented by the  [SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate) interface.</span></span> <span data-ttu-id="eac96-120">有兩種不同的方式可以存取這項資料, 取決於您是否想要在應用程式中使用事件驅動或輪詢型模型。</span><span class="sxs-lookup"><span data-stu-id="eac96-120">There are two different ways to access this data, depending on whether you want to use an event-driven or polling-based model in your application.</span></span>

### <a name="event-driven-input"></a><span data-ttu-id="eac96-121">事件驅動的輸入</span><span class="sxs-lookup"><span data-stu-id="eac96-121">Event-driven input</span></span>
<span data-ttu-id="eac96-122">SpatialInteractionManager 會提供一些您的應用程式可以接聽的事件。</span><span class="sxs-lookup"><span data-stu-id="eac96-122">The SpatialInteractionManager provides a number of events that your app can listen for.</span></span>  <span data-ttu-id="eac96-123">其中一些範例包括[SourcePressed](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcepressed)、 [SourceReleased](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcereleased)和[SourceUpdated](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourceupdated)。</span><span class="sxs-lookup"><span data-stu-id="eac96-123">A few examples include   [SourcePressed](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcepressed), [SourceReleased](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcereleased) and [SourceUpdated](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourceupdated).</span></span>

<span data-ttu-id="eac96-124">例如, 下列程式碼會將名為 MyApp:: OnSourcePressed 的事件處理常式連結至 SourcePressed 事件。</span><span class="sxs-lookup"><span data-stu-id="eac96-124">For example, the following code hooks up an event handler called MyApp::OnSourcePressed to the SourcePressed event.</span></span>  <span data-ttu-id="eac96-125">這可讓您的應用程式偵測到任何類型互動來源上的按下動作。</span><span class="sxs-lookup"><span data-stu-id="eac96-125">This allows your app to detect presses on any type of interaction source.</span></span>

```cpp
using namespace winrt::Windows::UI::Input::Spatial;

auto interactionManager = SpatialInteractionManager::GetForCurrentView();
interactionManager.SourcePressed({ this, &MyApp::OnSourcePressed });

```

<span data-ttu-id="eac96-126">這個按下的事件會以非同步方式傳送至您的應用程式, 以及按下發生時的對應 SpatialInteractionSourceState。</span><span class="sxs-lookup"><span data-stu-id="eac96-126">This pressed event is sent to your app asynchronously, along with the corresponding SpatialInteractionSourceState at the time the press happened.</span></span> <span data-ttu-id="eac96-127">您的應用程式或遊戲引擎可能會想要立即執行一些處理, 或者您可能想要在輸入處理常式中將事件資料排入佇列。</span><span class="sxs-lookup"><span data-stu-id="eac96-127">Your app or game engine may want to perform some processing right away or you may want to queue up the event data in your input processing routine.</span></span> <span data-ttu-id="eac96-128">以下是 SourcePressed 事件的事件處理常式函式, 它會顯示如何檢查是否已按下 [選取] 按鈕。</span><span class="sxs-lookup"><span data-stu-id="eac96-128">Here is an event handler function for the SourcePressed event, which shows how to check whether the select button was pressed.</span></span>

```cpp
using namespace winrt::Windows::UI::Input::Spatial;

void MyApp::OnSourcePressed(SpatialInteractionManager const& sender, SpatialInteractionSourceEventArgs const& args)
{
    if (args.PressKind() == SpatialInteractionPressKind::Select)
    {
        // Select button was pressed, update app state
    }
}
```

<span data-ttu-id="eac96-129">上述程式碼只會檢查 [Select] 按下, 其對應至裝置上的主要動作。</span><span class="sxs-lookup"><span data-stu-id="eac96-129">The above code only checks for the 'Select' press, which corresponds to the primary action on the device.</span></span> <span data-ttu-id="eac96-130">範例包括在 HoloLens 上執行 AirTap, 或在動作控制器上提取觸發程式。</span><span class="sxs-lookup"><span data-stu-id="eac96-130">Examples include doing an AirTap on HoloLens or pulling the trigger on a motion controller.</span></span>  <span data-ttu-id="eac96-131">[選取] 按下代表使用者想要啟用其目標的全息影像。</span><span class="sxs-lookup"><span data-stu-id="eac96-131">'Select' presses represent the user's intention to activate the hologram they are targeting.</span></span>  <span data-ttu-id="eac96-132">SourcePressed 事件將會針對許多不同的按鈕和手勢引發, 您可以檢查 SpatialInteractionSource 上的其他屬性來測試這些案例。</span><span class="sxs-lookup"><span data-stu-id="eac96-132">The SourcePressed event will fire for a number of different buttons and gestures, and you can inspect other properties on the SpatialInteractionSource to test for those cases.</span></span>

### <a name="polling-based-input"></a><span data-ttu-id="eac96-133">以輪詢為基礎的輸入</span><span class="sxs-lookup"><span data-stu-id="eac96-133">Polling-based input</span></span>
<span data-ttu-id="eac96-134">您也可以使用 SpatialInteractionManager 來輪詢每個框架之輸入的目前狀態。</span><span class="sxs-lookup"><span data-stu-id="eac96-134">You can also use SpatialInteractionManager to poll for the current state of input every frame.</span></span>  <span data-ttu-id="eac96-135">若要這樣做, 只要在每個框架中呼叫[GetDetectedSourcesAtTimestamp](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.getdetectedsourcesattimestamp)即可。</span><span class="sxs-lookup"><span data-stu-id="eac96-135">To do this, simply call [GetDetectedSourcesAtTimestamp](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.getdetectedsourcesattimestamp) every frame.</span></span>  <span data-ttu-id="eac96-136">此函式會傳回陣列, 其中包含每個現用[SpatialInteractionSource](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsource)的一個[SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate) 。</span><span class="sxs-lookup"><span data-stu-id="eac96-136">This function returns an array containing one [SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate) for every active [SpatialInteractionSource](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsource).</span></span> <span data-ttu-id="eac96-137">這表示每個作用中的動作控制器各一個, 每個追蹤的手一個, 另一個用於語音 (如果最近從未提到 ' select ' 命令)。</span><span class="sxs-lookup"><span data-stu-id="eac96-137">This means one for each active motion controller, one for each tracked hand, and one for speech if a 'select' command was recently uttered.</span></span> <span data-ttu-id="eac96-138">接著, 您可以檢查每個 SpatialInteractionSourceState 上的屬性, 以將輸入帶入您的應用程式中。</span><span class="sxs-lookup"><span data-stu-id="eac96-138">You can then inspect the properties on each SpatialInteractionSourceState to drive input into your application.</span></span> 

<span data-ttu-id="eac96-139">以下是如何使用輪詢方法來檢查「選取」動作的範例。</span><span class="sxs-lookup"><span data-stu-id="eac96-139">Here is an example of how to check for the 'select' action using the polling method.</span></span> <span data-ttu-id="eac96-140">請注意,*預測*變數代表可從[HolographicFrame](https://docs.microsoft.com/en-us/uwp/api/windows.graphics.holographic.holographicframe)取得的[HolographicFramePrediction](https://docs.microsoft.com/en-us/uwp/api/Windows.Graphics.Holographic.HolographicFramePrediction)物件。</span><span class="sxs-lookup"><span data-stu-id="eac96-140">Note that the *prediction* variable represents a [HolographicFramePrediction](https://docs.microsoft.com/en-us/uwp/api/Windows.Graphics.Holographic.HolographicFramePrediction) object, which can be obtained from the [HolographicFrame](https://docs.microsoft.com/en-us/uwp/api/windows.graphics.holographic.holographicframe).</span></span>

```cpp
using namespace winrt::Windows::UI::Input::Spatial;

auto interactionManager = SpatialInteractionManager::GetForCurrentView();
auto sourceStates = m_spatialInteractionManager.GetDetectedSourcesAtTimestamp(prediction.Timestamp());

for (auto& sourceState : sourceStates)
{
    if (sourceState.IsSelectPressed())
    {
        // Select button is down, update app state
    }
}
```

<span data-ttu-id="eac96-141">每個 SpatialInteractionSource 都有一個識別碼, 可讓您用來識別新的來源, 並使現有的來源與框架相互關聯。</span><span class="sxs-lookup"><span data-stu-id="eac96-141">Each SpatialInteractionSource has an ID, which you can use to identify new sources and correlate existing sources from frame to frame.</span></span>  <span data-ttu-id="eac96-142">每次離開時都會指派一個新的識別碼, 然後輸入 FOV, 但在會話的持續時間內, 控制器識別碼會保持靜態。</span><span class="sxs-lookup"><span data-stu-id="eac96-142">Hands are assigned a new ID every time they leave and enter the FOV, but controller IDs remain static for the duration of the session.</span></span>  <span data-ttu-id="eac96-143">您可以使用 SpatialInteractionManager 上的事件 (例如[SourceDetected](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcedetected)和[SourceLost](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcelost)), 以在進入或離開裝置時做出反應, 或在動作控制器開啟/關閉或配對/未配對時回應。</span><span class="sxs-lookup"><span data-stu-id="eac96-143">You can use the events on SpatialInteractionManager such as [SourceDetected](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcedetected) and [SourceLost](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcelost), to react when hands enter or leave the device's view, or when motion controllers are turned on/off or are paired/unpaired.</span></span>

### <a name="predicted-vs-historical-poses"></a><span data-ttu-id="eac96-144">預測與歷程記錄的比較</span><span class="sxs-lookup"><span data-stu-id="eac96-144">Predicted vs. historical poses</span></span>
<span data-ttu-id="eac96-145">請注意, GetDetectedSourcesAtTimestamp 具有 timestamp 參數。</span><span class="sxs-lookup"><span data-stu-id="eac96-145">Note that GetDetectedSourcesAtTimestamp has a timestamp parameter.</span></span> <span data-ttu-id="eac96-146">這可讓您要求狀態並產生預測或歷程記錄的資料, 讓您將空間互動與其他輸入來源相互關聯。</span><span class="sxs-lookup"><span data-stu-id="eac96-146">This enables you to request state and pose data that is either predicted or historical, letting you correlate spatial interactions with other sources of input.</span></span> <span data-ttu-id="eac96-147">例如, 在目前的框架中轉譯手的位置時, 您可以傳入[HolographicFrame](https://docs.microsoft.com/en-us/uwp/api/windows.graphics.holographic.holographicframe)所提供的預測時間戳記。</span><span class="sxs-lookup"><span data-stu-id="eac96-147">For example, when rendering the hand's position in the current frame, you can pass in the predicted timestamp provided by the [HolographicFrame](https://docs.microsoft.com/en-us/uwp/api/windows.graphics.holographic.holographicframe).</span></span> <span data-ttu-id="eac96-148">這可讓系統向前預測手的位置, 以緊密地配合轉譯的畫面格輸出, 並將認知的延遲降到最低。</span><span class="sxs-lookup"><span data-stu-id="eac96-148">This enables the system to forward-predict the hand position to closely align with the rendered frame output, minimizing perceived latency.</span></span>

<span data-ttu-id="eac96-149">不過, 這類預測的姿勢並不會產生以互動來源為目標的理想指標光線。</span><span class="sxs-lookup"><span data-stu-id="eac96-149">However, such a predicted pose does not produce an ideal pointing ray for targeting with an interaction source.</span></span> <span data-ttu-id="eac96-150">例如, 按下 [移動控制器] 按鈕時, 可能需要20毫秒該事件, 才能透過藍牙向上到作業系統。</span><span class="sxs-lookup"><span data-stu-id="eac96-150">For example, when a motion controller button is pressed, it can take up to 20ms for that event to bubble up through Bluetooth to the operating system.</span></span> <span data-ttu-id="eac96-151">同樣地, 在使用者執行右手手勢之後, 可能會在系統偵測到手勢之前經過一些時間, 然後您的應用程式會輪詢它。</span><span class="sxs-lookup"><span data-stu-id="eac96-151">Similarly, after a user performs a hand gesture, some amount of time may pass before the system detects the gesture and your app then polls for it.</span></span> <span data-ttu-id="eac96-152">當您的應用程式輪詢狀態變更時, 就會用來以過去實際發生的互動為目標。</span><span class="sxs-lookup"><span data-stu-id="eac96-152">By the time your app polls for a state change, the head and hand poses used to target that interaction actually happened in the past.</span></span> <span data-ttu-id="eac96-153">如果您將目前 HolographicFrame 的時間戳記傳遞至 GetDetectedSourcesAtTimestamp, 則會在顯示畫面格時, 將姿勢預測為目標光線, 而這可能會超過未來的20毫秒。</span><span class="sxs-lookup"><span data-stu-id="eac96-153">If you target by passing your current HolographicFrame's timestamp to GetDetectedSourcesAtTimestamp, the pose will instead be forward predicted to the targeting ray at the time the frame will be displayed, which could be more than 20ms in the future.</span></span> <span data-ttu-id="eac96-154">這個未來的姿勢適用于轉譯互動來源, 但會將我們的時間問題放在使用者的目標發生在過去的互動上。</span><span class="sxs-lookup"><span data-stu-id="eac96-154">This future pose is good for *rendering* the interaction source, but compounds our time problem for *targeting* the interaction, as the user's targeting occurred in the past.</span></span>

<span data-ttu-id="eac96-155">幸好, [SourcePressed](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcepressed)、 [SourceReleased](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcereleased)和[SourceUpdated](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourceupdated)事件會提供與每個輸入事件相關聯的歷程記錄[狀態](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourceeventargs.state)。</span><span class="sxs-lookup"><span data-stu-id="eac96-155">Fortunately, the [SourcePressed](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcepressed), [SourceReleased](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcereleased) and [SourceUpdated](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourceupdated) events provide the historical [State](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourceeventargs.state) associated with each input event.</span></span>  <span data-ttu-id="eac96-156">這會直接包含透過[TryGetPointerPose](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate.trygetpointerpose)提供的歷程記錄, 以及您可以傳遞給其他 api 以與此事件相互關聯的歷程記錄[時間戳記](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate.timestamp)。</span><span class="sxs-lookup"><span data-stu-id="eac96-156">This directly includes the historical head and hand poses available through [TryGetPointerPose](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate.trygetpointerpose), along with a historical [Timestamp](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate.timestamp) that you can pass to other APIs to correlate with this event.</span></span>

<span data-ttu-id="eac96-157">這會導致下列最佳作法: 在每個框架中呈現和鎖定目標時,</span><span class="sxs-lookup"><span data-stu-id="eac96-157">That leads to the following best practices when rendering and targeting with hands and controllers each frame:</span></span>
* <span data-ttu-id="eac96-158">對於呈現每個畫面格的**手動/控制**站, 您的應用程式應該**輪詢**每個互動來源在目前框架 photon 時間的順**向預測**姿勢。</span><span class="sxs-lookup"><span data-stu-id="eac96-158">For **hand/controller rendering** each frame, your app should **poll** for the **forward-predicted** pose of each interaction source at the current frame’s photon time.</span></span>  <span data-ttu-id="eac96-159">您可以藉由呼叫[GetDetectedSourcesAtTimestamp](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.getdetectedsourcesattimestamp)每個畫面格來輪詢所有互動來源, 傳入[HolographicFrame:: CurrentPrediction](https://docs.microsoft.com/en-us/uwp/api/windows.graphics.holographic.holographicframe.currentprediction)所提供的預測時間戳記。</span><span class="sxs-lookup"><span data-stu-id="eac96-159">You can poll for all interaction sources by calling [GetDetectedSourcesAtTimestamp](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.getdetectedsourcesattimestamp) each frame, passing in the predicted timestamp provided by [HolographicFrame::CurrentPrediction](https://docs.microsoft.com/en-us/uwp/api/windows.graphics.holographic.holographicframe.currentprediction).</span></span>
* <span data-ttu-id="eac96-160">對於以按下或發行為**目標的手動/控制**站, 您的應用程式應根據該事件的歷程**記錄**head 或手, 處理已按下/已釋放的**事件**raycasting。</span><span class="sxs-lookup"><span data-stu-id="eac96-160">For **hand/controller targeting** upon a press or release, your app should handle pressed/released **events**, raycasting based on the **historical** head or hand pose for that event.</span></span> <span data-ttu-id="eac96-161">您可以藉由處理[SourcePressed](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcepressed)或[SourceReleased](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcereleased)事件、從事件引數取得[State](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourceeventargs.state)屬性, 然後呼叫其[TryGetPointerPose](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate.trygetpointerpose)方法, 來取得此目標光線。</span><span class="sxs-lookup"><span data-stu-id="eac96-161">You get this targeting ray by handling the [SourcePressed](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcepressed) or [SourceReleased](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcereleased) event, getting the [State](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourceeventargs.state) property from the event arguments, and then calling its [TryGetPointerPose](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate.trygetpointerpose) method.</span></span>

## <a name="cross-device-input-properties"></a><span data-ttu-id="eac96-162">跨裝置輸入屬性</span><span class="sxs-lookup"><span data-stu-id="eac96-162">Cross-device input properties</span></span>
<span data-ttu-id="eac96-163">SpatialInteractionSource API 支援具有各種功能的控制器和手追蹤系統。</span><span class="sxs-lookup"><span data-stu-id="eac96-163">The SpatialInteractionSource API supports controllers and hand tracking systems with a wide range of capabilities.</span></span> <span data-ttu-id="eac96-164">其中一些功能在裝置類型之間是共通的。</span><span class="sxs-lookup"><span data-stu-id="eac96-164">A number of these capabilities are common between device types.</span></span> <span data-ttu-id="eac96-165">例如, 「手追蹤」和「動作控制器」都提供「選取」動作和3D 位置。</span><span class="sxs-lookup"><span data-stu-id="eac96-165">For example, hand tracking and motion controllers both provide a 'select' action and a 3D position.</span></span> <span data-ttu-id="eac96-166">API 盡可能將這些通用功能對應至 SpatialInteractionSource 上的相同屬性。</span><span class="sxs-lookup"><span data-stu-id="eac96-166">Wherever possible, the API maps these common capabilities to the same properties on the SpatialInteractionSource.</span></span>  <span data-ttu-id="eac96-167">這可讓應用程式更輕鬆地支援廣泛的輸入類型。</span><span class="sxs-lookup"><span data-stu-id="eac96-167">This enables applications to more easily support a wide range of input types.</span></span> <span data-ttu-id="eac96-168">下表描述支援的屬性, 以及它們如何在輸入類型之間進行比較。</span><span class="sxs-lookup"><span data-stu-id="eac96-168">The following table describes the properties that are supported, and how they compare across input types.</span></span>

| <span data-ttu-id="eac96-169">屬性</span><span class="sxs-lookup"><span data-stu-id="eac96-169">Property</span></span> | <span data-ttu-id="eac96-170">描述</span><span class="sxs-lookup"><span data-stu-id="eac96-170">Description</span></span> | <span data-ttu-id="eac96-171">HoloLens 手勢</span><span class="sxs-lookup"><span data-stu-id="eac96-171">HoloLens Gestures</span></span> | <span data-ttu-id="eac96-172">運動控制器</span><span class="sxs-lookup"><span data-stu-id="eac96-172">Motion Controllers</span></span> | <span data-ttu-id="eac96-173">清楚表達的手</span><span class="sxs-lookup"><span data-stu-id="eac96-173">Articulated Hands</span></span>|
|--- |--- |--- |--- |--- |
| [<span data-ttu-id="eac96-174">SpatialInteractionSource::**慣用手**</span><span class="sxs-lookup"><span data-stu-id="eac96-174">SpatialInteractionSource::**Handedness**</span></span>](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsource.handedness) | <span data-ttu-id="eac96-175">向右或向左或控制器。</span><span class="sxs-lookup"><span data-stu-id="eac96-175">Right or left hand / controller.</span></span> | <span data-ttu-id="eac96-176">不支援</span><span class="sxs-lookup"><span data-stu-id="eac96-176">Not Supported</span></span> | <span data-ttu-id="eac96-177">支援</span><span class="sxs-lookup"><span data-stu-id="eac96-177">Supported</span></span> | <span data-ttu-id="eac96-178">支援</span><span class="sxs-lookup"><span data-stu-id="eac96-178">Supported</span></span> |
| [<span data-ttu-id="eac96-179">SpatialInteractionSourceState::**IsSelectPressed**</span><span class="sxs-lookup"><span data-stu-id="eac96-179">SpatialInteractionSourceState::**IsSelectPressed**</span></span>](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate.isselectpressed) | <span data-ttu-id="eac96-180">主要按鈕的目前狀態。</span><span class="sxs-lookup"><span data-stu-id="eac96-180">Current state of the primary button.</span></span> | <span data-ttu-id="eac96-181">空中碰</span><span class="sxs-lookup"><span data-stu-id="eac96-181">Air Tap</span></span> | <span data-ttu-id="eac96-182">觸發程序</span><span class="sxs-lookup"><span data-stu-id="eac96-182">Trigger</span></span> | <span data-ttu-id="eac96-183">寬鬆的點擊 (直立縮小)</span><span class="sxs-lookup"><span data-stu-id="eac96-183">Relaxed Air Tap (upright pinch)</span></span> |
| [<span data-ttu-id="eac96-184">SpatialInteractionSourceState::**IsGrasped**</span><span class="sxs-lookup"><span data-stu-id="eac96-184">SpatialInteractionSourceState::**IsGrasped**</span></span>](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate.isgrasped) | <span data-ttu-id="eac96-185">[抓取] 按鈕的目前狀態。</span><span class="sxs-lookup"><span data-stu-id="eac96-185">Current state of the grab button.</span></span> | <span data-ttu-id="eac96-186">不支援</span><span class="sxs-lookup"><span data-stu-id="eac96-186">Not Supported</span></span> | <span data-ttu-id="eac96-187">抓取按鈕</span><span class="sxs-lookup"><span data-stu-id="eac96-187">Grab button</span></span> | <span data-ttu-id="eac96-188">縮小或右</span><span class="sxs-lookup"><span data-stu-id="eac96-188">Pinch or Closed Hand</span></span> |
| [<span data-ttu-id="eac96-189">SpatialInteractionSourceState::**IsMenuPressed**</span><span class="sxs-lookup"><span data-stu-id="eac96-189">SpatialInteractionSourceState::**IsMenuPressed**</span></span>](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate.ismenupressed) | <span data-ttu-id="eac96-190">功能表按鈕的目前狀態。</span><span class="sxs-lookup"><span data-stu-id="eac96-190">Current state of the menu button.</span></span>    | <span data-ttu-id="eac96-191">不支援</span><span class="sxs-lookup"><span data-stu-id="eac96-191">Not Supported</span></span> | <span data-ttu-id="eac96-192">功能表按鈕</span><span class="sxs-lookup"><span data-stu-id="eac96-192">Menu Button</span></span> | <span data-ttu-id="eac96-193">不支援</span><span class="sxs-lookup"><span data-stu-id="eac96-193">Not Supported</span></span> |
| [<span data-ttu-id="eac96-194">SpatialInteractionSourceLocation::**Position**</span><span class="sxs-lookup"><span data-stu-id="eac96-194">SpatialInteractionSourceLocation::**Position**</span></span>](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcelocation.position) | <span data-ttu-id="eac96-195">控制器上的手邊或手柄位置的 XYZ 位置。</span><span class="sxs-lookup"><span data-stu-id="eac96-195">XYZ location of the hand or grip position on the controller.</span></span> | <span data-ttu-id="eac96-196">Palm 位置</span><span class="sxs-lookup"><span data-stu-id="eac96-196">Palm location</span></span> | <span data-ttu-id="eac96-197">手柄姿勢位置</span><span class="sxs-lookup"><span data-stu-id="eac96-197">Grip pose position</span></span> | <span data-ttu-id="eac96-198">Palm 位置</span><span class="sxs-lookup"><span data-stu-id="eac96-198">Palm location</span></span> |
| [<span data-ttu-id="eac96-199">SpatialInteractionSourceLocation::**取向**</span><span class="sxs-lookup"><span data-stu-id="eac96-199">SpatialInteractionSourceLocation::**Orientation**</span></span>](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcelocation.orientation) | <span data-ttu-id="eac96-200">四元數, 表示控制器上手形或底底姿勢的方向。</span><span class="sxs-lookup"><span data-stu-id="eac96-200">Quaternion representing the orientation of the hand or grip pose on the controller.</span></span> | <span data-ttu-id="eac96-201">不支援</span><span class="sxs-lookup"><span data-stu-id="eac96-201">Not Supported</span></span> | <span data-ttu-id="eac96-202">手柄姿勢方向</span><span class="sxs-lookup"><span data-stu-id="eac96-202">Grip pose orientation</span></span> | <span data-ttu-id="eac96-203">Palm 方向</span><span class="sxs-lookup"><span data-stu-id="eac96-203">Palm orientation</span></span> |
| [<span data-ttu-id="eac96-204">SpatialPointerInteractionSourcePose::**Position**</span><span class="sxs-lookup"><span data-stu-id="eac96-204">SpatialPointerInteractionSourcePose::**Position**</span></span>](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialpointerinteractionsourcepose.position#Windows_UI_Input_Spatial_SpatialPointerInteractionSourcePose_Position) | <span data-ttu-id="eac96-205">指標光線的原點。</span><span class="sxs-lookup"><span data-stu-id="eac96-205">Origin of the pointing ray.</span></span> | <span data-ttu-id="eac96-206">不支援</span><span class="sxs-lookup"><span data-stu-id="eac96-206">Not Supported</span></span> | <span data-ttu-id="eac96-207">支援</span><span class="sxs-lookup"><span data-stu-id="eac96-207">Supported</span></span> | <span data-ttu-id="eac96-208">支援</span><span class="sxs-lookup"><span data-stu-id="eac96-208">Supported</span></span> |
| [<span data-ttu-id="eac96-209">SpatialPointerInteractionSourcePose::**ForwardDirection**</span><span class="sxs-lookup"><span data-stu-id="eac96-209">SpatialPointerInteractionSourcePose::**ForwardDirection**</span></span>](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialpointerinteractionsourcepose.forwarddirection#Windows_UI_Input_Spatial_SpatialPointerInteractionSourcePose_ForwardDirection) | <span data-ttu-id="eac96-210">指標光線的方向。</span><span class="sxs-lookup"><span data-stu-id="eac96-210">Direction of the pointing ray.</span></span> | <span data-ttu-id="eac96-211">不支援</span><span class="sxs-lookup"><span data-stu-id="eac96-211">Not Supported</span></span> | <span data-ttu-id="eac96-212">支援</span><span class="sxs-lookup"><span data-stu-id="eac96-212">Supported</span></span> | <span data-ttu-id="eac96-213">支援</span><span class="sxs-lookup"><span data-stu-id="eac96-213">Supported</span></span> |

<span data-ttu-id="eac96-214">在所有裝置上都無法使用上述屬性, 而 API 會提供測試此項的方法。</span><span class="sxs-lookup"><span data-stu-id="eac96-214">Some of the above properties are not available on all devices, and the API provides a means to test for this.</span></span> <span data-ttu-id="eac96-215">例如, 您可以檢查[SpatialInteractionSource:: IsGraspSupported](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsource.isgraspsupported)屬性來判斷來源是否提供了「抓住」動作。</span><span class="sxs-lookup"><span data-stu-id="eac96-215">For example, you can inspect the [SpatialInteractionSource::IsGraspSupported](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsource.isgraspsupported) property to determine whether the source provides a grasp action.</span></span>

### <a name="grip-pose-vs-pointing-pose"></a><span data-ttu-id="eac96-216">抓握姿勢與指標姿勢</span><span class="sxs-lookup"><span data-stu-id="eac96-216">Grip pose vs. pointing pose</span></span>

<span data-ttu-id="eac96-217">Windows Mixed Reality 支援各種外型規格中的動作控制器。</span><span class="sxs-lookup"><span data-stu-id="eac96-217">Windows Mixed Reality supports motion controllers in a variety of form factors.</span></span>  <span data-ttu-id="eac96-218">它也支援明確表述的追蹤系統。</span><span class="sxs-lookup"><span data-stu-id="eac96-218">It also supports articulated hand tracking systems.</span></span>  <span data-ttu-id="eac96-219">所有這些系統在手上的位置與自然「向前」方向之間有不同的關聯性, 應用程式應該在使用者手中用來指向或 rendreing 物件。</span><span class="sxs-lookup"><span data-stu-id="eac96-219">All of these systems have different relationships between the hand position and the natural "forward" direction that apps should use for pointing or rendreing objects in the user's hand.</span></span>  <span data-ttu-id="eac96-220">為了支援所有這種情況, 有兩種類型的3D 姿勢可提供給手追蹤和動作控制器。</span><span class="sxs-lookup"><span data-stu-id="eac96-220">To support all of this, there are two types of 3D poses provided for both hand tracking and motion controllers.</span></span>  <span data-ttu-id="eac96-221">第一個是「底框姿勢」, 代表使用者的手位置。</span><span class="sxs-lookup"><span data-stu-id="eac96-221">The first is grip pose, which represents the user's hand position.</span></span>  <span data-ttu-id="eac96-222">第二個是指向姿勢, 表示來自使用者的手或控制器的指標光線。</span><span class="sxs-lookup"><span data-stu-id="eac96-222">The second is pointing pose, which represents a pointing ray originating from the user's hand or controller.</span></span> <span data-ttu-id="eac96-223">因此, 如果您想要轉譯使用者的**手**或**保留在使用者手中的物件**(例如寶劍或機槍), 請使用「底握姿勢」。</span><span class="sxs-lookup"><span data-stu-id="eac96-223">So, if you want to render **the user's hand** or **an object held in the user's hand**, such as a sword or gun, use the grip pose.</span></span> <span data-ttu-id="eac96-224">如果您想要從控制器或手中 raycast (例如, 當使用者**指向 UI**時), 請使用指標姿勢。</span><span class="sxs-lookup"><span data-stu-id="eac96-224">If you want to raycast from the controller or hand, for example when the user is **pointing at UI** , use the pointing pose.</span></span>

<span data-ttu-id="eac96-225">您可以透過[SpatialInteractionSourceState::P 屬性 r):: TryGetLocation (...)](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourceproperties.trygetlocation#Windows_UI_Input_Spatial_SpatialInteractionSourceProperties_TryGetLocation_Windows_Perception_Spatial_SpatialCoordinateSystem_)來存取底框**姿勢**。其定義如下:</span><span class="sxs-lookup"><span data-stu-id="eac96-225">You can access the **grip pose** through [SpatialInteractionSourceState::Properties::TryGetLocation(...)](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourceproperties.trygetlocation#Windows_UI_Input_Spatial_SpatialInteractionSourceProperties_TryGetLocation_Windows_Perception_Spatial_SpatialCoordinateSystem_).  It is defined as follows:</span></span>
* <span data-ttu-id="eac96-226">**抓握位置**:自然地保留控制器時的 palm 距心, 會向左或右調整以置中的位置。</span><span class="sxs-lookup"><span data-stu-id="eac96-226">The **grip position**: The palm centroid when holding the controller naturally, adjusted left or right to center the position within the grip.</span></span>
* <span data-ttu-id="eac96-227">**抓握方向的右軸**:當您完全開啟手來形成一般的5方姿勢時, 您的 palm 的光線 (從左 palm 向前, 向右的 palm 往後)</span><span class="sxs-lookup"><span data-stu-id="eac96-227">The **grip orientation's Right axis**: When you completely open your hand to form a flat 5-finger pose, the ray that is normal to your palm (forward from left palm, backward from right palm)</span></span>
* <span data-ttu-id="eac96-228">**抓握方向的正向軸**:當您關閉手中的部分 (如同按住控制器) 時, 就會以非拇指手指所形成的電子管「轉送」光線。</span><span class="sxs-lookup"><span data-stu-id="eac96-228">The **grip orientation's Forward axis**: When you close your hand partially (as if holding the controller), the ray that points "forward" through the tube formed by your non-thumb fingers.</span></span>
* <span data-ttu-id="eac96-229">**抓握方向的向上軸**:右邊和後向定義所隱含的向上軸。</span><span class="sxs-lookup"><span data-stu-id="eac96-229">The **grip orientation's Up axis**: The Up axis implied by the Right and Forward definitions.</span></span>

<span data-ttu-id="eac96-230">您可以透過[SpatialInteractionSourceState::P 屬性 r):: TryGetLocation (...):: SourcePointerPose](https://docs.microsoft.com/uwp/api/windows.ui.input.spatial.spatialinteractionsourcelocation#Windows_UI_Input_Spatial_SpatialInteractionSourceLocation_SourcePointerPose)或[SpatialInteractionSourceState:: TryGetPointerPose (...):: TryGetInteractionSourcePose](https://docs.microsoft.com/uwp/api/windows.ui.input.spatial.spatialpointerpose#Windows_UI_Input_Spatial_SpatialPointerPose_TryGetInteractionSourcePose_Windows_UI_Input_Spatial_SpatialInteractionSource_)來存取**指標姿勢**.</span><span class="sxs-lookup"><span data-stu-id="eac96-230">You can access the **pointer pose** through [SpatialInteractionSourceState::Properties::TryGetLocation(...)::SourcePointerPose](https://docs.microsoft.com/uwp/api/windows.ui.input.spatial.spatialinteractionsourcelocation#Windows_UI_Input_Spatial_SpatialInteractionSourceLocation_SourcePointerPose) or [SpatialInteractionSourceState::TryGetPointerPose(...)::TryGetInteractionSourcePose](https://docs.microsoft.com/uwp/api/windows.ui.input.spatial.spatialpointerpose#Windows_UI_Input_Spatial_SpatialPointerPose_TryGetInteractionSourcePose_Windows_UI_Input_Spatial_SpatialInteractionSource_).</span></span>

## <a name="controller-specific-input-properties"></a><span data-ttu-id="eac96-231">控制器特定的輸入屬性</span><span class="sxs-lookup"><span data-stu-id="eac96-231">Controller-specific input properties</span></span>
<span data-ttu-id="eac96-232">對於控制器而言, SpatialInteractionSource 具有具有額外功能的控制器屬性。</span><span class="sxs-lookup"><span data-stu-id="eac96-232">For controllers, the SpatialInteractionSource has a Controller property with additional capabilities.</span></span>
* <span data-ttu-id="eac96-233">**HasThumbstick:** 若為 true, 則控制器具有操縱杆。</span><span class="sxs-lookup"><span data-stu-id="eac96-233">**HasThumbstick:** If true, the controller has a thumbstick.</span></span> <span data-ttu-id="eac96-234">檢查 SpatialInteractionSourceState 的[ControllerProperties](https://docs.microsoft.com/uwp/api/windows.ui.input.spatial.spatialinteractioncontrollerproperties)屬性, 以取得操縱杆 x 和 y 值 (ThumbstickX 和 ThumbstickY), 以及其按下的狀態 (IsThumbstickPressed)。</span><span class="sxs-lookup"><span data-stu-id="eac96-234">Inspect the [ControllerProperties](https://docs.microsoft.com/uwp/api/windows.ui.input.spatial.spatialinteractioncontrollerproperties) property of the SpatialInteractionSourceState to acquire the thumbstick x and y values (ThumbstickX and ThumbstickY), as well as its pressed state (IsThumbstickPressed).</span></span>
* <span data-ttu-id="eac96-235">**HasTouchpad:** 若為 true, 則控制器具有觸控板。</span><span class="sxs-lookup"><span data-stu-id="eac96-235">**HasTouchpad:** If true, the controller has a touchpad.</span></span> <span data-ttu-id="eac96-236">檢查 SpatialInteractionSourceState 的 ControllerProperties 屬性, 以取得觸控板 x 和 y 值 (TouchpadX 和 TouchpadY), 並知道使用者是否觸及 pad (IsTouchpadTouched), 以及是否按下觸控板 (IsTouchpadPressed).</span><span class="sxs-lookup"><span data-stu-id="eac96-236">Inspect the ControllerProperties property of the SpatialInteractionSourceState to acquire the touchpad x and y values (TouchpadX and TouchpadY), and to know if the user is touching the pad (IsTouchpadTouched) and if they are pressing the touchpad down (IsTouchpadPressed).</span></span>
* <span data-ttu-id="eac96-237">**SimpleHapticsController:** 控制器的 SimpleHapticsController API 可讓您檢查控制器的 haptics 功能, 也可讓您控制 haptic 的意見反應。</span><span class="sxs-lookup"><span data-stu-id="eac96-237">**SimpleHapticsController:** The SimpleHapticsController API for the controller allows you to inspect the haptics capabilities of the controller, and it also allows you to control haptic feedback.</span></span>

<span data-ttu-id="eac96-238">請注意, 針對兩個軸 (從下到上, 以及從左至右), 觸控板和操縱杆的範圍都是-1 到1。</span><span class="sxs-lookup"><span data-stu-id="eac96-238">Note that the range for touchpad and thumbstick is -1 to 1 for both axes (from bottom to top, and from left to right).</span></span> <span data-ttu-id="eac96-239">類比觸發程式的範圍 (使用 SpatialInteractionSourceState:: SelectPressedValue 屬性存取) 的範圍為0到1。</span><span class="sxs-lookup"><span data-stu-id="eac96-239">The range for the analog trigger, which is accessed using the SpatialInteractionSourceState::SelectPressedValue property, has a range of 0 to 1.</span></span> <span data-ttu-id="eac96-240">值為1時, 與 IsSelectPressed 等於 true,任何其他值會與 IsSelectPressed (等於 false) 相互關聯。</span><span class="sxs-lookup"><span data-stu-id="eac96-240">A value of 1 correlates with IsSelectPressed being equal to true; any other value correlates with IsSelectPressed being equal to false.</span></span>

## <a name="articulated-hand-tracking"></a><span data-ttu-id="eac96-241">明確表述的手勢追蹤</span><span class="sxs-lookup"><span data-stu-id="eac96-241">Articulated hand tracking</span></span>
<span data-ttu-id="eac96-242">Windows Mixed Reality API 可完整支援已示範的追蹤, 例如在 HoloLens 2 上。</span><span class="sxs-lookup"><span data-stu-id="eac96-242">The Windows Mixed Reality API provides full support for articulated hand tracking, for example on HoloLens 2.</span></span> <span data-ttu-id="eac96-243">有清楚的手勢追蹤可以用來在您的應用程式中執行直接操作和點對認可輸入模型。</span><span class="sxs-lookup"><span data-stu-id="eac96-243">Articulated hand tracking can be used to implement direct manipulation and point-and-commit input models in your applications.</span></span> <span data-ttu-id="eac96-244">它也可以用來撰寫完全自訂互動。</span><span class="sxs-lookup"><span data-stu-id="eac96-244">It can also be used to author fully custom interactions.</span></span>

### <a name="hand-skeleton"></a><span data-ttu-id="eac96-245">手形基本架構</span><span class="sxs-lookup"><span data-stu-id="eac96-245">Hand skeleton</span></span>
<span data-ttu-id="eac96-246">明確表述的「追蹤」提供25個聯合基本架構, 可啟用許多不同類型的互動。</span><span class="sxs-lookup"><span data-stu-id="eac96-246">Articulated hand tracking provides a 25 joint skeleton that enables many different types of interactions.</span></span>  <span data-ttu-id="eac96-247">此基本架構提供5個接點給索引/中間/環形/小手指, 4 個接點用於 thumb, 而1個手腕接點。</span><span class="sxs-lookup"><span data-stu-id="eac96-247">The skeleton provides 5 joints for the index/middle/ring/little fingers, 4 joints for the thumb, and 1 wrist joint.</span></span>  <span data-ttu-id="eac96-248">手腕接點會作為階層的基礎。</span><span class="sxs-lookup"><span data-stu-id="eac96-248">The wrist joint serves as the base of the hierarchy.</span></span> <span data-ttu-id="eac96-249">下圖說明基本架構的版面配置。</span><span class="sxs-lookup"><span data-stu-id="eac96-249">The following picture illustrates the layout of the skeleton.</span></span>

![手形基本架構](images/hand-skeleton.png)

<span data-ttu-id="eac96-251">在大部分的情況下, 每個聯合都會根據它所代表的骨骼來命名。</span><span class="sxs-lookup"><span data-stu-id="eac96-251">In most cases, each joint is named based on the bone that it represents.</span></span>  <span data-ttu-id="eac96-252">因為每個聯合都有兩個骨骼, 所以我們會根據該位置的子系骨骼, 使用每個聯合的命名慣例。</span><span class="sxs-lookup"><span data-stu-id="eac96-252">Since there are two bones at every joint, we use a convention of naming each joint based on the child bone at that location.</span></span>  <span data-ttu-id="eac96-253">子系骨骼會從手腕進一步定義為骨骼。</span><span class="sxs-lookup"><span data-stu-id="eac96-253">The child bone is defined as the bone further from the wrist.</span></span>  <span data-ttu-id="eac96-254">例如, "Index Proximal" 聯合包含 Index Proximal 骨骼的開始位置, 以及該骨骼的方向。</span><span class="sxs-lookup"><span data-stu-id="eac96-254">For example, the "Index Proximal" joint contains the beginning position of the index proximal bone, and the orientation of that bone.</span></span>  <span data-ttu-id="eac96-255">它不包含骨骼的結束位置。</span><span class="sxs-lookup"><span data-stu-id="eac96-255">It does not contain the ending position of the bone.</span></span>  <span data-ttu-id="eac96-256">如果您需要的話, 您可以從階層中的下一個聯合 (「索引中繼」聯合) 取得它。</span><span class="sxs-lookup"><span data-stu-id="eac96-256">If you need that, you'd get it from the next joint in the hierarchy, the "Index Intermediate" joint.</span></span>

<span data-ttu-id="eac96-257">除了25個階層式接點外, 系統還提供了一種 palm 聯合。</span><span class="sxs-lookup"><span data-stu-id="eac96-257">In addition to the 25 hierarchical joints, the system provides a palm joint.</span></span>  <span data-ttu-id="eac96-258">Palm 通常不會被視為骨架結構的一部分。</span><span class="sxs-lookup"><span data-stu-id="eac96-258">The palm is not typically considered part of the skeletal structure.</span></span>  <span data-ttu-id="eac96-259">它只是用來取得手的整體位置和方向的便利方式。</span><span class="sxs-lookup"><span data-stu-id="eac96-259">It is provided only as a convenient way to get the hand's overall position and orientation.</span></span>

<span data-ttu-id="eac96-260">每個聯合都會提供下列資訊:</span><span class="sxs-lookup"><span data-stu-id="eac96-260">The following information is provided for each joint:</span></span>

| <span data-ttu-id="eac96-261">名稱</span><span class="sxs-lookup"><span data-stu-id="eac96-261">Name</span></span> | <span data-ttu-id="eac96-262">描述</span><span class="sxs-lookup"><span data-stu-id="eac96-262">Description</span></span> |
|--- |--- |
|<span data-ttu-id="eac96-263">位置</span><span class="sxs-lookup"><span data-stu-id="eac96-263">Position</span></span> | <span data-ttu-id="eac96-264">聯合的3D 位置, 適用于任何要求的座標系統。</span><span class="sxs-lookup"><span data-stu-id="eac96-264">3D position of the joint, available in any requested coordinate system.</span></span> |
|<span data-ttu-id="eac96-265">Orientation</span><span class="sxs-lookup"><span data-stu-id="eac96-265">Orientation</span></span> | <span data-ttu-id="eac96-266">骨骼的3D 方向, 適用于任何要求的座標系統。</span><span class="sxs-lookup"><span data-stu-id="eac96-266">3D orientation of the bone, available in any requested coordinate system.</span></span> |
|<span data-ttu-id="eac96-267">半徑</span><span class="sxs-lookup"><span data-stu-id="eac96-267">Radius</span></span> | <span data-ttu-id="eac96-268">在聯合位置與面板表面的距離。</span><span class="sxs-lookup"><span data-stu-id="eac96-268">Distance to surface of the skin at the joint position.</span></span> <span data-ttu-id="eac96-269">適用于微調依賴手指寬度的直接互動或視覺效果。</span><span class="sxs-lookup"><span data-stu-id="eac96-269">Useful for tuning direct interactions or visualizations that rely on finger width.</span></span> |
|<span data-ttu-id="eac96-270">準確度</span><span class="sxs-lookup"><span data-stu-id="eac96-270">Accuracy</span></span> | <span data-ttu-id="eac96-271">提供有關系統如何自信此聯合資訊的提示。</span><span class="sxs-lookup"><span data-stu-id="eac96-271">Provides a hint on how confident the system feels about this joint's information.</span></span> |

<span data-ttu-id="eac96-272">您可以透過[SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate)上的函式來存取手邊的基本架構資料。</span><span class="sxs-lookup"><span data-stu-id="eac96-272">You can access the hand skeleton data through a function on the [SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate).</span></span>  <span data-ttu-id="eac96-273">函式稱為[TryGetHandPose](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate.trygethandpose#Windows_UI_Input_Spatial_SpatialInteractionSourceState_TryGetHandPose), 它會傳回名為[HandPose](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handpose)的物件。</span><span class="sxs-lookup"><span data-stu-id="eac96-273">The function is called [TryGetHandPose](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate.trygethandpose#Windows_UI_Input_Spatial_SpatialInteractionSourceState_TryGetHandPose), and it returns an object called [HandPose](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handpose).</span></span>  <span data-ttu-id="eac96-274">如果來源不支援明確表達的手, 則此函式會傳回 null。</span><span class="sxs-lookup"><span data-stu-id="eac96-274">If the source does not support articulated hands, then this function will return null.</span></span>  <span data-ttu-id="eac96-275">一旦有了 HandPose, 您就可以使用您感興趣的聯合名稱來呼叫[TryGetJoint](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handpose.trygetjoint#Windows_Perception_People_HandPose_TryGetJoint_Windows_Perception_Spatial_SpatialCoordinateSystem_Windows_Perception_People_HandJointKind_Windows_Perception_People_JointPose__), 以取得目前的聯合資料。</span><span class="sxs-lookup"><span data-stu-id="eac96-275">Once you have a HandPose, you can get current joint data by calling [TryGetJoint](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handpose.trygetjoint#Windows_Perception_People_HandPose_TryGetJoint_Windows_Perception_Spatial_SpatialCoordinateSystem_Windows_Perception_People_HandJointKind_Windows_Perception_People_JointPose__), with the name of the joint you are interested in.</span></span>  <span data-ttu-id="eac96-276">資料會以[JointPose](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.jointpose)結構的形式傳回。</span><span class="sxs-lookup"><span data-stu-id="eac96-276">The data is returned as a [JointPose](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.jointpose) structure.</span></span>  <span data-ttu-id="eac96-277">下列程式碼會取得索引手指秘訣的位置。</span><span class="sxs-lookup"><span data-stu-id="eac96-277">The following code gets the position of the index finger tip.</span></span> <span data-ttu-id="eac96-278">變數*currentState*代表[SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate)的實例。</span><span class="sxs-lookup"><span data-stu-id="eac96-278">The variable *currentState* represents an instance of [SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate).</span></span>

```cpp
using namespace winrt::Windows::Perception::People;
using namespace winrt::Windows::Foundation::Numerics;

auto handPose = currentState.TryGetHandPose();
if (handPose)
{
    JointPose joint;
    if (handPose.TryGetJoint(desiredCoordinateSystem, HandJointKind::IndexTip, joint))
    {
        float3 indexTipPosition = joint.Position;

        // Do something with the index tip position
    }
}
```

### <a name="hand-mesh"></a><span data-ttu-id="eac96-279">手形網格</span><span class="sxs-lookup"><span data-stu-id="eac96-279">Hand mesh</span></span>

<span data-ttu-id="eac96-280">明確 deformable 的手勢追蹤 API 允許完整的三角形網格。</span><span class="sxs-lookup"><span data-stu-id="eac96-280">The articulated hand tracking API allows for a fully deformable triangle hand mesh.</span></span>  <span data-ttu-id="eac96-281">此網格可以與手形基本架構即時 deform, 而且適用于視覺效果及先進的物理技術。</span><span class="sxs-lookup"><span data-stu-id="eac96-281">This mesh can deform in real time along with the hand skeleton, and is useful for visualization as well as advanced physics techniques.</span></span>  <span data-ttu-id="eac96-282">若要存取右手網格, 您必須先在[SpatialInteractionSource](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsource)上呼叫[TryCreateHandMeshObserverAsync](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsource.trycreatehandmeshobserverasync)來建立[HandMeshObserver](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handmeshobserver)物件。</span><span class="sxs-lookup"><span data-stu-id="eac96-282">To access the hand mesh, you need to first create a [HandMeshObserver](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handmeshobserver) object by calling [TryCreateHandMeshObserverAsync](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsource.trycreatehandmeshobserverasync) on the [SpatialInteractionSource](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsource).</span></span>  <span data-ttu-id="eac96-283">這只需要針對每個來源執行一次, 通常是您第一次看到它時。</span><span class="sxs-lookup"><span data-stu-id="eac96-283">This only needs to be done once per source, typically the first time you see it.</span></span>  <span data-ttu-id="eac96-284">這表示每當手進入 FOV 時, 您都會呼叫此函式來建立 HandMeshObserver 物件。</span><span class="sxs-lookup"><span data-stu-id="eac96-284">That means you'll call this function to create a HandMeshObserver object whenever a hand enters the FOV.</span></span>  <span data-ttu-id="eac96-285">請注意, 這是非同步函式, 因此您必須在這裡處理一些平行存取。</span><span class="sxs-lookup"><span data-stu-id="eac96-285">Note that this is an async function, so you'll have to deal with a bit of concurrency here.</span></span>  <span data-ttu-id="eac96-286">一旦可用, 您就可以呼叫[GetTriangleIndices](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handmeshobserver.gettriangleindices#Windows_Perception_People_HandMeshObserver_GetTriangleIndices_System_UInt16___)來要求三角形索引緩衝區的 HandMeshObserver 物件。</span><span class="sxs-lookup"><span data-stu-id="eac96-286">Once available, you can ask the HandMeshObserver object for the triangle index buffer by calling [GetTriangleIndices](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handmeshobserver.gettriangleindices#Windows_Perception_People_HandMeshObserver_GetTriangleIndices_System_UInt16___).</span></span>  <span data-ttu-id="eac96-287">索引不會變更框架的框架, 因此您可以取得這一次, 並在來源的存留期內加以快取。</span><span class="sxs-lookup"><span data-stu-id="eac96-287">Indices don't change frame over frame, so you can get those once and cache them for the lifetime of the source.</span></span>  <span data-ttu-id="eac96-288">索引是以順時針的纏繞順序提供。</span><span class="sxs-lookup"><span data-stu-id="eac96-288">Indices are provided in clockwise winding order.</span></span>

<span data-ttu-id="eac96-289">下列程式碼會啟動已卸離的 std:: thread 來建立網格觀察者, 並在網格觀察器可供使用之後, 將索引緩衝區解壓縮。</span><span class="sxs-lookup"><span data-stu-id="eac96-289">The following code spins up a detached std::thread to create the mesh observer and extracts the index buffer once the mesh observer is available.</span></span>  <span data-ttu-id="eac96-290">它會從名為*currentState*的變數開始, 這是代表追蹤的[SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate)實例。</span><span class="sxs-lookup"><span data-stu-id="eac96-290">It starts from a variable called *currentState*, which is an instance of [SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate) representing a tracked hand.</span></span>

```cpp
using namespace Windows::Perception::People;

std::thread createObserverThread([this, currentState]()
{
    HandMeshObserver newHandMeshObserver = currentState.Source().TryCreateHandMeshObserverAsync().get();
    if (newHandMeshObserver)
    {
        unsigned indexCount = newHandMeshObserver.TriangleIndexCount();
        vector<unsigned short> indices(indexCount);
        newHandMeshObserver.GetTriangleIndices(indices);

        // Save the indices and handMeshObserver for later use - and use a mutex to synchronize access if needed!
     }
});
createObserverThread.detach();
```
<span data-ttu-id="eac96-291">啟動卸離的執行緒只是處理非同步呼叫的一個選項。</span><span class="sxs-lookup"><span data-stu-id="eac96-291">Starting a detached thread is just one option for handling async calls.</span></span>  <span data-ttu-id="eac96-292">或者, 您可以使用C++/winrt 所支援的新[co_await](https://docs.microsoft.com/en-us/windows/uwp/cpp-and-winrt-apis/concurrency)功能</span><span class="sxs-lookup"><span data-stu-id="eac96-292">Alternatively, you could use the new [co_await](https://docs.microsoft.com/en-us/windows/uwp/cpp-and-winrt-apis/concurrency) functionality supported by C++/WinRT.</span></span>

<span data-ttu-id="eac96-293">一旦有了 HandMeshObserver 物件, 您就應該在其對應的 SpatialInteractionSource 為作用中的持續時間內保存它。</span><span class="sxs-lookup"><span data-stu-id="eac96-293">Once you have a HandMeshObserver object, you should hold onto it for the duration that its corresponding SpatialInteractionSource is active.</span></span>  <span data-ttu-id="eac96-294">接著, 您可以藉由呼叫[GetVertexStateForPose](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handmeshobserver.getvertexstateforpose)並傳入[HandPose](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handpose)實例 (代表您想要使用頂點的姿勢), 將每個框架要求它提供代表手的最新頂點緩衝區。</span><span class="sxs-lookup"><span data-stu-id="eac96-294">Then each frame, you can ask it for the latest vertex buffer that represents the hand by calling [GetVertexStateForPose](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handmeshobserver.getvertexstateforpose) and passing in a [HandPose](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handpose) instance that represents the pose that you want vertices for.</span></span>  <span data-ttu-id="eac96-295">緩衝區中的每個頂點都有位置和標準。</span><span class="sxs-lookup"><span data-stu-id="eac96-295">Each vertex in the buffer has a position and a normal.</span></span>  <span data-ttu-id="eac96-296">以下範例示範如何取得右手網格的目前頂點集。</span><span class="sxs-lookup"><span data-stu-id="eac96-296">Here's an example of how to get the current set of vertices for a hand mesh.</span></span>  <span data-ttu-id="eac96-297">就像之前一樣, *currentState*變數代表[SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate)的實例。</span><span class="sxs-lookup"><span data-stu-id="eac96-297">Just as before, the *currentState* variable represents an instance of [SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate).</span></span>

```cpp
using namespace winrt::Windows::Perception::People;

auto handPose = currentState.TryGetHandPose();
if (handPose)
{
    std::vector<HandMeshVertex> vertices(handMeshObserver.VertexCount());
    auto vertexState = handMeshObserver.GetVertexStateForPose(handPose);
    vertexState.GetVertices(vertices);

    auto meshTransform = vertexState.CoordinateSystem().TryGetTransformTo(desiredCoordinateSystem);
    if (meshTransform != nullptr)
    {
        // Do something with the vertices and mesh transform, along with the indices that you saved earlier
    }
}
```

<span data-ttu-id="eac96-298">相對於基本架構接點, 右手邊網格 API 不允許您指定頂點的座標系統。</span><span class="sxs-lookup"><span data-stu-id="eac96-298">In contrast to skeleton joints, the hand mesh API does not allow you to specify a coordinate system for the vertices.</span></span>  <span data-ttu-id="eac96-299">相反地, [HandMeshVertexState](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handmeshvertexstate)會指定要在其中提供頂點的座標系統。</span><span class="sxs-lookup"><span data-stu-id="eac96-299">Instead, the [HandMeshVertexState](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handmeshvertexstate) specifies the coordinate system that the vertices are provided in.</span></span>  <span data-ttu-id="eac96-300">接著, 您可以藉由呼叫[TryGetTransformTo](https://docs.microsoft.com/en-us/uwp/api/windows.perception.spatial.spatialcoordinatesystem.trygettransformto#Windows_Perception_Spatial_SpatialCoordinateSystem_TryGetTransformTo_Windows_Perception_Spatial_SpatialCoordinateSystem_)並指定所需的座標系統, 來取得網格轉換。</span><span class="sxs-lookup"><span data-stu-id="eac96-300">You can then get a mesh transform by calling [TryGetTransformTo](https://docs.microsoft.com/en-us/uwp/api/windows.perception.spatial.spatialcoordinatesystem.trygettransformto#Windows_Perception_Spatial_SpatialCoordinateSystem_TryGetTransformTo_Windows_Perception_Spatial_SpatialCoordinateSystem_) and specifying your desired coordinate system.</span></span>  <span data-ttu-id="eac96-301">每當您使用頂點時, 都必須使用此網格轉換。</span><span class="sxs-lookup"><span data-stu-id="eac96-301">You'll need to use this mesh transform whenever you work with the vertices.</span></span>  <span data-ttu-id="eac96-302">這種方法可減少 CPU 的額外負荷, 特別是當您只是為了轉譯目的而使用網格時。</span><span class="sxs-lookup"><span data-stu-id="eac96-302">This approach reduces CPU overhead, especially if you are only using the mesh for rendering purposes.</span></span>

## <a name="gaze-and-commit-composite-gestures"></a><span data-ttu-id="eac96-303">注視和認可複合手勢</span><span class="sxs-lookup"><span data-stu-id="eac96-303">Gaze and Commit composite gestures</span></span>
<span data-ttu-id="eac96-304">對於使用注視和認可輸入模型的應用程式, 特別是在 HoloLens (第一代) 上, 空間輸入 API 會提供選擇性的[SpatialGestureRecognizer](https://msdn.microsoft.com/library/windows/apps/windows.ui.input.spatial.spatialgesturerecognizer.aspx) , 可用來啟用以 ' select ' 事件為基礎的複合手勢。</span><span class="sxs-lookup"><span data-stu-id="eac96-304">For applications using the gaze-and-commit input model, particularly on HoloLens (first gen), the Spatial Input API provides an optional [SpatialGestureRecognizer](https://msdn.microsoft.com/library/windows/apps/windows.ui.input.spatial.spatialgesturerecognizer.aspx) that can be used to to enable composite gestures built on top of the 'select' event.</span></span>  <span data-ttu-id="eac96-305">藉由將來自 SpatialInteractionManager 的互動路由至全息影像的 SpatialGestureRecognizer, 應用程式可以在手、語音和空間輸入裝置之間一致地偵測點分、保存、操作和流覽事件, 而不必處理按下的動作和會手動發行。</span><span class="sxs-lookup"><span data-stu-id="eac96-305">By routing interactions from the SpatialInteractionManager to a hologram's SpatialGestureRecognizer, apps can detect Tap, Hold, Manipulation, and Navigation events uniformly across hands, voice, and spatial input devices, without having to handle presses and releases manually.</span></span>

<span data-ttu-id="eac96-306">SpatialGestureRecognizer 只會在您要求的一組手勢之間執行最少的去除混淆。</span><span class="sxs-lookup"><span data-stu-id="eac96-306">SpatialGestureRecognizer performs only the minimal disambiguation between the set of gestures that you request.</span></span> <span data-ttu-id="eac96-307">例如, 如果您只需要點一下, 使用者只要按下滑鼠, 就可以按住其手指, 而且仍然會發生點碰。</span><span class="sxs-lookup"><span data-stu-id="eac96-307">For example, if you request just Tap, the user may hold their finger down as long as they like and a Tap will still occur.</span></span> <span data-ttu-id="eac96-308">如果您同時要求點一下並按住, 請在大約一秒後按住手指, 手勢將會升階為按住, 而且不會再出現點分。</span><span class="sxs-lookup"><span data-stu-id="eac96-308">If you request both Tap and Hold, after about a second of holding down their finger, the gesture will promote to a Hold and a Tap will no longer occur.</span></span>

<span data-ttu-id="eac96-309">若要使用 SpatialGestureRecognizer, 請處理 SpatialInteractionManager 的[InteractionDetected](https://msdn.microsoft.com/library/windows/apps/xaml/Windows.UI.Input.Spatial.SpatialInteractionManager.InteractionDetected)事件, 並抓取該處公開的 SpatialPointerPose。</span><span class="sxs-lookup"><span data-stu-id="eac96-309">To use SpatialGestureRecognizer, handle the SpatialInteractionManager's [InteractionDetected](https://msdn.microsoft.com/library/windows/apps/xaml/Windows.UI.Input.Spatial.SpatialInteractionManager.InteractionDetected) event and grab the SpatialPointerPose exposed there.</span></span> <span data-ttu-id="eac96-310">使用來自此姿勢的使用者前端光線, 與使用者環境中的全息和表面網格交集, 以判斷使用者要與誰互動。</span><span class="sxs-lookup"><span data-stu-id="eac96-310">Use the user's head gaze ray from this pose to intersect with the holograms and surface meshes in the user's surroundings, in order to determine what the user is intending to interact with.</span></span> <span data-ttu-id="eac96-311">然後, 使用[CaptureInteraction](http://msdn.microsoft.com/library/windows/apps/xaml/Windows.UI.Input.Spatial.SpatialGestureRecognizer.CaptureInteraction)方法, 將事件引數中的 SpatialInteraction 路由至目標全息影像的 SpatialGestureRecognizer。</span><span class="sxs-lookup"><span data-stu-id="eac96-311">Then, route the SpatialInteraction in the event arguments to the target hologram's SpatialGestureRecognizer, using its [CaptureInteraction](http://msdn.microsoft.com/library/windows/apps/xaml/Windows.UI.Input.Spatial.SpatialGestureRecognizer.CaptureInteraction) method.</span></span> <span data-ttu-id="eac96-312">這會根據在建立時或由[TrySetGestureSettings](http://msdn.microsoft.com/library/windows/apps/xaml/Windows.UI.Input.Spatial.SpatialGestureRecognizer.TrySetGestureSettings)在該辨識器上設定的[SpatialGestureSettings](https://msdn.microsoft.com/library/windows/apps/xaml/Windows.UI.Input.Spatial.SpatialGestureSettings) , 開始解讀該互動。</span><span class="sxs-lookup"><span data-stu-id="eac96-312">This starts interpreting that interaction according to the [SpatialGestureSettings](https://msdn.microsoft.com/library/windows/apps/xaml/Windows.UI.Input.Spatial.SpatialGestureSettings) set on that recognizer at creation time - or by [TrySetGestureSettings](http://msdn.microsoft.com/library/windows/apps/xaml/Windows.UI.Input.Spatial.SpatialGestureRecognizer.TrySetGestureSettings).</span></span>

<span data-ttu-id="eac96-313">在 HoloLens (第一代) 上, 互動和手勢通常會從使用者的眼中衍生其目標, 而不是嘗試直接在手中呈現或互動。</span><span class="sxs-lookup"><span data-stu-id="eac96-313">On HoloLens (first gen), interactions and gestures should generally derive their targeting from the user's head gaze, rather than trying to render or interact at the hand's location directly.</span></span> <span data-ttu-id="eac96-314">互動開始之後, 手的相對運動可能會用來控制手勢, 如同操作或導覽手勢。</span><span class="sxs-lookup"><span data-stu-id="eac96-314">Once an interaction has started, relative motions of the hand may be used to control the gesture, as with the Manipulation or Navigation gesture.</span></span>

## <a name="see-also"></a><span data-ttu-id="eac96-315">另請參閱</span><span class="sxs-lookup"><span data-stu-id="eac96-315">See also</span></span>
* [<span data-ttu-id="eac96-316">DirectX 中的頭部和眼睛目光</span><span class="sxs-lookup"><span data-stu-id="eac96-316">Head and eye gaze in DirectX</span></span>](gaze-in-directx.md)
* [<span data-ttu-id="eac96-317">直接操作輸入模型</span><span class="sxs-lookup"><span data-stu-id="eac96-317">Direct manipulation input model</span></span>](direct-manipulation.md)
* [<span data-ttu-id="eac96-318">點對認可輸入模型</span><span class="sxs-lookup"><span data-stu-id="eac96-318">Point-and-commit input model</span></span>](point-and-commit.md)
* [<span data-ttu-id="eac96-319">注視和認可輸入模型</span><span class="sxs-lookup"><span data-stu-id="eac96-319">Gaze and commit input model</span></span>](gaze-and-commit.md)
* [<span data-ttu-id="eac96-320">運動控制器</span><span class="sxs-lookup"><span data-stu-id="eac96-320">Motion controllers</span></span>](motion-controllers.md)
