---
title: 讓應用程式做好使用 HoloLens 2 的準備
description: 適用對象為擁有可在 HoloLens (第 1 代) 及/或較舊 MRTK 上運作的現有應用程式，並想要移植到 MRTK 第 2 版和 HoloLens 2 的開發人員。
author: grbury
ms.author: grbury
ms.date: 04/12/19
ms.topic: article
ms.localizationpriority: high
keywords: Windows Mixed Reality, 測試, MRTK, MRTK 第 2 版, HoloLens 2
ms.openlocfilehash: 02dabd21b7a6add2ce53fe291a447e49057184d0
ms.sourcegitcommit: f20beea6a539d04e1d1fc98116f7601137eebebe
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/05/2019
ms.locfileid: "66270389"
---
# <a name="getting-your-existing-app-ready-for-hololens-2"></a><span data-ttu-id="c40ee-104">讓現有應用程式做好使用 HoloLens 2 的準備</span><span class="sxs-lookup"><span data-stu-id="c40ee-104">Getting your existing app ready for HoloLens 2</span></span>

<span data-ttu-id="c40ee-105">本指南專門打造來協助開發人員，讓其將適用於 HoloLens (第 1 代) 的現有 Unity 應用程式，移植給新的 HoloLens 2 裝置使用。</span><span class="sxs-lookup"><span data-stu-id="c40ee-105">This guide is specifically tailored to help developers who have an existing Unity app for HoloLens (1st gen) to port their application for the new HoloLens 2 device.</span></span> <span data-ttu-id="c40ee-106">將 HoloLens (第 1 代) Unity 應用程式移植到 HoloLens 2 的作業有四個重要步驟。</span><span class="sxs-lookup"><span data-stu-id="c40ee-106">There are four key steps to porting a HoloLens (1st gen) Unity app to HoloLens 2.</span></span> <span data-ttu-id="c40ee-107">下列各節會詳細說明每個階段的資訊。</span><span class="sxs-lookup"><span data-stu-id="c40ee-107">The sections below will detail information for each stage.</span></span> 

| <span data-ttu-id="c40ee-108">步驟 1</span><span class="sxs-lookup"><span data-stu-id="c40ee-108">Step 1</span></span> | <span data-ttu-id="c40ee-109">步驟 2</span><span class="sxs-lookup"><span data-stu-id="c40ee-109">Step 2</span></span> | <span data-ttu-id="c40ee-110">步驟 3</span><span class="sxs-lookup"><span data-stu-id="c40ee-110">Step 3</span></span> | <span data-ttu-id="c40ee-111">步驟 4</span><span class="sxs-lookup"><span data-stu-id="c40ee-111">Step 4</span></span> |
|----------|-------------------|-------------------|-------------------|
| ![Visual Studio 標誌](images/visualstudio_logo.png) | ![Unity 標誌](images/unity_logo.png)| ![Unity 圖示](images/hololens2_icon.jpg) | ![MRTK 標誌](images/MRTKIcon.jpg) |
| <span data-ttu-id="c40ee-116">下載最新工具</span><span class="sxs-lookup"><span data-stu-id="c40ee-116">Download latest tools</span></span> | <span data-ttu-id="c40ee-117">更新 Unity 專案</span><span class="sxs-lookup"><span data-stu-id="c40ee-117">Update Unity Project</span></span> | <span data-ttu-id="c40ee-118">針對 ARM 進行編譯</span><span class="sxs-lookup"><span data-stu-id="c40ee-118">Compile for ARM</span></span> | <span data-ttu-id="c40ee-119">遷移至 MRTK v2</span><span class="sxs-lookup"><span data-stu-id="c40ee-119">Migrate to MRTK v2</span></span>

<span data-ttu-id="c40ee-120">**強烈建議**開發人員在開始移植程序之前，先利用原始檔控制來儲存其應用程式原始狀態的快照。</span><span class="sxs-lookup"><span data-stu-id="c40ee-120">It is **highly recommended** that, before beginning the porting process, developers utilize source control to save a snapshot of the original state of their app.</span></span> <span data-ttu-id="c40ee-121">此外，也建議開發人員在移植程序進行期間於各個時間點「儲存」  檢查點狀態。</span><span class="sxs-lookup"><span data-stu-id="c40ee-121">Additionally, it is recommended to *save* checkpoint states at various points during the process.</span></span> <span data-ttu-id="c40ee-122">為原始應用程式準備另一個 Unity 執行個體以便能在移植程序進行期間兩相比較，也會非常有幫助。</span><span class="sxs-lookup"><span data-stu-id="c40ee-122">It can also be very helpful to have another Unity instance of the original app to allow for side-by-side comparison during the port process.</span></span> 

> [!NOTE]
> <span data-ttu-id="c40ee-123">在移植之前，請確定您已安裝可用於開發 Windows Mixed Reality 的最新工具。</span><span class="sxs-lookup"><span data-stu-id="c40ee-123">Before porting, ensure you have the latest tools installed for Windows Mixed Reality development.</span></span> <span data-ttu-id="c40ee-124">對大部分現有的 HoloLens 開發人員來說，這主要涉及更新至最新的 Visual Studio 2017，以及安裝適當的 Windows SDK。</span><span class="sxs-lookup"><span data-stu-id="c40ee-124">For most existing HoloLens developers, this will primarily involve updating to the latest Visual Studio 2017 and installing the appropriate Windows SDK.</span></span> <span data-ttu-id="c40ee-125">以下內容將進一步說明不同的 Unity 版本和混合實境工具組第 2 版。</span><span class="sxs-lookup"><span data-stu-id="c40ee-125">The content below will dive further into different Unity versions and the Mixed Reality Toolkit version 2.</span></span>
>
> <span data-ttu-id="c40ee-126">如需詳細資訊，請參閱[安裝工具](install-the-tools.md)。</span><span class="sxs-lookup"><span data-stu-id="c40ee-126">For more information, please see [Install the tools](install-the-tools.md).</span></span>

## <a name="migrate-project-to-latest-version-of-unity"></a><span data-ttu-id="c40ee-127">將專案遷移至最新版的 Unity</span><span class="sxs-lookup"><span data-stu-id="c40ee-127">Migrate project to latest version of Unity</span></span>

<span data-ttu-id="c40ee-128">如果使用 MRTK v2，則 Unity 2018 LTS 會是最佳的長期支援途徑，因為 Unity 或 MRTK 沒有重大變更。</span><span class="sxs-lookup"><span data-stu-id="c40ee-128">If using the MRTK v2, then Unity 2018 LTS will be the best long-term support path with no breaking changes in Unity or in MRTK.</span></span>  <span data-ttu-id="c40ee-129">根據上面的「安裝工具」，建議的 Unity 組建是 Unity 2018.3，這會成為 Unity 2018 的 LTS 版本。</span><span class="sxs-lookup"><span data-stu-id="c40ee-129">The recommended Unity build, per the above "install the tools" is Unity 2018.3, which will become the LTS release for Unity 2018.</span></span>  <span data-ttu-id="c40ee-130">此外，MRTK v2 一律保證會支援 Unity 2018 LTS，但不一定保證支援 Unity 2019.x 的每個新版本。</span><span class="sxs-lookup"><span data-stu-id="c40ee-130">Further, the MRTK v2 will always guarantee support for Unity 2018 LTS but not necessarily guarantee support for every iteration of Unity 2019.x.</span></span> 

<span data-ttu-id="c40ee-131">為了協助釐清 Unity 2018.3.x 或 Unity 2019.1.x 之間的其他差異，下面會概述這兩個版本之間的利弊得失，其中的主要差異是能夠在 Unity 2019 中針對 ARM64 進行編譯。</span><span class="sxs-lookup"><span data-stu-id="c40ee-131">To help clarify additional differences between Unity 2018.3.x or Unity 2019.1.x, below outlines the trade-offs between these two versions, with the primary difference of significance being the ability to compile for ARM64 in Unity 2019.</span></span> 

<span data-ttu-id="c40ee-132">開發人員應該評估任何目前存在於其專案中的[外掛程式相依性](https://docs.unity3d.com/Manual/Plugins.html)，和是否可以針對 ARM64 建置這些 DLL。</span><span class="sxs-lookup"><span data-stu-id="c40ee-132">Developers should assess any [plugin dependencies](https://docs.unity3d.com/Manual/Plugins.html) that currently exist in their project and whether or not these DLLs can be built for ARM64.</span></span> <span data-ttu-id="c40ee-133">如果無法針對 ARM64 建置硬式相依性外掛程式，則必須利用 Unity 2018 LTS。</span><span class="sxs-lookup"><span data-stu-id="c40ee-133">If a hard dependency plugin cannot be built for ARM64, then one will have to utilize Unity 2018 LTS.</span></span>


| <span data-ttu-id="c40ee-134">Unity 2018.3.x</span><span class="sxs-lookup"><span data-stu-id="c40ee-134">Unity 2018.3.x</span></span> | <span data-ttu-id="c40ee-135">Unity 2019.1+</span><span class="sxs-lookup"><span data-stu-id="c40ee-135">Unity 2019.1+</span></span> |
|----------|-------------------|
| <span data-ttu-id="c40ee-136">ARM32 組建支援</span><span class="sxs-lookup"><span data-stu-id="c40ee-136">ARM32 build support</span></span> | <span data-ttu-id="c40ee-137">ARM32 和 ARM64 組建支援</span><span class="sxs-lookup"><span data-stu-id="c40ee-137">ARM32 and ARM64 build support</span></span> |
| <span data-ttu-id="c40ee-138">穩定的 LTS 組建發行</span><span class="sxs-lookup"><span data-stu-id="c40ee-138">Stable LTS build release</span></span> | <span data-ttu-id="c40ee-139">Beta 穩定性</span><span class="sxs-lookup"><span data-stu-id="c40ee-139">Beta stability</span></span> |
| <span data-ttu-id="c40ee-140">[.NET 指令碼處理後端](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) *已過時*</span><span class="sxs-lookup"><span data-stu-id="c40ee-140">[.NET Scripting back-end](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) *deprecated*</span></span> | <span data-ttu-id="c40ee-141">[.NET 指令碼處理後端](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) *已移除*</span><span class="sxs-lookup"><span data-stu-id="c40ee-141">[.NET Scripting back-end](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) *removed*</span></span> |
| <span data-ttu-id="c40ee-142">UNET 網路 *已過時*</span><span class="sxs-lookup"><span data-stu-id="c40ee-142">UNET Networking *deprecated*</span></span> | <span data-ttu-id="c40ee-143">UNET 網路 *已移除*</span><span class="sxs-lookup"><span data-stu-id="c40ee-143">UNET Networking *removed*</span></span> |

## <a name="update-sceneproject-settings-in-unity"></a><span data-ttu-id="c40ee-144">更新 Unity 中的場景/專案設定</span><span class="sxs-lookup"><span data-stu-id="c40ee-144">Update scene/project settings in Unity</span></span>

<span data-ttu-id="c40ee-145">在更新至 Unity 2018.3.x 或 Unity 2019+ 之後，建議您更新 Unity 中的特殊設定，以便在裝置上獲得最佳結果。</span><span class="sxs-lookup"><span data-stu-id="c40ee-145">After updating to Unity 2018.3.x or Unity 2019+, it is recommended to update particular settings in Unity for optimal results on device.</span></span> <span data-ttu-id="c40ee-146">**[Unity 的建議設定](Recommended-settings-for-Unity.md)** 底下會詳述這些設定。</span><span class="sxs-lookup"><span data-stu-id="c40ee-146">These settings are outlined in detail under **[Recommended settings for Unity](Recommended-settings-for-Unity.md)**.</span></span>

<span data-ttu-id="c40ee-147">重申一遍，[.NET 指令碼處理後端](https://docs.unity3d.com/Manual/windowsstore-dotnet.html)在 Unity 2018 已過時，且在 Unity 2019 中「已移除」  ，因此開發人員應積極考慮將其專案切換至 [IL2CPP](https://docs.unity3d.com/Manual/IL2CPP.html)。</span><span class="sxs-lookup"><span data-stu-id="c40ee-147">It should be re-iterated that the [.NET Scripting back-end](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) is being deprecated in Unity 2018 and *removed* in Unity 2019 and thus, developers should strongly consider switching their project over to [IL2CPP](https://docs.unity3d.com/Manual/IL2CPP.html).</span></span> 

> [!NOTE]
> <span data-ttu-id="c40ee-148">IL2CPP 指令碼處理後端會讓從 Unity 到 Visual Studio 的建置時間變長，因此請開發人員設定其開發人員機器以便[最佳化 IL2CPP 建置時間](https://docs.unity3d.com/Manual/IL2CPP-OptimizingBuildTimes.html)。</span><span class="sxs-lookup"><span data-stu-id="c40ee-148">IL2CPP scripting back-end can cause longer build times from Unity to Visual Studio and thus developers should setup their developer machine for [optimizing IL2CPP build times](https://docs.unity3d.com/Manual/IL2CPP-OptimizingBuildTimes.html).</span></span>
> <span data-ttu-id="c40ee-149">此外，設定[快取伺服器](https://docs.unity3d.com/Manual/CacheServer.html)可能會有幫助，對於有大量資產 (排除指令檔) 或不斷變更場景/資產的 Unity 專案來說，更是如此。</span><span class="sxs-lookup"><span data-stu-id="c40ee-149">Furthermore, it may be beneficial to setup a [Cache Server](https://docs.unity3d.com/Manual/CacheServer.html), especially for Unity projects with a large amount of assets (excluding script files) or constantly changing scenes/assets.</span></span> <span data-ttu-id="c40ee-150">開啟專案時，Unity 會將符合資格的資產以內部快取格式儲存在開發機器上。</span><span class="sxs-lookup"><span data-stu-id="c40ee-150">When opening a project, Unity stores qualifying assets into an internal cache format on the developer machine.</span></span> <span data-ttu-id="c40ee-151">項目必須重新匯入，因此修改時必須加以重新處理。</span><span class="sxs-lookup"><span data-stu-id="c40ee-151">Items must be re-imported and thus re-processed when modified.</span></span> <span data-ttu-id="c40ee-152">此程序可以執行一次後就儲存在快取伺服器中，之後再與其他開發人員共用以節省時間，而不是每位開發人員都在本機處理新變更的重新匯入工作。</span><span class="sxs-lookup"><span data-stu-id="c40ee-152">This process can be done once and saved in a Cache Server and consequently shared with other developers to save time, instead of every developer processing the re-import of new changes locally.</span></span>

<span data-ttu-id="c40ee-153">移至已更新的 Unity 版本之後若有解決任何重大變更，開發人員就應該在 HoloLens (第 1 代) 上建置並測試其目前的應用程式。</span><span class="sxs-lookup"><span data-stu-id="c40ee-153">After addressing any breaking changes after moving to the updated Unity version, developers should build and test their current apps on HoloLens (1st gen).</span></span> <span data-ttu-id="c40ee-154">此外，這也是為原始檔控制建立並儲存認可的好時機。</span><span class="sxs-lookup"><span data-stu-id="c40ee-154">Further, this is a good point to create and save a commit for source control.</span></span> 

## <a name="compile-dependenciesplugins-for-arm-processor"></a><span data-ttu-id="c40ee-155">針對 ARM 處理器編譯相依性/外掛程式</span><span class="sxs-lookup"><span data-stu-id="c40ee-155">Compile dependencies/plugins for ARM processor</span></span>

<span data-ttu-id="c40ee-156">HoloLens (第 1 代) 會在 x86 處理器上執行應用程式，新的 HoloLens 2 裝置則會利用 ARM 處理器。</span><span class="sxs-lookup"><span data-stu-id="c40ee-156">HoloLens (1st gen) executed applications on an x86 processor while the new HoloLens 2 device utilizes an ARM processor.</span></span> <span data-ttu-id="c40ee-157">因此，現有應用程式必須移植過去才能支援 ARM。</span><span class="sxs-lookup"><span data-stu-id="c40ee-157">Thus, existing applications need to be ported over to support ARM.</span></span> <span data-ttu-id="c40ee-158">如先前所述，Unity 2018 支援針對 ARM32 應用程式進行編譯，而 Unity 2019+ 則支援針對 ARM64 應用程式進行編譯。</span><span class="sxs-lookup"><span data-stu-id="c40ee-158">As noted earlier, Unity 2018 supports compiling for ARM32 apps while Unity 2019+ supports compiling for ARM64 apps.</span></span> <span data-ttu-id="c40ee-159">一般會比較喜歡針對 ARM64 應用程式進行開發，因為效能差異極大。</span><span class="sxs-lookup"><span data-stu-id="c40ee-159">Developing for ARM64 applications is generally preferred as there is a material difference in performance.</span></span> <span data-ttu-id="c40ee-160">但要這麼做，所有的[外掛程式相依性](https://docs.unity3d.com/Manual/Plugins.html)也必須針對 ARM64 來建置。</span><span class="sxs-lookup"><span data-stu-id="c40ee-160">However, this requires all [plugin dependencies](https://docs.unity3d.com/Manual/Plugins.html) to also be built for ARM64.</span></span> 

<span data-ttu-id="c40ee-161">請檢閱您應用程式中目前的所有 DLL 相依性。</span><span class="sxs-lookup"><span data-stu-id="c40ee-161">Review all DLL dependencies in your application currently.</span></span> <span data-ttu-id="c40ee-162">如果不再需要某個相依性，建議您將其從專案中移除。</span><span class="sxs-lookup"><span data-stu-id="c40ee-162">If a dependency is no longer needed, it is advisable to remove it from your project.</span></span> <span data-ttu-id="c40ee-163">至於其餘的必要外掛程式，則請將個別的 ARM32 或 ARM64 二進位檔案嵌入至您的 Unity 專案中。</span><span class="sxs-lookup"><span data-stu-id="c40ee-163">For remaining plugins that are required, ingest the respective ARM32 or ARM64 binaries into your Unity project.</span></span> 

<span data-ttu-id="c40ee-164">嵌入相關的 DLL 之後，請從 Unity 建置 Visual Studio 解決方案，然後在 Visual Studio 中針對 ARM 來編譯 AppX，以測試是否可以針對 ARM 處理器來建置您的應用程式。</span><span class="sxs-lookup"><span data-stu-id="c40ee-164">After ingesting the relevant DLLs, build a Visual Studio solution from Unity and then compile an AppX for ARM in Visual Studio to test that your application can be built for ARM processors.</span></span> <span data-ttu-id="c40ee-165">這是另一個建議您在原始檔控制解決方案中儲存認可的時間點。</span><span class="sxs-lookup"><span data-stu-id="c40ee-165">This another point where it is advised to save a commit in your source control solution.</span></span> 

## <a name="update-to-mrtk-version-2"></a><span data-ttu-id="c40ee-166">更新至 MRTK 第 2 版</span><span class="sxs-lookup"><span data-stu-id="c40ee-166">Update to MRTK version 2</span></span>

<span data-ttu-id="c40ee-167">MRTK 第 2 版是新的工具組，作為其建置依據的 Unity 可同時支援 HoloLens (第 1 代) 和 HoloLens 2，且其中已新增所有新的 HoloLens 2 功能，例如手部互動和眼球追蹤。</span><span class="sxs-lookup"><span data-stu-id="c40ee-167">MRTK version 2 is the new toolkit on top of Unity supporting both HoloLens (1st gen) and HoloLens 2, and where all of the new HoloLens 2 capabilities have been added, such as hand interactions and eye tracking.</span></span>

### <a name="prepare-for-the-migration"></a><span data-ttu-id="c40ee-168">準備移轉</span><span class="sxs-lookup"><span data-stu-id="c40ee-168">Prepare for the migration</span></span>

<span data-ttu-id="c40ee-169">在嵌入新的 [\*.unitypackage 檔案 (適用於 MRTK v2)](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases) 之前，建議您清查 **1) 與 MRTK v1 整合的任何自訂建置程式碼**和 **2) 用於輸入互動或 UX 元件的任何自訂建置程式碼**。</span><span class="sxs-lookup"><span data-stu-id="c40ee-169">Before ingesting the new [\*.unitypackage files for MRTK v2](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases), it is recommended to take an inventory of **1) any custom-built code that integrates with MRTK v1** and **2) any custom-built code for input interactions or UX components**.</span></span> <span data-ttu-id="c40ee-170">內嵌新 MRTK v2 的 Mixed Reality 開發人員會在輸入和互動方面產生最常見也最普遍的衝突。</span><span class="sxs-lookup"><span data-stu-id="c40ee-170">The most common and prevalent conflict for a Mixed Reality developer ingesting the new MRTK v2 will involve input and interactions.</span></span> <span data-ttu-id="c40ee-171">因此，建議您開始閱讀和了解 [MRTK v2 輸入模型](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Input/Overview.html)。</span><span class="sxs-lookup"><span data-stu-id="c40ee-171">Thus, it is advised to begin reading and understanding the [MRTK v2 input model](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Input/Overview.html).</span></span>

<span data-ttu-id="c40ee-172">終於，新的 MRTK v2 已從指令碼和場景中管理員物件的模型轉換為設定和服務提供者架構。</span><span class="sxs-lookup"><span data-stu-id="c40ee-172">Finally, the new MRTK v2 has transitioned from a model of scripts and in-scene manager objects to a configuration and services provider architecture.</span></span> <span data-ttu-id="c40ee-173">這會讓場景階層和架構模型更為簡潔，但需要花一段時間學習才能了解新的組態設定檔。</span><span class="sxs-lookup"><span data-stu-id="c40ee-173">This results in a cleaner scene hierarchy and architecture model but requires a learning curve for understanding the new configuration profiles.</span></span> <span data-ttu-id="c40ee-174">因此，請閱讀[混合實境工具組設定指南](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/MixedRealityConfigurationGuide.html)來開始熟悉重要設定和設定檔，以調整為符合應用程式的需求。</span><span class="sxs-lookup"><span data-stu-id="c40ee-174">Thus, please read the [Mixed Reality Toolkit Configuration Guide](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/MixedRealityConfigurationGuide.html) to start becoming familiar with the important settings and profiles to adjust to the needs of your application.</span></span> 

### <a name="perform-the-migration"></a><span data-ttu-id="c40ee-175">執行移轉</span><span class="sxs-lookup"><span data-stu-id="c40ee-175">Perform the migration</span></span>

<span data-ttu-id="c40ee-176">匯入 MRTK v2 之後，Unity 專案可能會有許多編譯器相關錯誤。</span><span class="sxs-lookup"><span data-stu-id="c40ee-176">After importing MRTK v2, your Unity project will likely have many compiler related errors.</span></span> <span data-ttu-id="c40ee-177">會有這些錯誤通常是因為使用了新的命名空間結構和新的元件名稱。</span><span class="sxs-lookup"><span data-stu-id="c40ee-177">These are most commonly due to the new namespace structure and new component names.</span></span> <span data-ttu-id="c40ee-178">請繼續藉由將指令碼修改為新的命名空間和元件，來解決這些錯誤。</span><span class="sxs-lookup"><span data-stu-id="c40ee-178">Proceed to resolve these errors by modifying your scripts to the new namespaces and components.</span></span> 

<span data-ttu-id="c40ee-179">如需 HTK/MRTK 和 MRTK 第 2 版之間特定 API 差異的詳細資訊，請參閱 [MRTK 第 2 版 Wiki](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/HTKToMRTKPortingGuide.html) 上的移植指南。</span><span class="sxs-lookup"><span data-stu-id="c40ee-179">For more information on specific API differences between HTK/MRTK and MRTK version 2, see the porting guide on the [MRTK Version 2 wiki](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/HTKToMRTKPortingGuide.html).</span></span>

### <a name="best-practices"></a><span data-ttu-id="c40ee-180">最佳作法</span><span class="sxs-lookup"><span data-stu-id="c40ee-180">Best practices</span></span>

- <span data-ttu-id="c40ee-181">最好使用 MRTK 標準著色器</span><span class="sxs-lookup"><span data-stu-id="c40ee-181">Prefer use of the MRTK Standard shader</span></span>
- <span data-ttu-id="c40ee-182">一次處理一個重大變更類型 (例如：IFocusable 至 IMixedRealityFocusHandler)</span><span class="sxs-lookup"><span data-stu-id="c40ee-182">Work on one breaking change type at a time (ex: IFocusable to IMixedRealityFocusHandler)</span></span>
- <span data-ttu-id="c40ee-183">每次變更後進行測試，並利用原始檔控制</span><span class="sxs-lookup"><span data-stu-id="c40ee-183">Test after every change and utilize source control</span></span>
- <span data-ttu-id="c40ee-184">盡可能使用預設的 MRTK UX (按鈕、靜態圖像等)</span><span class="sxs-lookup"><span data-stu-id="c40ee-184">Use default MRTK UX (buttons, slates, etc) when possible</span></span>
- <span data-ttu-id="c40ee-185">試著避免直接修改 MRTK 檔案，改為圍繞 MRTK 元件來建立包裝函式</span><span class="sxs-lookup"><span data-stu-id="c40ee-185">Try to refrain from modifying MRTK files directly, instead create wrappers around MRTK components</span></span>
    - <span data-ttu-id="c40ee-186">這可避免日後需要內嵌和更新 MRTK</span><span class="sxs-lookup"><span data-stu-id="c40ee-186">This will protect against future MRTK ingestions and updates</span></span>
- <span data-ttu-id="c40ee-187">檢閱和探索 MRTK 中所提供的場景範例 (尤其是 HandInteractionExamples.scene  )</span><span class="sxs-lookup"><span data-stu-id="c40ee-187">Review & explore sample scenes provided in MRTK (especially *HandInteractionExamples.scene*)</span></span>
- <span data-ttu-id="c40ee-188">改為重建有四色、碰撞器和 TextMeshPro 文字的畫布式 UI</span><span class="sxs-lookup"><span data-stu-id="c40ee-188">Rebuild canvas-based UI with quads, colliders and TextMeshPro text instead</span></span>

### <a name="testing-your-application"></a><span data-ttu-id="c40ee-189">測試應用程式</span><span class="sxs-lookup"><span data-stu-id="c40ee-189">Testing your application</span></span>

<span data-ttu-id="c40ee-190">既然 MRTK 第 2 版 (自 [RC1](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases/tag/v2.0.0-RC1) 起) 中已經有提供 HoloLens 2 元件與功能，您可以直接在 Unity 中模擬手部互動，並針對新的 API 來開發手部互動和眼球追蹤。</span><span class="sxs-lookup"><span data-stu-id="c40ee-190">Now that HoloLens 2 components and capabilities are available in MRTK version 2, as of [RC1](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases/tag/v2.0.0-RC1), you can simulate the hand interactions directly in Unity, and develop against the new APIs for hand interactions and eye tracking.</span></span>  <span data-ttu-id="c40ee-191">需要有 HoloLens 2 裝置才能建立絕佳體驗，但您至少可以先在工具和文件中開始學習。</span><span class="sxs-lookup"><span data-stu-id="c40ee-191">The HoloLens 2 device is required to create a great experience, but at least one could start learning in the tools and documentation.</span></span> <span data-ttu-id="c40ee-192">此外，MRTK v2 支援在 HoloLens (第 1 代) 上進行開發，因此傳統的輸入模型 (例如，透過空中點選來進行選取) 仍可在 HoloLens (第 1 代) 裝置上進行測試。</span><span class="sxs-lookup"><span data-stu-id="c40ee-192">Further, MRTK v2 supports development on HoloLens (1st gen) and thus, traditional input models such as select via air-tap can still be tested on HoloLens (1st gen) devices.</span></span> 

## <a name="updating-interaction-model-for-hololens-2"></a><span data-ttu-id="c40ee-193">更新 HoloLens 2 的互動模型</span><span class="sxs-lookup"><span data-stu-id="c40ee-193">Updating interaction model for HoloLens 2</span></span>

<span data-ttu-id="c40ee-194">移植應用程式並讓其做好使用 HoloLens 2 的準備之後，您就可以開始考慮更新互動模型和全像投影設計/位置。</span><span class="sxs-lookup"><span data-stu-id="c40ee-194">Once you have your app ported and prepped for HoloLens 2, you are ready to consider updating your interaction model and hologram designs/placement.</span></span>
<span data-ttu-id="c40ee-195">您的應用程式來自 HoloLens (第 1 代)，因此可能有注視和認可互動模型，而讓全像投影遠遠無法融入視野。</span><span class="sxs-lookup"><span data-stu-id="c40ee-195">Coming from HoloLens (1st gen), your app likely has a gaze and commit interaction model, with holograms relatively far away to fit into the field of view.</span></span>

<span data-ttu-id="c40ee-196">下列步驟可更新您應用程式的設計而使其完美適合 HoloLens 2：</span><span class="sxs-lookup"><span data-stu-id="c40ee-196">Steps to update your app design to be best for HoloLens 2:</span></span>
1.  <span data-ttu-id="c40ee-197">MRTK 元件：根據事前工作，如果您已新增 MRTK v2，則其中會有各種已針對 HoloLens 2 來設計及最佳化的元件/指令碼可供運用。</span><span class="sxs-lookup"><span data-stu-id="c40ee-197">MRTK components: Per the pre-work, if you added MRTK v2, there are various components/scripts to leverage that have been designed and optimized for HoloLens 2.</span></span>

2.  <span data-ttu-id="c40ee-198">互動模型：請考慮更新互動模型。</span><span class="sxs-lookup"><span data-stu-id="c40ee-198">Interaction model: Consider updating your interaction model.</span></span>  <span data-ttu-id="c40ee-199">大部分情況下，建議您從注視和認可切換至手部。</span><span class="sxs-lookup"><span data-stu-id="c40ee-199">For most scenarios, we recommend switching from gaze and commit to hands.</span></span>  <span data-ttu-id="c40ee-200">一般來說，全像投影會在比手臂可及範圍還遠的地方，因此切換為手部會讓互動指標光線和抓取手勢變遠。</span><span class="sxs-lookup"><span data-stu-id="c40ee-200">With your holograms typically being out of arms reach, switching to hands will result in far interaction pointing rays and grab gestures.</span></span>
<span data-ttu-id="c40ee-201">注意：在某些情況下，必須要有不用手部操作的互動模型 (例如，手裡握著工具的任務工作人員)，因此會有這類情況的具體設計指導方針。</span><span class="sxs-lookup"><span data-stu-id="c40ee-201">Note: there are scenarios where a hands-free interaction model is required, such as a task worker holding tools, and there is specific design guidance for such cases.</span></span> 

3.  <span data-ttu-id="c40ee-202">全像投影位置：切換到手部互動模型之後，請考慮使用近距離互動抓取手勢將某些全像投影移得近一些，以便讓手部直接與全像投影互動。</span><span class="sxs-lookup"><span data-stu-id="c40ee-202">Hologram placement: After switching to a hands interaction model, consider moving some holograms closer to directly interact with the holograms with your hands, using near interaction grab gestures.</span></span>  <span data-ttu-id="c40ee-203">建議可移得近一些以便能直接抓取或互動的全像投影類型包括，可在抓取和檢查全像投影時融入到 HoloLens 2 視野內的小型目標功能表、控制項、按鈕和較小型的全像投影。</span><span class="sxs-lookup"><span data-stu-id="c40ee-203">The types of holograms recommended to move closer to directly grab or interact are small target menus, controls, buttons, and smaller holograms that fit within the HoloLens 2 field of view when grabbing and inspecting the hologram.</span></span>
<br>
<span data-ttu-id="c40ee-204">每個應用程式和情境各不相同，所以我們會持續地根據意見反應和不斷地學習來改善和發佈設計指導方針。</span><span class="sxs-lookup"><span data-stu-id="c40ee-204">Every app and scenario is different, and we’ll continue to refine and post design guidance based on feedback and continued learnings.</span></span>


## <a name="additional-learnings-from-moving-apps-from-x86-to-arm"></a><span data-ttu-id="c40ee-205">將應用程式從 x86 移至 ARM 所獲得的其他經驗</span><span class="sxs-lookup"><span data-stu-id="c40ee-205">Additional learnings from moving apps from x86 to ARM</span></span>

- <span data-ttu-id="c40ee-206">簡截了當的 Unity 應用程式很簡單，因為您可以建置 ARM AppX 套件組合或直接部署至裝置中，然後便可執行。</span><span class="sxs-lookup"><span data-stu-id="c40ee-206">Straight Unity apps are simple as you can build an ARM appx bundle or deploy directly to the device and it runs.</span></span>
<span data-ttu-id="c40ee-207">但如果 Unity 應用程式使用原生外掛程式，挑戰便會接踵而來。</span><span class="sxs-lookup"><span data-stu-id="c40ee-207">The challenge comes when the Unity app uses native plugins.</span></span>  <span data-ttu-id="c40ee-208">所有原生外掛程式都必須升級至 VS2017 並針對 ARM 重新建置，若使用 Unity 2019，則必須針對 ARM64 重新建置。</span><span class="sxs-lookup"><span data-stu-id="c40ee-208">All of the native plugins need to be upgraded to VS2017 and rebuilt for ARM, and with Unity 2019, ARM64.</span></span>

- <span data-ttu-id="c40ee-209">若應用程式使用適用於 Unity 的 AudioKinetic Wwise 外掛程式，且使用的版本沒有 UWP ARM 外掛程式。</span><span class="sxs-lookup"><span data-stu-id="c40ee-209">One app, used the AudioKinetic Wwise plugin for Unity, and the version used didn’t have a UWP ARM plugin.</span></span> <span data-ttu-id="c40ee-210">該應用程式就需要用上好幾天的時間來重新處理應用程式中的音效，才能在 ARM 上運作。</span><span class="sxs-lookup"><span data-stu-id="c40ee-210">It took several days to re-work the sound in the application to work on ARM.</span></span>

- <span data-ttu-id="c40ee-211">在其他情況下，應用程式所需的外掛程式可能沒有 UWP/ARM 外掛程式，因此無法移植到 HoloLens 2 並於上面執行。</span><span class="sxs-lookup"><span data-stu-id="c40ee-211">In other cases, a UWP/ARM plugin may not exist for app-required plugins, blocking the ability to port and run on HoloLens 2.</span></span>  <span data-ttu-id="c40ee-212">您可能需要與外掛程式提供者接洽，才能解除障礙並支援 ARM。</span><span class="sxs-lookup"><span data-stu-id="c40ee-212">Engagement with the plugin provider may be needed to unblock and support ARM.</span></span>

- <span data-ttu-id="c40ee-213">著色器中的 minfloat (和 min16float、minint 等變化) 在 HoloLen 2 上和在 HoloLens (第 1 代) 上的行為可能會不一樣。</span><span class="sxs-lookup"><span data-stu-id="c40ee-213">The minfloat (and variants such as min16float, minint, etc…) in shaders may behave differently on HoloLen 2 than on HoloLens (1st gen).</span></span> <span data-ttu-id="c40ee-214">具體來說，這些數字會保證「至少會使用指定的位元數」。</span><span class="sxs-lookup"><span data-stu-id="c40ee-214">Specifically, these guarantee that “at least the specified number of bits will be used”.</span></span> <span data-ttu-id="c40ee-215">Intel/Nvidia GPU 多半會將這些數字當做 32 位元來處理。</span><span class="sxs-lookup"><span data-stu-id="c40ee-215">On Intel/Nvidia GPUs, these are largely just treated as 32 bits.</span></span> <span data-ttu-id="c40ee-216">ARM 則會實際採用所指定的位元數。</span><span class="sxs-lookup"><span data-stu-id="c40ee-216">On ARM, the number of bits specified is actually respected.</span></span> <span data-ttu-id="c40ee-217">這表示實際上這些數字在 HoloLens 2 上的精確度/範圍，可能會比在 HoloLens (第 1 代) 上來得少。</span><span class="sxs-lookup"><span data-stu-id="c40ee-217">That means that in practice, these numbers may have less precision/range on HoloLens 2 than they did on HoloLens (1st gen).</span></span>

- <span data-ttu-id="c40ee-218">_asm 指令似乎無法在 ARM 上運作，這表示任何使用 _asm 指令的程式碼將必須重寫。</span><span class="sxs-lookup"><span data-stu-id="c40ee-218">The _asm instructions don’t appear to work on ARM, meaning any code using _asm instructions will have to be rewritten.</span></span>

- <span data-ttu-id="c40ee-219">ARM 不支援 SIMD 指令集。</span><span class="sxs-lookup"><span data-stu-id="c40ee-219">The SIMD instruction set is not supported on ARM.</span></span> <span data-ttu-id="c40ee-220">這表示在 ARM 上無法使用 xmmintrin.h、emmintrin.h、tmmintrin.h 和 immintrin.h 等各種標頭。</span><span class="sxs-lookup"><span data-stu-id="c40ee-220">This means various headers, such as xmmintrin.h, emmintrin.h, tmmintrin.h, and immintrin.h are not available on ARM.</span></span>

- <span data-ttu-id="c40ee-221">ARM 上的著色器編譯器會在第一次繪製呼叫期間，於著色器已載入或著色器所相依的某個項目有所變更後執行，而不是在著色器載入時執行。</span><span class="sxs-lookup"><span data-stu-id="c40ee-221">The shader compiler on ARM runs during the first draw call after the shader has been loaded or something the shader relies on has changed, not at shader load time.</span></span> <span data-ttu-id="c40ee-222">視需要編譯的著色器數目多寡而定，畫面播放速率所受到的影響可能會非常明顯。</span><span class="sxs-lookup"><span data-stu-id="c40ee-222">The impact on framerate can be very noticeable, depending on how many shaders need to be compiled.</span></span> <span data-ttu-id="c40ee-223">對於在 HoloLens 2 和 HoloLens (第 1 代) 上應該如何以不同方式處理/封裝/更新著色器，這一點會產生不同的影響。</span><span class="sxs-lookup"><span data-stu-id="c40ee-223">This has various implications for how shaders should be handled/packaged/updated differently on HoloLens 2 vs HoloLens (1st gen).</span></span>

## <a name="see-also"></a><span data-ttu-id="c40ee-224">請參閱</span><span class="sxs-lookup"><span data-stu-id="c40ee-224">See also</span></span>
* [<span data-ttu-id="c40ee-225">開始使用 MRTK 第 2 版</span><span class="sxs-lookup"><span data-stu-id="c40ee-225">Getting started with MRTK version 2</span></span>](mrtk-getting-started.md)
* [<span data-ttu-id="c40ee-226">MRTK 第 2 版操作說明</span><span class="sxs-lookup"><span data-stu-id="c40ee-226">MRTK Version 2 HowTo</span></span>](https://microsoft.github.io/MixedRealityToolkit-Unity/External/HowTo/README.html)
* [<span data-ttu-id="c40ee-227">安裝工具</span><span class="sxs-lookup"><span data-stu-id="c40ee-227">Install the tools</span></span>](install-the-tools.md)
* [<span data-ttu-id="c40ee-228">Unity 的建議設定</span><span class="sxs-lookup"><span data-stu-id="c40ee-228">Recommended settings for Unity</span></span>](recommended-settings-for-unity.md)
* [<span data-ttu-id="c40ee-229">了解混合實境的效能</span><span class="sxs-lookup"><span data-stu-id="c40ee-229">Understanding performance for Mixed Reality</span></span>](understanding-performance-for-mixed-reality.md)

