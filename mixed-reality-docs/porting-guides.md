---
title: 移植指南
description: 逐步解說說明如何將現有的沉浸式應用程式移植到 Windows Mixed Reality。
author: JBrentJ
ms.author: alexturn
ms.date: 07/07/2020
ms.topic: article
keywords: 埠、移植、unity、中介軟體、引擎、UWP、Win32
ms.openlocfilehash: a1e3cd47096d728091d62d6c038bf6b2eb6bab16
ms.sourcegitcommit: 0eb99fae933d4374af2c032af4e9ceda1807e532
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/09/2020
ms.locfileid: "86156769"
---
# <a name="porting-guides"></a><span data-ttu-id="0276e-104">移植指南</span><span class="sxs-lookup"><span data-stu-id="0276e-104">Porting guides</span></span>

## <a name="overview"></a><span data-ttu-id="0276e-105">概觀</span><span class="sxs-lookup"><span data-stu-id="0276e-105">Overview</span></span>

<span data-ttu-id="0276e-106">Windows 10 包含沉浸式和全像攝影耳機的直接支援。</span><span class="sxs-lookup"><span data-stu-id="0276e-106">Windows 10 includes direct support for immersive and holographic headsets.</span></span> <span data-ttu-id="0276e-107">如果您已針對其他裝置（例如 Oculus go Rift 或 HTC Vive）建立內容，這些專案會相依于存在於作業系統平臺 API 的程式庫。</span><span class="sxs-lookup"><span data-stu-id="0276e-107">If you've built content for other devices, such as the Oculus Rift or HTC Vive, these have dependencies on libraries that exist above the operating system's platform API.</span></span> <span data-ttu-id="0276e-108">將現有內容帶入 Windows Mixed Reality 牽涉到將這些其他 Sdk 的使用重定至 Windows Api。</span><span class="sxs-lookup"><span data-stu-id="0276e-108">Bringing existing content over to Windows Mixed Reality involves retargeting usage of these other SDKs to the Windows APIs.</span></span> <span data-ttu-id="0276e-109">[適用于 mixed reality 的 Windows 平臺 api](https://docs.microsoft.com/uwp/api/Windows.Perception)可同時與 Win32 和通用 WINDOWS 平臺（UWP）應用程式模型搭配使用。</span><span class="sxs-lookup"><span data-stu-id="0276e-109">The [Windows platform APIs for mixed reality](https://docs.microsoft.com/uwp/api/Windows.Perception) work with both the Win32 and the Universal Windows Platform (UWP) app model.</span></span> <span data-ttu-id="0276e-110">如果您的應用程式尚未針對 UWP 建立，則變更為 UWP 將會是移植體驗的一部分。</span><span class="sxs-lookup"><span data-stu-id="0276e-110">If your app isn't already built for UWP, changing over to UWP will be part of the porting experience.</span></span>

## <a name="porting-overview"></a><span data-ttu-id="0276e-111">移植總覽</span><span class="sxs-lookup"><span data-stu-id="0276e-111">Porting overview</span></span>

<span data-ttu-id="0276e-112">概括而言，移植現有的內容牽涉到下列步驟：</span><span class="sxs-lookup"><span data-stu-id="0276e-112">At a high level, the following steps are involved in porting existing content:</span></span>
1. <span data-ttu-id="0276e-113">**確定您的電腦正在執行 Windows 10 秋季建立者更新（16299）。**</span><span class="sxs-lookup"><span data-stu-id="0276e-113">**Make sure your PC is running the Windows 10 Fall Creators Update (16299).**</span></span> <span data-ttu-id="0276e-114">我們不再建議從內部跳躍略過的通道接收預覽組建，因為這些組建對混合現實開發而言並不是最穩定的。</span><span class="sxs-lookup"><span data-stu-id="0276e-114">We no longer recommend receiving preview builds from the Insider Skip Ahead ring, as those builds won't be the most stable for mixed reality development.</span></span>
2. <span data-ttu-id="0276e-115">**升級至圖形或遊戲引擎的最新版本。**</span><span class="sxs-lookup"><span data-stu-id="0276e-115">**Upgrade to the latest version of your graphics or game engine.**</span></span> <span data-ttu-id="0276e-116">遊戲引擎必須支援 Windows 10 SDK 版本10.0.15063.0 （于2017年4月發行）或更高版本。</span><span class="sxs-lookup"><span data-stu-id="0276e-116">Game engines will need to support the Windows 10 SDK version 10.0.15063.0 (released in April 2017) or higher.</span></span>
3. <span data-ttu-id="0276e-117">**升級任何中介軟體、外掛程式或元件。**</span><span class="sxs-lookup"><span data-stu-id="0276e-117">**Upgrade any middleware, plug-ins, or components.**</span></span> <span data-ttu-id="0276e-118">如果您的應用程式包含任何元件，最好先升級至最新版本。</span><span class="sxs-lookup"><span data-stu-id="0276e-118">If your app contains any components, it's a good idea to upgrade to the latest version.</span></span> <span data-ttu-id="0276e-119">較新版本的最常見外掛程式支援 UWP。</span><span class="sxs-lookup"><span data-stu-id="0276e-119">Newer versions of most common plug-ins have support for UWP.</span></span>
4. <span data-ttu-id="0276e-120">**移除重複 sdk 的**相依性。</span><span class="sxs-lookup"><span data-stu-id="0276e-120">**Remove dependencies on duplicate SDKs**.</span></span> <span data-ttu-id="0276e-121">根據您的內容設為目標的裝置，您必須移除或有條件地編譯該 SDK （例如，SteamVR），如此您才能改為以 Windows Api 為目標。</span><span class="sxs-lookup"><span data-stu-id="0276e-121">Depending on which device your content was targeting, you'll need to remove or conditionally compile out that SDK (for example, SteamVR) so you can target the Windows APIs instead.</span></span>
5. <span data-ttu-id="0276e-122">**解決組建問題。**</span><span class="sxs-lookup"><span data-stu-id="0276e-122">**Work through build issues.**</span></span> <span data-ttu-id="0276e-123">此時，移植練習僅適用于您的應用程式、您的引擎和您擁有的元件相依性。</span><span class="sxs-lookup"><span data-stu-id="0276e-123">At this point, the porting exercise is specific to your app, your engine, and the component dependencies you have.</span></span>

## <a name="common-porting-steps"></a><span data-ttu-id="0276e-124">一般移植步驟</span><span class="sxs-lookup"><span data-stu-id="0276e-124">Common porting steps</span></span>

### <a name="common-step-1-make-sure-you-have-the-right-development-hardware"></a><span data-ttu-id="0276e-125">一般步驟1：確定您有正確的開發硬體</span><span class="sxs-lookup"><span data-stu-id="0276e-125">Common step 1: Make sure you have the right development hardware</span></span>

<span data-ttu-id="0276e-126">[[安裝工具](install-the-tools.md#for-immersive-vr-headset-development)] 頁面會列出建議的開發硬體。</span><span class="sxs-lookup"><span data-stu-id="0276e-126">The [install the tools](install-the-tools.md#for-immersive-vr-headset-development) page lists the recommended development hardware.</span></span>

### <a name="common-step-2-upgrade-to-the-latest-flight-of-windows-10"></a><span data-ttu-id="0276e-127">常見步驟2：升級至最新的 Windows 10 航班</span><span class="sxs-lookup"><span data-stu-id="0276e-127">Common step 2: Upgrade to the latest flight of Windows 10</span></span>

<span data-ttu-id="0276e-128">Windows Mixed Reality 平臺仍在開發中。</span><span class="sxs-lookup"><span data-stu-id="0276e-128">The Windows Mixed Reality platform is still under active development.</span></span> <span data-ttu-id="0276e-129">我們建議您[加入 Windows 測試人員程式](https://insider.windows.com/)，以存取「Windows 測試人員快速」航班。</span><span class="sxs-lookup"><span data-stu-id="0276e-129">We recommend [joining the Windows Insider Program](https://insider.windows.com/) to access the "Windows Insider Fast" flight.</span></span>
1. <span data-ttu-id="0276e-130">安裝[Windows 10 建立者更新](https://www.microsoft.com/software-download/windows10)</span><span class="sxs-lookup"><span data-stu-id="0276e-130">Install the [Windows 10 Creators Update](https://www.microsoft.com/software-download/windows10)</span></span>
2. <span data-ttu-id="0276e-131">[加入](https://insider.windows.com/)Windows 測試人員計畫。</span><span class="sxs-lookup"><span data-stu-id="0276e-131">[Join](https://insider.windows.com/) the Windows Insider Program.</span></span>
3. <span data-ttu-id="0276e-132">啟用[開發人員模式](https://docs.microsoft.com/windows/uwp/get-started/enable-your-device-for-development)</span><span class="sxs-lookup"><span data-stu-id="0276e-132">Enable [Developer Mode](https://docs.microsoft.com/windows/uwp/get-started/enable-your-device-for-development)</span></span>
4. <span data-ttu-id="0276e-133">透過**設定 > 更新 & 安全性區段**，切換至[Windows 測試人員快速航班](https://blogs.technet.microsoft.com/uktechnet/2016/07/01/joining-insider-preview)</span><span class="sxs-lookup"><span data-stu-id="0276e-133">Switch to the [Windows Insider Fast flights](https://blogs.technet.microsoft.com/uktechnet/2016/07/01/joining-insider-preview) through **Settings > Update & Security Section**</span></span>

### <a name="common-step-3-upgrade-to-the-most-recent-build-of-visual-studio-uwp-only"></a><span data-ttu-id="0276e-134">一般步驟3：升級至最新的 Visual Studio 組建（僅限 UWP）</span><span class="sxs-lookup"><span data-stu-id="0276e-134">Common step 3: Upgrade to the most recent build of Visual Studio (UWP only)</span></span>
* <span data-ttu-id="0276e-135">請參閱 Visual Studio 2019 底下[的 [安裝工具](install-the-tools.md#installation-checklist)] 頁面</span><span class="sxs-lookup"><span data-stu-id="0276e-135">See [Install the tools](install-the-tools.md#installation-checklist) page under Visual Studio 2019</span></span>

### <a name="common-step-4-be-ready-for-the-store-uwp-only"></a><span data-ttu-id="0276e-136">一般步驟4：準備好存放區（僅限 UWP）</span><span class="sxs-lookup"><span data-stu-id="0276e-136">Common step 4: Be Ready for The Store (UWP only)</span></span>
* <span data-ttu-id="0276e-137">儘早且經常使用[Windows 應用程式認證套件](https://developer.microsoft.com/windows/develop/app-certification-kit)（也稱為 WACK）！</span><span class="sxs-lookup"><span data-stu-id="0276e-137">Use [Windows App Certification Kit](https://developer.microsoft.com/windows/develop/app-certification-kit) (also known as WACK) early and often!</span></span>
* <span data-ttu-id="0276e-138">使用可[移植性分析器](https://docs.microsoft.com/dotnet/standard/portability-analyzer)（[下載](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer)）</span><span class="sxs-lookup"><span data-stu-id="0276e-138">Use [Portability Analyzer](https://docs.microsoft.com/dotnet/standard/portability-analyzer) ([Download](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer))</span></span>

### <a name="common-step-5-choose-the-correct-adapter"></a><span data-ttu-id="0276e-139">一般步驟5：選擇正確的介面卡</span><span class="sxs-lookup"><span data-stu-id="0276e-139">Common step 5: Choose the correct Adapter</span></span>
* <span data-ttu-id="0276e-140">在具有兩個 Gpu 的筆記本這類系統中，以[正確的介面卡為目標](rendering-in-directx.md#hybrid-graphics-pcs-and-mixed-reality-applications)。</span><span class="sxs-lookup"><span data-stu-id="0276e-140">In systems like notebooks with two GPUs, [target the correct adapter](rendering-in-directx.md#hybrid-graphics-pcs-and-mixed-reality-applications).</span></span> <span data-ttu-id="0276e-141">這適用于 Unity 和原生 DirectX 應用程式，其中會以明確或隱含的方式（媒體基礎）建立 ID3D11Device 以供其功能使用。</span><span class="sxs-lookup"><span data-stu-id="0276e-141">This applies to Unity and native DirectX apps where a ID3D11Device is created, either explicitly or implicitly (Media Foundation), for its functionality.</span></span>

## <a name="unity-porting-guidance"></a><span data-ttu-id="0276e-142">Unity 移植指引</span><span class="sxs-lookup"><span data-stu-id="0276e-142">Unity porting guidance</span></span>

### <a name="unity-step-1-follow-the-common-porting-steps"></a><span data-ttu-id="0276e-143">Unity 步驟1：遵循一般移植步驟</span><span class="sxs-lookup"><span data-stu-id="0276e-143">Unity step 1: Follow the common porting steps</span></span>

<span data-ttu-id="0276e-144">遵循所有的一般步驟。</span><span class="sxs-lookup"><span data-stu-id="0276e-144">Follow all of the common steps.</span></span> <span data-ttu-id="0276e-145">在步驟 #3 中，選取 [**使用 Unity 進行遊戲開發**] 工作負載。</span><span class="sxs-lookup"><span data-stu-id="0276e-145">When in step #3, select the **Game Development with Unity** workload.</span></span> <span data-ttu-id="0276e-146">您可以取消選取 Unity Editor 選擇性元件，因為您將會從下列指示安裝較新版本的 Unity。</span><span class="sxs-lookup"><span data-stu-id="0276e-146">You may deselect the Unity Editor optional component since you'll be installing a newer version of Unity from the instructions below.</span></span>

### <a name="unity-step-2-upgrade-to-the-latest-public-build-of-unity-with-windows-mr-support"></a><span data-ttu-id="0276e-147">Unity 步驟2：使用 Windows MR 支援升級至 Unity 的最新公開組建</span><span class="sxs-lookup"><span data-stu-id="0276e-147">Unity step 2: Upgrade to the latest public build of Unity with Windows MR Support</span></span>
1. <span data-ttu-id="0276e-148">下載 Unity 的最新[建議公用組建](install-the-tools.md)與混合現實支援。</span><span class="sxs-lookup"><span data-stu-id="0276e-148">Download the latest [recommended public build of Unity](install-the-tools.md) with mixed reality support.</span></span>
2. <span data-ttu-id="0276e-149">在開始之前，請先儲存您的專案複本</span><span class="sxs-lookup"><span data-stu-id="0276e-149">Save a copy of your project before you get started</span></span>
3. <span data-ttu-id="0276e-150">請參閱移植上的 Unity 所提供的[檔](https://docs.unity3d.com/Manual/UpgradeGuides.html)。</span><span class="sxs-lookup"><span data-stu-id="0276e-150">Review the [documentation](https://docs.unity3d.com/Manual/UpgradeGuides.html) available from Unity on porting.</span></span>
4. <span data-ttu-id="0276e-151">遵循 Unity 網站上的[指示](https://docs.unity3d.com/Manual/APIUpdater.html)，使用其自動 API 更新程式</span><span class="sxs-lookup"><span data-stu-id="0276e-151">Follow the [instructions](https://docs.unity3d.com/Manual/APIUpdater.html) on Unity's site for using their automatic API updater</span></span>
5. <span data-ttu-id="0276e-152">檢查並查看是否有其他需要進行的變更，以便讓您的專案執行，並處理任何剩餘的錯誤和警告。</span><span class="sxs-lookup"><span data-stu-id="0276e-152">Check and see if there are additional changes that you need to make to get your project running, and work through any remaining errors and warnings.</span></span> 

> [!Note] 
> <span data-ttu-id="0276e-153">如果您有相依的中介軟體，請檢查您使用的是最新版本（以下步驟3中的詳細資料）。</span><span class="sxs-lookup"><span data-stu-id="0276e-153">If you have middleware that you depend on, check that you're using the latest release (more details in step 3 below).</span></span>

### <a name="unity-step-3-upgrade-your-middleware-to-the-latest-versions"></a><span data-ttu-id="0276e-154">Unity 步驟3：將您的中介軟體升級至最新版本</span><span class="sxs-lookup"><span data-stu-id="0276e-154">Unity step 3: Upgrade your middleware to the latest versions</span></span>

<span data-ttu-id="0276e-155">有了任何 Unity 更新，您很有可能需要更新您的遊戲或應用程式所依賴的一個或多個中介軟體套件。</span><span class="sxs-lookup"><span data-stu-id="0276e-155">With any Unity update, there's a good chance that you'll need to update one or more middleware packages that your game or application depends on.</span></span> <span data-ttu-id="0276e-156">此外，最新的中介軟體也會在移植程式的其餘部分中，增加成功的可能性。</span><span class="sxs-lookup"><span data-stu-id="0276e-156">Additionally, being up to date with the latest middleware increases the likelihood of success throughout the rest of the porting process.</span></span> <span data-ttu-id="0276e-157">許多中介軟體套件最近新增了對通用 Windows 平臺（UWP）的支援，而升級至最新版本可讓您運用該工作。</span><span class="sxs-lookup"><span data-stu-id="0276e-157">Many middleware packages have recently added support for Universal Windows Platform (UWP), and upgrading to the most recent versions will let you leverage that work.</span></span>

### <a name="unity-step-4-target-your-application-to-run-on-universal-windows-platform-uwp"></a><span data-ttu-id="0276e-158">Unity 步驟4：將您的應用程式目標設為在通用 Windows 平臺（UWP）上執行</span><span class="sxs-lookup"><span data-stu-id="0276e-158">Unity step 4: Target your application to run on Universal Windows Platform (UWP)</span></span>

<span data-ttu-id="0276e-159">如果您的目標是 Win32，可以略過此步驟並繼續執行步驟5。</span><span class="sxs-lookup"><span data-stu-id="0276e-159">If you're targeting Win32, you can skip this step and continue to step 5.</span></span>

<span data-ttu-id="0276e-160">安裝工具之後，您需要讓應用程式以通用 Windows 應用程式的身分執行。</span><span class="sxs-lookup"><span data-stu-id="0276e-160">After installing the tools, you need to get your app running as a Universal Windows app.</span></span>

* <span data-ttu-id="0276e-161">依照 Unity 提供的[詳細逐步](https://unity3d.com/partners/microsoft/porting-guides)解說逐步解說。</span><span class="sxs-lookup"><span data-stu-id="0276e-161">Follow the [detailed step by step walk through](https://unity3d.com/partners/microsoft/porting-guides) provided by Unity.</span></span> <span data-ttu-id="0276e-162">您應該隨時掌握適用于 Windows MR 的最新 LTS 版本（任何 20xx. 4 版）。</span><span class="sxs-lookup"><span data-stu-id="0276e-162">You should stay on the latest LTS release (any 20xx.4 release) for Windows MR.</span></span>
* <span data-ttu-id="0276e-163">如需更多 UWP 開發資源，請參閱《 [Windows 10 遊戲開發指南》](https://docs.microsoft.com/windows/uwp/gaming/e2e)。</span><span class="sxs-lookup"><span data-stu-id="0276e-163">For more UWP development resources, take a look at the [Windows 10 game development guide](https://docs.microsoft.com/windows/uwp/gaming/e2e).</span></span>

> [!NOTE]
> <span data-ttu-id="0276e-164">Unity 繼續改善 IL2CPP 支援;IL2CPP 可讓某些 UWP 埠變得更容易。</span><span class="sxs-lookup"><span data-stu-id="0276e-164">Unity continues to improve IL2CPP support; IL2CPP makes some UWP ports easier.</span></span> <span data-ttu-id="0276e-165">如果您目前的目標是 .NET 腳本後端，您應該考慮轉換以改用 IL2CPP 後端。</span><span class="sxs-lookup"><span data-stu-id="0276e-165">If you are currently targeting the .NET scripting backend, you should consider converting to leverage the IL2CPP backend instead.</span></span>

* <span data-ttu-id="0276e-166">您可以略過 "Unity step 5"，因為您是以 UWP 為目標，而不是 Win32。</span><span class="sxs-lookup"><span data-stu-id="0276e-166">You can skip "Unity step 5" since you're targeting UWP instead of Win32.</span></span>

> [!NOTE] 
> <span data-ttu-id="0276e-167">如果您的應用程式與裝置特定的服務有任何相依性，例如從串流進行的比對，您必須在此步驟停用它們。</span><span class="sxs-lookup"><span data-stu-id="0276e-167">If your application has any dependencies on device-specific services, such as match making from Steam, you'll need to disable them at this step.</span></span> <span data-ttu-id="0276e-168">您可以連結到 Windows 稍後提供的對等服務。</span><span class="sxs-lookup"><span data-stu-id="0276e-168">You can hook up to the equivalent services that Windows provides later on.</span></span>

### <a name="unity-step-5-target-your-application-to-run-on-win32"></a><span data-ttu-id="0276e-169">Unity 步驟5：將您的應用程式設定為在 Win32 上執行</span><span class="sxs-lookup"><span data-stu-id="0276e-169">Unity step 5: Target your application to run on Win32</span></span>

<span data-ttu-id="0276e-170">從您的 Unity 應用程式內：</span><span class="sxs-lookup"><span data-stu-id="0276e-170">From inside your Unity application:</span></span>

* <span data-ttu-id="0276e-171">流覽至檔案 > 組建設定</span><span class="sxs-lookup"><span data-stu-id="0276e-171">Navigate to File -> Build Settings</span></span>
* <span data-ttu-id="0276e-172">選取 [PC，Mac，Linux 獨立版]</span><span class="sxs-lookup"><span data-stu-id="0276e-172">Select "PC, Mac, Linux Standalone"</span></span>
* <span data-ttu-id="0276e-173">將 [目標平臺] 設定為 [Windows]</span><span class="sxs-lookup"><span data-stu-id="0276e-173">Set target platform to "Windows"</span></span>
* <span data-ttu-id="0276e-174">將 [架構] 設定為 [x86] 選取 [切換平臺]</span><span class="sxs-lookup"><span data-stu-id="0276e-174">Set architecture to "x86" Select "Switch Platform"</span></span>


### <a name="unity-step-6-setup-your-windows-mixed-reality-hardware"></a><span data-ttu-id="0276e-175">Unity 步驟6：設定您的 Windows Mixed Reality 硬體</span><span class="sxs-lookup"><span data-stu-id="0276e-175">Unity step 6: Setup your Windows Mixed Reality hardware</span></span>
1. <span data-ttu-id="0276e-176">流覽[沉浸式耳機設定](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/before-you-start
)中的步驟</span><span class="sxs-lookup"><span data-stu-id="0276e-176">Review steps in [Immersive headset setup](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/before-you-start
)</span></span>
2. <span data-ttu-id="0276e-177">瞭解如何[使用 Windows Mixed reality](using-the-windows-mixed-reality-simulator.md)模擬器，以及如何[流覽 windows mixed reality 首頁](navigating-the-windows-mixed-reality-home.md)</span><span class="sxs-lookup"><span data-stu-id="0276e-177">Learn about [Using the Windows Mixed Reality simulator](using-the-windows-mixed-reality-simulator.md) and [Navigating the Windows Mixed Reality home](navigating-the-windows-mixed-reality-home.md)</span></span>

### <a name="unity-step-7-target-your-application-to-run-on-windows-mixed-reality"></a><span data-ttu-id="0276e-178">Unity 步驟7：將您的應用程式設為目標以在 Windows Mixed Reality 上執行</span><span class="sxs-lookup"><span data-stu-id="0276e-178">Unity step 7: Target your application to run on Windows Mixed Reality</span></span>
1. <span data-ttu-id="0276e-179">首先，您必須移除或有條件地編譯特定 VR SDK 特定的任何其他程式庫支援。</span><span class="sxs-lookup"><span data-stu-id="0276e-179">First, you must remove or conditionally compile out any other library support specific to a particular VR SDK.</span></span> <span data-ttu-id="0276e-180">這些資產通常會以與其他 VR Sdk 不相容的方式來變更專案的設定和屬性，例如 Windows Mixed Reality。</span><span class="sxs-lookup"><span data-stu-id="0276e-180">Those assets frequently change settings and properties on your project in ways that are incompatible with other VR SDKs, such as Windows Mixed Reality.</span></span>
    * <span data-ttu-id="0276e-181">例如，如果您的專案參考 SteamVR SDK，則在匯出 Windows Store 組建目標時，您必須更新您的專案，以排除這些 prefabs 和腳本 API 呼叫。</span><span class="sxs-lookup"><span data-stu-id="0276e-181">For example, if your project references the SteamVR SDK, you'll need to update your project to exclude those prefabs and script API calls when exporting for the Windows Store build target.</span></span>
    * <span data-ttu-id="0276e-182">即將推出其他 VR Sdk 有條件地排除特定步驟。</span><span class="sxs-lookup"><span data-stu-id="0276e-182">Specific steps for conditionally excluding other VR SDKs are coming soon.</span></span>
2. <span data-ttu-id="0276e-183">在您的 Unity 專案中，以[Windows 10 SDK 為目標](holograms-100.md#target-windows-10-sdk)</span><span class="sxs-lookup"><span data-stu-id="0276e-183">In your Unity project, [target the Windows 10 SDK](holograms-100.md#target-windows-10-sdk)</span></span>
3. <span data-ttu-id="0276e-184">針對每個場景，[設定相機](holograms-100.md#chapter-2---setup-the-camera)</span><span class="sxs-lookup"><span data-stu-id="0276e-184">For each scene, [setup the camera](holograms-100.md#chapter-2---setup-the-camera)</span></span>

### <a name="unity-step-8-use-the-stage-to-place-content-on-the-floor"></a><span data-ttu-id="0276e-185">Unity 步驟8：使用階段將內容放置在樓層上</span><span class="sxs-lookup"><span data-stu-id="0276e-185">Unity step 8: Use the stage to place content on the floor</span></span>

<span data-ttu-id="0276e-186">您可以在各式各樣的[經驗調整](coordinate-systems.md)範圍內打造混合現實體驗。</span><span class="sxs-lookup"><span data-stu-id="0276e-186">You can build Mixed Reality experiences across a wide range of [experience scales](coordinate-systems.md).</span></span>

<span data-ttu-id="0276e-187">如果您要移植**固定規模的經驗**，您必須確定 Unity 已設定為**固定**的追蹤空間類型：</span><span class="sxs-lookup"><span data-stu-id="0276e-187">If you're porting a **seated-scale experience**, you must ensure Unity is set to the **Stationary** tracking space type:</span></span>

```cs
XRDevice.SetTrackingSpaceType(TrackingSpaceType.Stationary);
```

<span data-ttu-id="0276e-188">上述程式碼會將 Unity 的全局座標系統設定為追蹤[固定的參考框架](coordinate-systems.md#spatial-coordinate-systems)。</span><span class="sxs-lookup"><span data-stu-id="0276e-188">This above code sets Unity's world coordinate system to track the [stationary frame of reference](coordinate-systems.md#spatial-coordinate-systems).</span></span> <span data-ttu-id="0276e-189">在「固定」追蹤模式中，在應用程式啟動時，位於相機預設位置前方的內容（[轉寄] 為-Z）會出現在使用者的前方。</span><span class="sxs-lookup"><span data-stu-id="0276e-189">In the Stationary tracking mode, content placed in the editor just in front of the camera's default location (forward is -Z) appears in front of the user when the app launches.</span></span> <span data-ttu-id="0276e-190">若要 recenter 使用者的固定來源，您可以呼叫 Unity 的[XR。InputTracking. Recenter](https://docs.unity3d.com/ScriptReference/XR.InputTracking.Recenter.html)方法。</span><span class="sxs-lookup"><span data-stu-id="0276e-190">To recenter the user's seated origin, you can call Unity's [XR.InputTracking.Recenter](https://docs.unity3d.com/ScriptReference/XR.InputTracking.Recenter.html) method.</span></span>

<span data-ttu-id="0276e-191">如果您要移植的是**大規模體驗**或**會議室規模的體驗**，您將會放在與樓層相關的內容。</span><span class="sxs-lookup"><span data-stu-id="0276e-191">If you're porting a **standing-scale experience** or **room-scale experience**, you'll be placing content relative to the floor.</span></span> <span data-ttu-id="0276e-192">您的使用者使用**[空間階段](coordinate-systems.md#spatial-coordinate-systems)**（代表使用者定義的樓層層級原點和選擇性的房間界限），這是您在第一次執行期間設定的原因。</span><span class="sxs-lookup"><span data-stu-id="0276e-192">You reason about the user's floor using the **[spatial stage](coordinate-systems.md#spatial-coordinate-systems)**, which represents the user's defined floor-level origin and optional room boundary, set up during first run.</span></span> <span data-ttu-id="0276e-193">針對這些經驗，您必須確定 Unity 已設定為**RoomScale**追蹤空間類型。</span><span class="sxs-lookup"><span data-stu-id="0276e-193">For these experiences, you must ensure Unity is set to the **RoomScale** tracking space type.</span></span> <span data-ttu-id="0276e-194">雖然 RoomScale 是預設值，但您會想要明確設定並確保您得到 true，以攔截使用者已將其電腦從其校正的房間中移出的情況：</span><span class="sxs-lookup"><span data-stu-id="0276e-194">While RoomScale is the default, you'll want to set it explicitly and ensure you get back true, to catch situations where the user has moved their computer away from the room they calibrated:</span></span>

```cs
if (XRDevice.SetTrackingSpaceType(TrackingSpaceType.RoomScale))
{
    // RoomScale mode was set successfully.  App can now assume that y=0 in Unity world coordinate represents the floor.
}
else
{
    // RoomScale mode was not set successfully.  App cannot make assumptions about where the floor plane is.
}
```

<span data-ttu-id="0276e-195">一旦您的應用程式成功設定 RoomScale 追蹤空間類型，放置在 y = 0 平面上的內容就會出現在樓層上。</span><span class="sxs-lookup"><span data-stu-id="0276e-195">Once your app successfully sets the RoomScale tracking space type, content placed on the y=0 plane will appear on the floor.</span></span> <span data-ttu-id="0276e-196">位於（0，0，0）的原點會是在室內設定期間使用者勇敢面對考驗的特定位置，其中-Z 代表在安裝期間所面臨的正向方向。</span><span class="sxs-lookup"><span data-stu-id="0276e-196">The origin at (0, 0, 0) will be the specific place on the floor where the user stood during room setup, with -Z representing the forward direction they were facing during setup.</span></span>

<span data-ttu-id="0276e-197">在腳本程式碼中，您可以在上呼叫 TryGetGeometry 方法，以取得界限多邊形，並指定 TrackedArea 的界限類型。</span><span class="sxs-lookup"><span data-stu-id="0276e-197">In script code, you can then call the TryGetGeometry method on you're the UnityEngine.Experimental.XR.Boundary type to get a boundary polygon, specifying a boundary type of TrackedArea.</span></span> <span data-ttu-id="0276e-198">如果使用者定義界限（您會取得頂點清單），則可安全地為使用者提供**會議室規模的體驗**，讓他們可以在其中四處流覽您建立的場景。</span><span class="sxs-lookup"><span data-stu-id="0276e-198">If the user defined a boundary (you get back a list of vertices), it's safe to deliver a **room-scale experience** to the user, where they can walk around the scene you create.</span></span>

<span data-ttu-id="0276e-199">系統會在使用者進行方法時，自動呈現界限。</span><span class="sxs-lookup"><span data-stu-id="0276e-199">The system will automatically render the boundary when the user approaches it.</span></span> <span data-ttu-id="0276e-200">您的應用程式不需要使用此多邊形來呈現界限本身。</span><span class="sxs-lookup"><span data-stu-id="0276e-200">Your app does not need to use this polygon to render the boundary itself.</span></span>

<span data-ttu-id="0276e-201">如需詳細資訊，請參閱在[Unity 中協調系統](coordinate-systems-in-unity.md)頁面。</span><span class="sxs-lookup"><span data-stu-id="0276e-201">For more information, see the [Coordinate systems in Unity](coordinate-systems-in-unity.md) page.</span></span>

<span data-ttu-id="0276e-202">有些應用程式會使用矩形來限制其互動。</span><span class="sxs-lookup"><span data-stu-id="0276e-202">Some applications use a rectangle to constrain their interaction.</span></span> <span data-ttu-id="0276e-203">UWP API 或 Unity 中不直接支援抓取最大的矩形。</span><span class="sxs-lookup"><span data-stu-id="0276e-203">Retrieving the largest inscribed rectangle is not directly supported in the UWP API or Unity.</span></span> <span data-ttu-id="0276e-204">以下連結的範例程式碼顯示如何在追蹤界限內尋找矩形。</span><span class="sxs-lookup"><span data-stu-id="0276e-204">The example code linked to below shows how to find a rectangle within the traced bounds.</span></span> <span data-ttu-id="0276e-205">它是以啟發學習法為基礎，因此可能找不到最佳的解決方案，不過結果會與預期一致。</span><span class="sxs-lookup"><span data-stu-id="0276e-205">It's heuristic-based so may not find the optimal solution, however, results are consistent with expectations.</span></span> <span data-ttu-id="0276e-206">演算法中的參數可以微調，以在處理時間的成本中尋找更精確的結果。</span><span class="sxs-lookup"><span data-stu-id="0276e-206">Parameters in the algorithm can be tuned to find more precise results at the cost of processing time.</span></span> <span data-ttu-id="0276e-207">此演算法是使用 Unity 的 5.6 preview MRTP 版本之混合現實工具組的分叉。</span><span class="sxs-lookup"><span data-stu-id="0276e-207">The algorithm is in a fork of the Mixed Reality Toolkit that uses the 5.6 preview MRTP version of Unity.</span></span> <span data-ttu-id="0276e-208">這不是公開提供。</span><span class="sxs-lookup"><span data-stu-id="0276e-208">This isn't publicly available.</span></span> <span data-ttu-id="0276e-209">程式碼應該可以直接在2017.2 和更新版本的 Unity 中使用。</span><span class="sxs-lookup"><span data-stu-id="0276e-209">The code should be directly usable in 2017.2 and higher versions of Unity.</span></span> <span data-ttu-id="0276e-210">程式碼將會在不久的將來移植到目前的 MRTK。</span><span class="sxs-lookup"><span data-stu-id="0276e-210">The code will be ported to the current MRTK in the near future.</span></span>

<span data-ttu-id="0276e-211">[GitHub 上的程式碼 zip](https://github.com/KevinKennedy/MixedRealityToolkit-Unity/releases/tag/5.6.MRTP20)檔案重要檔案：</span><span class="sxs-lookup"><span data-stu-id="0276e-211">[zip file of code on GitHub](https://github.com/KevinKennedy/MixedRealityToolkit-Unity/releases/tag/5.6.MRTP20) Important files:</span></span>
* <span data-ttu-id="0276e-212">資產/HoloToolkit/階段/腳本/StageManager .cs-使用方式的範例</span><span class="sxs-lookup"><span data-stu-id="0276e-212">Assets/HoloToolkit/Stage/Scripts/StageManager.cs - example of usage</span></span>
* <span data-ttu-id="0276e-213">資產/HoloToolkit/階段/腳本/LargestRectangle .cs-演算法的執行</span><span class="sxs-lookup"><span data-stu-id="0276e-213">Assets/HoloToolkit/Stage/Scripts/LargestRectangle.cs - implementation of the algorithm</span></span>
* <span data-ttu-id="0276e-214">資產/HoloToolkit-Run-unittests/Editor/Stage/LargestRectangleTest-演算法的簡單測試</span><span class="sxs-lookup"><span data-stu-id="0276e-214">Assets/HoloToolkit-UnitTests/Editor/Stage/LargestRectangleTest.cs - trivial test of the algorithm</span></span>

<span data-ttu-id="0276e-215">結果的範例：</span><span class="sxs-lookup"><span data-stu-id="0276e-215">Example of results:</span></span>

![結果的範例](images/largestrectangle-400px.jpg)

<span data-ttu-id="0276e-217">演算法是以 Daniel Smilkov：[多邊形中的最大矩形](https://d3plus.org/blog/behind-the-scenes/2014/07/08/largest-rect/)為基礎的 blog</span><span class="sxs-lookup"><span data-stu-id="0276e-217">Algorithm is based on a blog by Daniel Smilkov: [Largest rectangle in a polygon](https://d3plus.org/blog/behind-the-scenes/2014/07/08/largest-rect/)</span></span>

### <a name="unity-step-9-work-through-your-input-model"></a><span data-ttu-id="0276e-218">Unity 步驟9：逐步執行您的輸入模型</span><span class="sxs-lookup"><span data-stu-id="0276e-218">Unity step 9: Work through your input model</span></span>

<span data-ttu-id="0276e-219">以現有 HMD 為目標的每個遊戲或應用程式將會有一組其處理的輸入、體驗所需的輸入類型，以及它所呼叫以取得這些輸入的特定 Api。</span><span class="sxs-lookup"><span data-stu-id="0276e-219">Each game or application targeting an existing HMD will have a set of inputs that it handles, types of inputs that it needs for the experience, and specific APIs that it calls to get those inputs.</span></span> <span data-ttu-id="0276e-220">我們致力於嘗試讓它盡可能簡單明瞭，以利用 Windows Mixed Reality 提供的輸入。</span><span class="sxs-lookup"><span data-stu-id="0276e-220">We've invested in trying to make it as simple and straightforward as possible to take advantage of the inputs available in Windows Mixed Reality.</span></span>
1. <span data-ttu-id="0276e-221">請仔細閱讀**[適用于 Unity 的輸入移植指南](input-porting-guide-for-unity.md)**，以取得有關 Windows Mixed Reality 如何公開輸入的詳細資訊，以及如何對應至您的應用程式目前所能執行的工作。</span><span class="sxs-lookup"><span data-stu-id="0276e-221">Read through the **[Input porting guide for Unity](input-porting-guide-for-unity.md)** for details of how Windows Mixed Reality exposes input, and how that maps to what your application may do today.</span></span>
2. <span data-ttu-id="0276e-222">選擇您要利用 Unity 的跨 VR-SDK 輸入 API，或 MR 特定的輸入 API。</span><span class="sxs-lookup"><span data-stu-id="0276e-222">Choose whether you're going to leverage Unity's cross-VR-SDK input API, or the MR-specific input API.</span></span> <span data-ttu-id="0276e-223">Unity VR 應用程式現在會使用一般的 GetButton/GetAxis Api 來進行[oculus go 輸入](https://docs.unity3d.com/Manual/OculusControllers.html)和[OpenVR 輸入](https://docs.unity3d.com/Manual/OpenVRControllers.html)。</span><span class="sxs-lookup"><span data-stu-id="0276e-223">The general Input.GetButton/Input.GetAxis APIs are used by Unity VR apps today for [Oculus input](https://docs.unity3d.com/Manual/OculusControllers.html) and [OpenVR input](https://docs.unity3d.com/Manual/OpenVRControllers.html).</span></span> <span data-ttu-id="0276e-224">如果您的應用程式已經使用這些適用于動作控制器的 Api，這是最簡單的路徑，您應該只需要在輸入管理員中重新對應按鈕和軸。</span><span class="sxs-lookup"><span data-stu-id="0276e-224">If your apps are already using these APIs for motion controllers, this is the easiest path - you should just need to remap buttons and axes in the Input Manager.</span></span>
    * <span data-ttu-id="0276e-225">您可以使用一般的跨 VR-SDK 輸入來存取 Unity 中的動作控制器資料。 GetButton/GetAxis Api 或 MR 專屬的 UnityEngine. XR。輸入 Api。</span><span class="sxs-lookup"><span data-stu-id="0276e-225">You can access motion controller data in Unity using either the general cross-VR-SDK Input.GetButton/Input.GetAxis APIs or the MR-specific UnityEngine.XR.WSA.Input APIs.</span></span> <span data-ttu-id="0276e-226">（之前在 Unity 5.6 中的 UnityEngine. XR 命名空間）</span><span class="sxs-lookup"><span data-stu-id="0276e-226">(previously in the UnityEngine.XR.WSA.Input namespace in Unity 5.6)</span></span>
    * <span data-ttu-id="0276e-227">請參閱結合遊戲台和動作控制器的[工具組中的範例](https://github.com/Microsoft/HoloToolkit-Unity/pull/572)。</span><span class="sxs-lookup"><span data-stu-id="0276e-227">See the [example in Toolkit](https://github.com/Microsoft/HoloToolkit-Unity/pull/572) that combines gamepad and motion controllers.</span></span>

### <a name="unity-step-10-performance-testing-and-tuning"></a><span data-ttu-id="0276e-228">Unity 步驟10：效能測試和微調</span><span class="sxs-lookup"><span data-stu-id="0276e-228">Unity step 10: Performance testing and tuning</span></span>

<span data-ttu-id="0276e-229">Windows Mixed Reality 會在廣泛的裝置上提供，範圍從高階遊戲電腦到廣泛的市場主流電腦。</span><span class="sxs-lookup"><span data-stu-id="0276e-229">Windows Mixed Reality will be available on a broad class of devices, ranging from high end gaming PCs, down to broad market mainstream PCs.</span></span> <span data-ttu-id="0276e-230">根據您的目標市場，您的應用程式可用的計算和圖形預算會有顯著的差異。</span><span class="sxs-lookup"><span data-stu-id="0276e-230">Depending on what market you're targeting, there's a significant difference in the available compute and graphics budgets for your application.</span></span> <span data-ttu-id="0276e-231">在此移植練習中，您很可能會利用高階電腦，而且您的應用程式可以使用大量的計算和圖形預算。</span><span class="sxs-lookup"><span data-stu-id="0276e-231">During this porting exercise, you're likely leveraging a premium PC, and have had significant compute and graphics budgets available to your app.</span></span> <span data-ttu-id="0276e-232">如果您想要讓您的應用程式可供更多物件使用，您應該在[想要作為目標的代表性硬體](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines)上測試和分析應用程式。</span><span class="sxs-lookup"><span data-stu-id="0276e-232">If you wish to make your app available to a broader audience, you should test and profile your app on [the representative hardware that you wish to target](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines).</span></span>

<span data-ttu-id="0276e-233">[Unity](https://docs.unity3d.com/Manual/Profiler.html)和[Visual Studio](https://docs.microsoft.com/visualstudio/profiling/index)都包含效能分析工具，以及[Microsoft](understanding-performance-for-mixed-reality.md)和[Intel](https://software.intel.com/articles/vr-content-developer-guide)都發佈有關效能分析和優化的指導方針。</span><span class="sxs-lookup"><span data-stu-id="0276e-233">Both [Unity](https://docs.unity3d.com/Manual/Profiler.html) and [Visual Studio](https://docs.microsoft.com/visualstudio/profiling/index) include performance profilers, and both [Microsoft](understanding-performance-for-mixed-reality.md) and [Intel](https://software.intel.com/articles/vr-content-developer-guide) publish guidelines on performance profiling and optimization.</span></span> <span data-ttu-id="0276e-234">在[瞭解混合現實的效能](understanding-performance-for-mixed-reality.md)方面，有廣泛的效能討論。</span><span class="sxs-lookup"><span data-stu-id="0276e-234">There's an extensive discussion of performance available at [Understanding Performance for Mixed Reality](understanding-performance-for-mixed-reality.md).</span></span> <span data-ttu-id="0276e-235">此外，unity 的[效能建議](performance-recommendations-for-unity.md)下還有 unity 的特定詳細資料。</span><span class="sxs-lookup"><span data-stu-id="0276e-235">Further, there are specific details for Unity under [Performance Recommendations for Unity](performance-recommendations-for-unity.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="0276e-236">另請參閱</span><span class="sxs-lookup"><span data-stu-id="0276e-236">See also</span></span>
* [<span data-ttu-id="0276e-237">Unity 的輸入移植指南</span><span class="sxs-lookup"><span data-stu-id="0276e-237">Input porting guide for Unity</span></span>](input-porting-guide-for-unity.md)
* [<span data-ttu-id="0276e-238">Windows Mixed Reality 最低電腦硬體相容性指導方針</span><span class="sxs-lookup"><span data-stu-id="0276e-238">Windows Mixed Reality minimum PC hardware compatibility guidelines</span></span>](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines)
* [<span data-ttu-id="0276e-239">瞭解混合現實的效能</span><span class="sxs-lookup"><span data-stu-id="0276e-239">Understanding Performance for Mixed Reality</span></span>](understanding-performance-for-mixed-reality.md)
* [<span data-ttu-id="0276e-240">Unity 的效能建議</span><span class="sxs-lookup"><span data-stu-id="0276e-240">Performance Recommendations for Unity</span></span>](performance-recommendations-for-unity.md)
* [<span data-ttu-id="0276e-241">將 Xbox Live 支援新增至適用于 UWP 的 Unity</span><span class="sxs-lookup"><span data-stu-id="0276e-241">Add Xbox Live support to Unity for UWP</span></span>](https://docs.microsoft.com/windows/uwp/xbox-live/get-started-with-partner/partner-add-xbox-live-to-unity-uwp)
