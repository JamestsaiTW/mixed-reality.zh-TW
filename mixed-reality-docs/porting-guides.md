---
title: 移植指南
description: 逐步解說會逐步解說說明如何將現有的沈浸式應用程式到 Windows 混和實境移植。
author: ChimeraScorn
ms.author: cwhite
ms.date: 10/02/2018
ms.topic: article
keywords: 連接埠、 移轉、 unity、 中介軟體引擎，UWP
ms.openlocfilehash: a4a8c78f1c45fd8e3b85a767d139bae9f67540e0
ms.sourcegitcommit: 384b0087899cd835a3a965f75c6f6c607c9edd1b
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/12/2019
ms.locfileid: "59595360"
---
# <a name="porting-guides"></a><span data-ttu-id="5568c-104">移植指南</span><span class="sxs-lookup"><span data-stu-id="5568c-104">Porting guides</span></span>

> [!NOTE]
> <span data-ttu-id="5568c-105">HoloLens 2 的特定的詳細指引[即將推出](index.md#news-and-notes)。</span><span class="sxs-lookup"><span data-stu-id="5568c-105">More guidance specific to HoloLens 2 [coming soon](index.md#news-and-notes).</span></span>

<span data-ttu-id="5568c-106">Windows 10 直接包含如耳機沈浸式和全像攝影版的支援。</span><span class="sxs-lookup"><span data-stu-id="5568c-106">Windows 10 includes support for immersive and holographic headsets directly.</span></span> <span data-ttu-id="5568c-107">如果您已建立的另一部裝置，例如 Oculus Rift 或 HTC Vive 內容，這些會對相依性存在上述作業系統的平台 API 的程式庫。</span><span class="sxs-lookup"><span data-stu-id="5568c-107">If you have built content for another device such as the Oculus Rift or HTC Vive, these have dependencies on libraries that exist above the operating system's platform API.</span></span> <span data-ttu-id="5568c-108">到 Windows 混和實境帶現有內容涉及重定目標的 Windows api 的這些其他 Sdk 的使用方式。</span><span class="sxs-lookup"><span data-stu-id="5568c-108">Bringing existing content over to Windows Mixed Reality involves retargeting usage of these other SDKs to the Windows APIs.</span></span> <span data-ttu-id="5568c-109">[Windows 平台 Api 的混合實境](https://docs.microsoft.com/uwp/api/Windows.Perception)只能在通用 Windows 平台 (UWP) 應用程式模型中運作。</span><span class="sxs-lookup"><span data-stu-id="5568c-109">The [Windows platform APIs for mixed reality](https://docs.microsoft.com/uwp/api/Windows.Perception) only work in the Universal Windows Platform (UWP) app model.</span></span> <span data-ttu-id="5568c-110">因此如果您的應用程式已建置適用於 UWP，移植到 UWP 會移轉體驗的一部分。</span><span class="sxs-lookup"><span data-stu-id="5568c-110">So if your app is not already built for UWP, porting to UWP will be part of the porting experience.</span></span>

## <a name="porting-overview"></a><span data-ttu-id="5568c-111">移轉概觀</span><span class="sxs-lookup"><span data-stu-id="5568c-111">Porting overview</span></span>

<span data-ttu-id="5568c-112">概括來說，這些是移植現有內容所需的步驟：</span><span class="sxs-lookup"><span data-stu-id="5568c-112">At a high-level, these are the steps involved in porting existing content:</span></span>
1. <span data-ttu-id="5568c-113">**請確定您的電腦執行 Windows 10 Fall Creators Update (16299)。**</span><span class="sxs-lookup"><span data-stu-id="5568c-113">**Make sure your PC is running the Windows 10 Fall Creators Update (16299).**</span></span> <span data-ttu-id="5568c-114">我們不再建議接收預覽，從繼續 Insider 略過更新響鈴，建置這些組建不會是最穩定的混合的實境開發。</span><span class="sxs-lookup"><span data-stu-id="5568c-114">We no longer recommend receiving preview builds from the Insider Skip Ahead ring, as those builds won't be the most stable for mixed reality development.</span></span>
2. <span data-ttu-id="5568c-115">**升級至最新版的圖形或遊戲引擎。**</span><span class="sxs-lookup"><span data-stu-id="5568c-115">**Upgrade to the latest version of your graphics or game engine.**</span></span> <span data-ttu-id="5568c-116">遊戲引擎必須支援 Windows 10 SDK （2017 年 4 月發行） 的 10.0.15063.0 版或更高版本。</span><span class="sxs-lookup"><span data-stu-id="5568c-116">Game engines will need to support the Windows 10 SDK version 10.0.15063.0 (released in April 2017) or higher.</span></span>
3. <span data-ttu-id="5568c-117">**升級任何中介軟體、 外掛程式或元件。**</span><span class="sxs-lookup"><span data-stu-id="5568c-117">**Upgrade any middleware, plug-ins or components.**</span></span> <span data-ttu-id="5568c-118">如果您的應用程式包含的任何元件，它會是個不錯的主意，升級至最新版本。</span><span class="sxs-lookup"><span data-stu-id="5568c-118">If your app contains any components, it's a good idea to upgrade to the latest version.</span></span> <span data-ttu-id="5568c-119">較新版本的最常見的外掛程式有適用於 UWP 的支援。</span><span class="sxs-lookup"><span data-stu-id="5568c-119">Newer versions of most common plug-ins have support for UWP.</span></span>
4. <span data-ttu-id="5568c-120">**移除重複的 sdk 的相依性**。</span><span class="sxs-lookup"><span data-stu-id="5568c-120">**Remove dependencies on duplicate SDKs**.</span></span> <span data-ttu-id="5568c-121">根據您的內容的目標的裝置，您將需要移除，或有條件地編譯出該 SDK (例如 SteamVR) 讓您可以改為目標的 Windows Api。</span><span class="sxs-lookup"><span data-stu-id="5568c-121">Depending on which device your content was targeting, you'll need to remove or conditionally compile out that SDK (e.g. SteamVR) so you can target the Windows APIs instead.</span></span>
5. <span data-ttu-id="5568c-122">**逐步建立問題。**</span><span class="sxs-lookup"><span data-stu-id="5568c-122">**Work through build issues.**</span></span> <span data-ttu-id="5568c-123">此時，移植練習旨在說明您的應用程式、 您的引擎和您擁有的元件相依性。</span><span class="sxs-lookup"><span data-stu-id="5568c-123">At this point, the porting exercise is specific to your app, your engine, and the component dependencies you have.</span></span>

## <a name="common-porting-steps"></a><span data-ttu-id="5568c-124">常見的移轉步驟</span><span class="sxs-lookup"><span data-stu-id="5568c-124">Common porting steps</span></span>

### <a name="common-step-1-make-sure-you-have-the-right-development-hardware"></a><span data-ttu-id="5568c-125">常見的步驟 1:請確定您有正確的開發硬體</span><span class="sxs-lookup"><span data-stu-id="5568c-125">Common step 1: Make sure you have the right development hardware</span></span>

<span data-ttu-id="5568c-126">[安裝工具](install-the-tools.md#for-immersive-vr-headset-development)頁面會列出建議的開發硬體。</span><span class="sxs-lookup"><span data-stu-id="5568c-126">The [install the tools](install-the-tools.md#for-immersive-vr-headset-development) page lists the recommended development hardware.</span></span>

### <a name="common-step-2-upgrade-to-the-latest-flight-of-windows-10"></a><span data-ttu-id="5568c-127">常見的步驟 2:升級至 Windows 10 最新的航班</span><span class="sxs-lookup"><span data-stu-id="5568c-127">Common step 2: Upgrade to the latest flight of Windows 10</span></span>

<span data-ttu-id="5568c-128">Windows Mixed Reality 平台仍在進行開發，而若要最有效，但建議您在 「 Windows 測試人員快速 「 班機。</span><span class="sxs-lookup"><span data-stu-id="5568c-128">The Windows Mixed Reality platform is still under active development, and to be most effective, we recommend being on the "Windows Insider Fast" flight.</span></span> <span data-ttu-id="5568c-129">若要存取 windows 航班，您必須[加入 Windows Insider 計劃](https://insider.windows.com/)。</span><span class="sxs-lookup"><span data-stu-id="5568c-129">In order to have access to windows flights, you will need to [join the Windows Insider Program](https://insider.windows.com/).</span></span>
1. <span data-ttu-id="5568c-130">安裝[Windows 10 Creators Update](https://www.microsoft.com/software-download/windows10)</span><span class="sxs-lookup"><span data-stu-id="5568c-130">Install the [Windows 10 Creators Update](https://www.microsoft.com/software-download/windows10)</span></span>
2. <span data-ttu-id="5568c-131">[加入](https://insider.windows.com/)Windows Insider 計劃。</span><span class="sxs-lookup"><span data-stu-id="5568c-131">[Join](https://insider.windows.com/) the Windows Insider Program.</span></span>
3. <span data-ttu-id="5568c-132">啟用[開發人員模式](https://docs.microsoft.com/windows/uwp/get-started/enable-your-device-for-development)</span><span class="sxs-lookup"><span data-stu-id="5568c-132">Enable [Developer Mode](https://docs.microsoft.com/windows/uwp/get-started/enable-your-device-for-development)</span></span>
4. <span data-ttu-id="5568c-133">切換至[快速 Windows Insider 航班](https://blogs.technet.microsoft.com/uktechnet/2016/07/01/joining-insider-preview)透過設定--> 更新與安全性 > 一節</span><span class="sxs-lookup"><span data-stu-id="5568c-133">Switch to the [Windows Insider Fast flights](https://blogs.technet.microsoft.com/uktechnet/2016/07/01/joining-insider-preview) through Settings --> Update & Security Section</span></span>

### <a name="common-step-3-upgrade-to-the-most-recent-build-of-visual-studio"></a><span data-ttu-id="5568c-134">常見的步驟 3:升級至 Visual Studio 的最新的組建</span><span class="sxs-lookup"><span data-stu-id="5568c-134">Common step 3: Upgrade to the most recent build of Visual Studio</span></span>
* <span data-ttu-id="5568c-135">請參閱[安裝工具](install-the-tools.md#installation-checklist)頁面的 Visual Studio 2017 下</span><span class="sxs-lookup"><span data-stu-id="5568c-135">Please see [Install the tools](install-the-tools.md#installation-checklist) page under Visual Studio 2017</span></span>

### <a name="common-step-4-be-ready-for-the-store"></a><span data-ttu-id="5568c-136">常見的步驟 4:準備好供存放區</span><span class="sxs-lookup"><span data-stu-id="5568c-136">Common step 4: Be Ready for The Store</span></span>
* <span data-ttu-id="5568c-137">使用[Windows 應用程式認證套件](https://developer.microsoft.com/windows/develop/app-certification-kit)(也稱為 WACK) 及早且經常 ！</span><span class="sxs-lookup"><span data-stu-id="5568c-137">Use [Windows App Certification Kit](https://developer.microsoft.com/windows/develop/app-certification-kit) (aka WACK) early and often!</span></span>
* <span data-ttu-id="5568c-138">使用[Portability Analyzer](https://docs.microsoft.com/dotnet/standard/portability-analyzer) ([下載](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer))</span><span class="sxs-lookup"><span data-stu-id="5568c-138">Use [Portability Analyzer](https://docs.microsoft.com/dotnet/standard/portability-analyzer) ([Download](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer))</span></span>

### <a name="common-step-5-choose-the-correct-adapter"></a><span data-ttu-id="5568c-139">常見的步驟 5:選擇正確的配接器</span><span class="sxs-lookup"><span data-stu-id="5568c-139">Common step 5: Choose the correct Adapter</span></span>
* <span data-ttu-id="5568c-140">使用兩個 Gpu，notebook 等系統中[為目標的正確介面卡](rendering-in-directx.md#hybrid-graphics-pcs-and-mixed-reality-applications)。</span><span class="sxs-lookup"><span data-stu-id="5568c-140">In systems like notebooks with two GPUs, [target the correct adapter](rendering-in-directx.md#hybrid-graphics-pcs-and-mixed-reality-applications).</span></span> <span data-ttu-id="5568c-141">這適用於 Unity 應用程式，除了原生的 DirectX 應用程式，其中 ID3D11Device 建立時，明確或隱含 （媒體基礎），其功能。</span><span class="sxs-lookup"><span data-stu-id="5568c-141">This applies to Unity apps, in addition to native DirectX apps, where a ID3D11Device is created, either explicitly or implicitly (Media Foundation), for its functionality.</span></span>

## <a name="unity-porting-guidance"></a><span data-ttu-id="5568c-142">Unity 移植指引</span><span class="sxs-lookup"><span data-stu-id="5568c-142">Unity porting guidance</span></span>

### <a name="unity-step-1-follow-the-common-porting-steps"></a><span data-ttu-id="5568c-143">Unity 步驟 1:請遵循常見的移轉步驟</span><span class="sxs-lookup"><span data-stu-id="5568c-143">Unity step 1: Follow the common porting steps</span></span>

<span data-ttu-id="5568c-144">請遵循所有的一般步驟。</span><span class="sxs-lookup"><span data-stu-id="5568c-144">Follow all of the common steps.</span></span> <span data-ttu-id="5568c-145">在 步驟 #3 中，選取**使用 Unity 進行遊戲開發**工作負載。</span><span class="sxs-lookup"><span data-stu-id="5568c-145">When in step #3, select the **Game Development with Unity** workload.</span></span> <span data-ttu-id="5568c-146">因為您將從下面的指示安裝 Unity 的較新版本，您可能會取消選取 Unity 編輯器的選擇性元件。</span><span class="sxs-lookup"><span data-stu-id="5568c-146">You may deselect the Unity Editor optional component since you'll be installing a newer version of Unity from the instructions below.</span></span>

### <a name="unity-step-2-upgrade-to-the-latest-public-build-of-unity-with-windows-mr-support"></a><span data-ttu-id="5568c-147">Unity 步驟 2:升級至最新的公用組建的 Windows MR 支援 Unity</span><span class="sxs-lookup"><span data-stu-id="5568c-147">Unity step 2: Upgrade to the latest public build of Unity with Windows MR Support</span></span>
1. <span data-ttu-id="5568c-148">下載最新[建議的 Unity 的公用組建](install-the-tools.md)混合實境支援。</span><span class="sxs-lookup"><span data-stu-id="5568c-148">Download the latest [recommended public build of Unity](install-the-tools.md) with mixed reality support.</span></span>
2. <span data-ttu-id="5568c-149">在開始之前，儲存一份您的專案</span><span class="sxs-lookup"><span data-stu-id="5568c-149">Save a copy of your project before you get started</span></span>
3. <span data-ttu-id="5568c-150">檢閱[文件](https://docs.unity3d.com/Manual/UpgradeGuides.html)用於從 Unity 移植。</span><span class="sxs-lookup"><span data-stu-id="5568c-150">Review the [documentation](https://docs.unity3d.com/Manual/UpgradeGuides.html) available from Unity on porting.</span></span>
4. <span data-ttu-id="5568c-151">請遵循[指示](https://docs.unity3d.com/Manual/APIUpdater.html)Unity 的網站使用其自動 API 更新程式</span><span class="sxs-lookup"><span data-stu-id="5568c-151">Follow the [instructions](https://docs.unity3d.com/Manual/APIUpdater.html) on Unity's site for using their automatic API updater</span></span>
5. <span data-ttu-id="5568c-152">檢查並查看是否有其他變更，您必須先取得您的專案執行，並透過任何剩餘的錯誤和警告。</span><span class="sxs-lookup"><span data-stu-id="5568c-152">Check and see if there are additional changes that you need to make to get your project running, and work through any remaining errors and warnings.</span></span> <span data-ttu-id="5568c-153">注意：如果您依賴的中介軟體，您可能需要更新開始 （在下面的步驟 3 的詳細資料） 的中介軟體。</span><span class="sxs-lookup"><span data-stu-id="5568c-153">Note: If you have middleware that you depend on, you may need to update that middleware to get going (more details in step 3 below).</span></span>

### <a name="unity-step-3-upgrade-your-middleware-to-the-latest-versions"></a><span data-ttu-id="5568c-154">Unity 步驟 3:升級至最新版本的中介軟體</span><span class="sxs-lookup"><span data-stu-id="5568c-154">Unity step 3: Upgrade your middleware to the latest versions</span></span>

<span data-ttu-id="5568c-155">使用任何 Unity 更新時，沒有您需要更新您的遊戲或應用程式相依於一或多個中介軟體封裝的機會。</span><span class="sxs-lookup"><span data-stu-id="5568c-155">With any Unity update, there is a good chance that you need to update one or more middleware packages that your game or application depends on.</span></span> <span data-ttu-id="5568c-156">此外，所有中介軟體的最新版本會增加您的移轉程序的其餘部分成功的可能性。</span><span class="sxs-lookup"><span data-stu-id="5568c-156">Additionally, being on the latest version of all of your middleware will increase your likelihood of success throughout the rest of the porting process.</span></span> <span data-ttu-id="5568c-157">許多中介軟體封裝最近已新增支援適用於通用 Windows 平台 (UWP)，並升級至最新版本可讓您運用這項工作。</span><span class="sxs-lookup"><span data-stu-id="5568c-157">Many middleware packages have recently added support for Universal Windows Platform (UWP), and upgrading to the most recent versions will let you leverage that work.</span></span>

### <a name="unity-step-4-target-your-application-to-run-on-universal-windows-platform-uwp"></a><span data-ttu-id="5568c-158">Unity 步驟 4:目標執行通用 Windows 平台 (UWP) 應用程式</span><span class="sxs-lookup"><span data-stu-id="5568c-158">Unity step 4: Target your application to run on Universal Windows Platform (UWP)</span></span>

<span data-ttu-id="5568c-159">在之後安裝工具，您需要取得做為通用 Windows 應用程式執行的應用程式。</span><span class="sxs-lookup"><span data-stu-id="5568c-159">After installing the tools, you need to get your app running as a Universal Windows app.</span></span>
* <span data-ttu-id="5568c-160">請遵循[詳細的逐步解說逐步解說](https://unity3d.com/partners/microsoft/porting-guides)Unity 所提供。</span><span class="sxs-lookup"><span data-stu-id="5568c-160">Follow the [detailed step by step walk through](https://unity3d.com/partners/microsoft/porting-guides) provided by Unity.</span></span> <span data-ttu-id="5568c-161">請注意，您應該持續在最新 LTS 版本 （任何 20xx.4 發行） 的 Windows MR 上。</span><span class="sxs-lookup"><span data-stu-id="5568c-161">Please note that you should stay on the latest LTS release (any 20xx.4 release) for Windows MR.</span></span>
* <span data-ttu-id="5568c-162">如需更多的 UWP 開發資源，看看[Windows 10 遊戲開發指南](https://docs.microsoft.com/windows/uwp/gaming/e2e)。</span><span class="sxs-lookup"><span data-stu-id="5568c-162">For more UWP development resources, take a look at the [Windows 10 game development guide](https://docs.microsoft.com/windows/uwp/gaming/e2e).</span></span>
* <span data-ttu-id="5568c-163">請注意，Unity 會持續改善 IL2CPP 支援;IL2CPP 讓某些 UWP 連接埠大幅簡化。</span><span class="sxs-lookup"><span data-stu-id="5568c-163">Please note that Unity continues to improve IL2CPP support; IL2CPP makes some UWP ports significantly easier.</span></span> <span data-ttu-id="5568c-164">如果您目前的目標.Net 後端的指令碼，您應該考慮將轉換成改為利用 IL2CPP 後端。</span><span class="sxs-lookup"><span data-stu-id="5568c-164">If you are currently targeting the .Net scripting backend, you should consider converting to leverage the IL2CPP backend instead.</span></span>

<span data-ttu-id="5568c-165">注意：如果您的應用程式會具有任何相依性的裝置特定的服務，例如相符項目從資料流，您必須停用它們在此步驟。</span><span class="sxs-lookup"><span data-stu-id="5568c-165">Note: If your application has any dependencies on device specific services, such as match making from Steam, you will need to disable them at this step.</span></span> <span data-ttu-id="5568c-166">稍後，您可以連結到 Windows 提供的對等服務。</span><span class="sxs-lookup"><span data-stu-id="5568c-166">At a later time, you can hook up to the equivalent services that Windows provides.</span></span>

### <a name="unity-step-5-deprecated"></a><span data-ttu-id="5568c-167">Unity 步驟 5:（已過時）</span><span class="sxs-lookup"><span data-stu-id="5568c-167">Unity step 5: (Deprecated)</span></span>

<span data-ttu-id="5568c-168">步驟 5 已不再需要的。</span><span class="sxs-lookup"><span data-stu-id="5568c-168">Step 5 is no longer required.</span></span> <span data-ttu-id="5568c-169">我們會保留這裡使編製索引的步驟維持不變。</span><span class="sxs-lookup"><span data-stu-id="5568c-169">We are leaving it here so that the indexing of steps remains the same.</span></span>

### <a name="unity-step-6-get-your-windows-mixed-reality-hardware-set-up"></a><span data-ttu-id="5568c-170">Unity 步驟 6:取得您的 Windows Mixed Reality 硬體設定</span><span class="sxs-lookup"><span data-stu-id="5568c-170">Unity step 6: Get your Windows Mixed Reality hardware set up</span></span>
1. <span data-ttu-id="5568c-171">檢閱中的步驟[沈浸式耳機安裝程式](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/before-you-start
)</span><span class="sxs-lookup"><span data-stu-id="5568c-171">Review steps in [Immersive headset setup](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/before-you-start
)</span></span>
2. <span data-ttu-id="5568c-172">深入了解[使用 Windows Mixed Reality 模擬器](using-the-windows-mixed-reality-simulator.md)和[瀏覽 Windows Mixed Reality 首頁](navigating-the-windows-mixed-reality-home.md)</span><span class="sxs-lookup"><span data-stu-id="5568c-172">Learn about [Using the Windows Mixed Reality simulator](using-the-windows-mixed-reality-simulator.md) and [Navigating the Windows Mixed Reality home](navigating-the-windows-mixed-reality-home.md)</span></span>

### <a name="unity-step-7-target-your-application-to-run-on-windows-mixed-reality"></a><span data-ttu-id="5568c-173">Unity 步驟 7:目標執行 Windows Mixed reality 應用程式</span><span class="sxs-lookup"><span data-stu-id="5568c-173">Unity step 7: Target your application to run on Windows Mixed Reality</span></span>
1. <span data-ttu-id="5568c-174">首先，您必須移除，或有條件地編譯特定 VR SDK 任何其他程式庫支援。</span><span class="sxs-lookup"><span data-stu-id="5568c-174">First, you must remove or conditionally compile out any other library support specific to a particular VR SDK.</span></span> <span data-ttu-id="5568c-175">這些資產經常變更設定和您的專案，方式與其他 VR Sdk 中，例如 Windows Mixed Reality 不相容的屬性。</span><span class="sxs-lookup"><span data-stu-id="5568c-175">Those assets frequently change settings and properties on your project in ways that are incompatible with other VR SDKs, such as Windows Mixed Reality.</span></span>
    * <span data-ttu-id="5568c-176">例如，如果您的專案參考 SteamVR SDK，您必須更新專案，以匯出為 Windows 市集建置目標時，排除這些 prefabs 和指令碼 API 呼叫。</span><span class="sxs-lookup"><span data-stu-id="5568c-176">For example, if your project references the SteamVR SDK, you will need to update your project to exclude those prefabs and script API calls when exporting for the Windows Store build target.</span></span>
    * <span data-ttu-id="5568c-177">即將推出，可以有條件地排除其他 VR Sdk 的特定步驟。</span><span class="sxs-lookup"><span data-stu-id="5568c-177">Specific steps for conditionally excluding other VR SDKs is coming soon.</span></span>
2. <span data-ttu-id="5568c-178">在 Unity 專案中，[目標 Windows 10 SDK](holograms-100.md#target-windows-10-sdk)</span><span class="sxs-lookup"><span data-stu-id="5568c-178">In your Unity project, [target the Windows 10 SDK](holograms-100.md#target-windows-10-sdk)</span></span>
3. <span data-ttu-id="5568c-179">針對每個場景，[設定觀景窗](holograms-100.md#chapter-2---setup-the-camera)</span><span class="sxs-lookup"><span data-stu-id="5568c-179">For each scene, [setup the camera](holograms-100.md#chapter-2---setup-the-camera)</span></span>

### <a name="unity-step-8-use-the-stage-to-place-content-on-the-floor"></a><span data-ttu-id="5568c-180">Unity 步驟 8:若要將內容放在地上使用階段</span><span class="sxs-lookup"><span data-stu-id="5568c-180">Unity step 8: Use the stage to place content on the floor</span></span>

<span data-ttu-id="5568c-181">您可以跨各種不同的建置混合實境體驗[體驗標尺](coordinate-systems.md)。</span><span class="sxs-lookup"><span data-stu-id="5568c-181">You can build Mixed Reality experiences across a wide range of [experience scales](coordinate-systems.md).</span></span>

<span data-ttu-id="5568c-182">如果您要移植**安插擴展經驗**，您必須確定設定為 Unity **「 定態**追蹤空間類型：</span><span class="sxs-lookup"><span data-stu-id="5568c-182">If you're porting a **seated-scale experience**, you must ensure Unity is set to the **Stationary** tracking space type:</span></span>

```cs
XRDevice.SetTrackingSpaceType(TrackingSpaceType.Stationary);
```

<span data-ttu-id="5568c-183">這會設定 Unity 的全局座標系統來追蹤[靜態參考座標系](coordinate-systems.md#spatial-coordinate-systems)。</span><span class="sxs-lookup"><span data-stu-id="5568c-183">This sets Unity's world coordinate system to track the [stationary frame of reference](coordinate-systems.md#spatial-coordinate-systems).</span></span> <span data-ttu-id="5568c-184">在 「 定態的追蹤模式中，內容會放在編輯器中只前方相機的預設位置 （正向是-Z） 應用程式啟動時，會出現在使用者之前。</span><span class="sxs-lookup"><span data-stu-id="5568c-184">In the Stationary tracking mode, content placed in the editor just in front of the camera's default location (forward is -Z) will appear in front of the user when the app launches.</span></span> <span data-ttu-id="5568c-185">以 recenter 使用者的插入擴充槽原點，您可以呼叫 Unity [XR。InputTracking.Recenter](https://docs.unity3d.com/ScriptReference/XR.InputTracking.Recenter.html)方法。</span><span class="sxs-lookup"><span data-stu-id="5568c-185">To recenter the user's seated origin, you can call Unity's [XR.InputTracking.Recenter](https://docs.unity3d.com/ScriptReference/XR.InputTracking.Recenter.html) method.</span></span>

<span data-ttu-id="5568c-186">如果您要移植**常設擴展經驗**或**聊天室擴展經驗**，將要放置內容相對於最低限度值。</span><span class="sxs-lookup"><span data-stu-id="5568c-186">If you're porting a **standing-scale experience** or **room-scale experience**, you'll be placing content relative to the floor.</span></span> <span data-ttu-id="5568c-187">您會理解使用者的 floor 使用 **[空間階段](coordinate-systems.md#spatial-coordinate-systems)** 、 樓層來源和選擇性空間界限代表使用者的定義、 設定期間第一次執行。</span><span class="sxs-lookup"><span data-stu-id="5568c-187">You reason about the user's floor using the **[spatial stage](coordinate-systems.md#spatial-coordinate-systems)**, which represents the user's defined floor-level origin and optional room boundary, set up during first run.</span></span> <span data-ttu-id="5568c-188">對於這些體驗，您必須確定設定為 Unity **RoomScale**追蹤空間型別。</span><span class="sxs-lookup"><span data-stu-id="5568c-188">For these experiences, you must ensure Unity is set to the **RoomScale** tracking space type.</span></span> <span data-ttu-id="5568c-189">雖然 RoomScale 是預設值，您會想要加以明確設定，並確保您取得上一步，則為 true，以擷取其中使用者已離開聊天室它們校正移動其電腦的情況下：</span><span class="sxs-lookup"><span data-stu-id="5568c-189">While RoomScale is the default, you'll want to set it explicitly and ensure you get back true, to catch situations where the user has moved their computer away from the room they calibrated:</span></span>

```cs
if (XRDevice.SetTrackingSpaceType(TrackingSpaceType.RoomScale))
{
    // RoomScale mode was set successfully.  App can now assume that y=0 in Unity world coordinate represents the floor.
}
else
{
    // RoomScale mode was not set successfully.  App cannot make assumptions about where the floor plane is.
}
```

<span data-ttu-id="5568c-190">一旦您的應用程式已成功設定追蹤的空間型別，內容放在 y 軸上 RoomScale = 的 0 平面會出現在最低限度值。</span><span class="sxs-lookup"><span data-stu-id="5568c-190">Once your app successfully sets the RoomScale tracking space type, content placed on the y=0 plane will appear on the floor.</span></span> <span data-ttu-id="5568c-191">（0，0，0） 處的原點，將會在最低限度值的空間在安裝期間，使用者名人-z 表示它們已在安裝期間對向的正向方向其中的特定位置。</span><span class="sxs-lookup"><span data-stu-id="5568c-191">The origin at (0, 0, 0) will be the specific place on the floor where the user stood during room setup, with -Z representing the forward direction they were facing during setup.</span></span>

<span data-ttu-id="5568c-192">在指令碼，您可以呼叫您 TryGetGeometry 方法正在 UnityEngine.Experimental.XR.Boundary 型別，以取得界限的多邊形，然後指定 TrackedArea 界限類型。</span><span class="sxs-lookup"><span data-stu-id="5568c-192">In script code, you can then call the TryGetGeometry method on your the UnityEngine.Experimental.XR.Boundary type to get a boundary polygon, specifying a boundary type of TrackedArea.</span></span> <span data-ttu-id="5568c-193">如果使用者定義的界限 （得到頂點清單），您就會知道它是安全地傳遞**聊天室擴展經驗**給使用者，可以走的地方周圍場景您建立。</span><span class="sxs-lookup"><span data-stu-id="5568c-193">If the user defined a boundary (you get back a list of vertices), you know it is safe to deliver a **room-scale experience** to the user, where they can walk around the scene you create.</span></span>

<span data-ttu-id="5568c-194">請注意，系統會自動轉譯界限使用者接近它時。</span><span class="sxs-lookup"><span data-stu-id="5568c-194">Note that the system will automatically render the boundary when the user approaches it.</span></span> <span data-ttu-id="5568c-195">您的應用程式不需要使用此多邊形呈現本身的界限。</span><span class="sxs-lookup"><span data-stu-id="5568c-195">Your app does not need to use this polygon to render the boundary itself.</span></span>

<span data-ttu-id="5568c-196">如需詳細資訊，請參閱 < [Unity 中的座標系統](coordinate-systems-in-unity.md)頁面。</span><span class="sxs-lookup"><span data-stu-id="5568c-196">For more details, see the [Coordinate systems in Unity](coordinate-systems-in-unity.md) page.</span></span>

<span data-ttu-id="5568c-197">有些應用程式可以使用矩形來限制其互動。</span><span class="sxs-lookup"><span data-stu-id="5568c-197">Some applications use a rectangle to constrain their interaction.</span></span> <span data-ttu-id="5568c-198">擷取最大的內切的矩形不直接支援 UWP API 或 Unity 中。</span><span class="sxs-lookup"><span data-stu-id="5568c-198">Retrieving the largest inscribed rectangle is not directly supported in the UWP API or Unity.</span></span> <span data-ttu-id="5568c-199">範例程式碼連結至以下顯示如何尋找已追蹤的範圍內的矩形。</span><span class="sxs-lookup"><span data-stu-id="5568c-199">The example code linked to below shows how to find a rectangle within the traced bounds.</span></span> <span data-ttu-id="5568c-200">它是基礎，因此可能不會找到最好的解決方案的啟發學習法，不過，結果通常與預期一致。</span><span class="sxs-lookup"><span data-stu-id="5568c-200">It is heuristic based so may not find the optimal solution, however, results are generally consistent with expectations.</span></span> <span data-ttu-id="5568c-201">可以微調演算法中的參數，以尋找更精確的結果，但代價是處理時間。</span><span class="sxs-lookup"><span data-stu-id="5568c-201">Parameters in the algorithm can be tuned to find more precise results at the cost of processing time.</span></span> <span data-ttu-id="5568c-202">此演算法會為使用 5.6 preview MRTP Unity 版本的混合實境工具組 (fork） 中。</span><span class="sxs-lookup"><span data-stu-id="5568c-202">The algorithm is in a fork of the Mixed Reality Toolkit that uses the 5.6 preview MRTP version of Unity.</span></span> <span data-ttu-id="5568c-203">這不是可公開取得。</span><span class="sxs-lookup"><span data-stu-id="5568c-203">This is not publically available.</span></span> <span data-ttu-id="5568c-204">您應該直接使用 Unity 2017.2 和更高版本中的程式碼。</span><span class="sxs-lookup"><span data-stu-id="5568c-204">The code should be directly usable in 2017.2 and higher versions of Unity.</span></span> <span data-ttu-id="5568c-205">程式碼會在不久的將來移植到目前 MRTK。</span><span class="sxs-lookup"><span data-stu-id="5568c-205">The code will be ported to the current MRTK in the near future.</span></span>

<span data-ttu-id="5568c-206">[GitHub 上的程式碼的 zip 檔案](https://github.com/KevinKennedy/MixedRealityToolkit-Unity/releases/tag/5.6.MRTP20)重要檔案：</span><span class="sxs-lookup"><span data-stu-id="5568c-206">[zip file of code on GitHub](https://github.com/KevinKennedy/MixedRealityToolkit-Unity/releases/tag/5.6.MRTP20) Important files:</span></span>
* <span data-ttu-id="5568c-207">Assets/HoloToolkit/Stage/Scripts/StageManager.cs-使用方式的範例</span><span class="sxs-lookup"><span data-stu-id="5568c-207">Assets/HoloToolkit/Stage/Scripts/StageManager.cs - example of usage</span></span>
* <span data-ttu-id="5568c-208">Assets/HoloToolkit/Stage/Scripts/LargestRectangle.cs-演算法的實作</span><span class="sxs-lookup"><span data-stu-id="5568c-208">Assets/HoloToolkit/Stage/Scripts/LargestRectangle.cs - implementation of the algorithm</span></span>
* <span data-ttu-id="5568c-209">Assets/HoloToolkit-UnitTests/Editor/Stage/LargestRectangleTest.cs-演算法的一般測試</span><span class="sxs-lookup"><span data-stu-id="5568c-209">Assets/HoloToolkit-UnitTests/Editor/Stage/LargestRectangleTest.cs - trivial test of the algorithm</span></span>

<span data-ttu-id="5568c-210">結果範例：</span><span class="sxs-lookup"><span data-stu-id="5568c-210">Example of results:</span></span>

![結果範例](images/largestrectangle-400px.jpg)

<span data-ttu-id="5568c-212">由 Daniel Smilkov，演算法根據部落格：[多邊形中的最大矩形](https://d3plus.org/blog/behind-the-scenes/2014/07/08/largest-rect/)</span><span class="sxs-lookup"><span data-stu-id="5568c-212">Algorithm is based on a blog by Daniel Smilkov: [Largest rectangle in a polygon](https://d3plus.org/blog/behind-the-scenes/2014/07/08/largest-rect/)</span></span>

### <a name="unity-step-9-work-through-your-input-model"></a><span data-ttu-id="5568c-213">Unity 步驟 9:透過您輸入的模型運作</span><span class="sxs-lookup"><span data-stu-id="5568c-213">Unity step 9: Work through your input model</span></span>

<span data-ttu-id="5568c-214">每個遊戲或應用程式為目標的現有 HMD 會有一組它所處理的輸入、 輸入所需的體驗，與特定 Api，它會呼叫以取得這些輸入的類型。</span><span class="sxs-lookup"><span data-stu-id="5568c-214">Each game or application targeting an existing HMD will have a set of inputs that it handles, types of inputs that it needs for the experience, and specific APIs that it calls to get those inputs.</span></span> <span data-ttu-id="5568c-215">我們已投資在嘗試建立以簡單又直截了當越好，以善用 Windows Mixed Reality 中可用的輸入。</span><span class="sxs-lookup"><span data-stu-id="5568c-215">We have invested in trying to make it as simple and straightforward as possible to take advantage of the inputs available in Windows Mixed Reality.</span></span>
1. <span data-ttu-id="5568c-216">閱讀 **[輸入移植指南 Unity](input-porting-guide-for-unity.md)** 如需詳細的 Windows Mixed Reality 公開 （expose） 的輸入，以及如何對應至您應用程式可能會立即執行。</span><span class="sxs-lookup"><span data-stu-id="5568c-216">Read through the **[Input porting guide for Unity](input-porting-guide-for-unity.md)** for details of how Windows Mixed Reality exposes input, and how that maps to what your application may do today.</span></span>
2. <span data-ttu-id="5568c-217">選擇您要利用 Unity 的跨-VR-SDK 輸入 API，或 MR 特定輸入的 API。</span><span class="sxs-lookup"><span data-stu-id="5568c-217">Choose whether you are going to leverage Unity's cross-VR-SDK input API, or the MR-specific input API.</span></span> <span data-ttu-id="5568c-218">一般的 Input.GetButton/Input.GetAxis Api 所使用 Unity VR 應用程式，今天就[Oculus 輸入](https://docs.unity3d.com/Manual/OculusControllers.html)並[OpenVR 輸入](https://docs.unity3d.com/Manual/OpenVRControllers.html)。</span><span class="sxs-lookup"><span data-stu-id="5568c-218">The general Input.GetButton/Input.GetAxis APIs are used by Unity VR apps today for [Oculus input](https://docs.unity3d.com/Manual/OculusControllers.html) and [OpenVR input](https://docs.unity3d.com/Manual/OpenVRControllers.html).</span></span> <span data-ttu-id="5568c-219">如果您的應用程式已經在使用這些 Api 的動作控制站，這是最簡單的路徑，-您應該只需要重新對應按鈕與軸在輸入管理員。</span><span class="sxs-lookup"><span data-stu-id="5568c-219">If your apps are already using these APIs for motion controllers, this is the easiest path - you should just need to remap buttons and axes in the Input Manager.</span></span>
    * <span data-ttu-id="5568c-220">您可以存取在 Unity 中使用的一般跨-VR-SDK Input.GetButton/Input.GetAxis Api 或 MR 專屬 UnityEngine.XR.WSA.Input Api 移動控制站的資料。</span><span class="sxs-lookup"><span data-stu-id="5568c-220">You can access motion controller data in Unity using either the general cross-VR-SDK Input.GetButton/Input.GetAxis APIs or the MR-specific UnityEngine.XR.WSA.Input APIs.</span></span> <span data-ttu-id="5568c-221">（先前以在 Unity 5.6 UnityEngine.XR.WSA.Input 命名空間）</span><span class="sxs-lookup"><span data-stu-id="5568c-221">(previously in the UnityEngine.XR.WSA.Input namespace in Unity 5.6)</span></span>
    * <span data-ttu-id="5568c-222">請參閱[工具組中的範例](https://github.com/Microsoft/HoloToolkit-Unity/pull/572)，結合遊樂器 」 和 「 動作控制站。</span><span class="sxs-lookup"><span data-stu-id="5568c-222">See the [example in Toolkit](https://github.com/Microsoft/HoloToolkit-Unity/pull/572) that combines gamepad and motion controllers.</span></span>

### <a name="unity-step-10-performance-testing-and-tuning"></a><span data-ttu-id="5568c-223">Unity 步驟 10:效能測試與微調</span><span class="sxs-lookup"><span data-stu-id="5568c-223">Unity step 10: Performance testing and tuning</span></span>

<span data-ttu-id="5568c-224">Windows Mixed Reality 將可在廣泛的類別的裝置上，範圍從高結束遊戲電腦時，向廣泛的市場主要電腦。</span><span class="sxs-lookup"><span data-stu-id="5568c-224">Windows Mixed Reality will be available on a broad class of devices, ranging from high end gaming PCs, down to broad market mainstream PCs.</span></span> <span data-ttu-id="5568c-225">根據您的目標哪些市場，還有您的應用程式的可用運算和圖形預算顯著的差異。</span><span class="sxs-lookup"><span data-stu-id="5568c-225">Depending on what market you are targeting, there is a significant difference in the available compute and graphics budgets for your application.</span></span> <span data-ttu-id="5568c-226">在本移植的練習中，您可能會利用進階的電腦，及有大量運算和圖形預算提供您的應用程式。</span><span class="sxs-lookup"><span data-stu-id="5568c-226">During this porting exercise, you are likely leveraging a premium PC, and have had significant compute and graphics budgets available to your app.</span></span> <span data-ttu-id="5568c-227">如果您想要您的應用程式提供給更廣泛的對象，您應該測試並分析您的應用程式[代表您想要的硬體目標](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines)。</span><span class="sxs-lookup"><span data-stu-id="5568c-227">If you wish to make your app available to a broader audience, you should test and profile your app on [the representative hardware that you wish to target](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines).</span></span>

<span data-ttu-id="5568c-228">兩者[Unity](https://docs.unity3d.com/Manual/Profiler.html)並[Visual Studio](https://docs.microsoft.com/visualstudio/profiling/index)包括效能分析工具，以及兩者[Microsoft](understanding-performance-for-mixed-reality.md)和[Intel](https://software.intel.com/articles/vr-content-developer-guide)上發行的指導方針效能分析和最佳化。</span><span class="sxs-lookup"><span data-stu-id="5568c-228">Both [Unity](https://docs.unity3d.com/Manual/Profiler.html) and [Visual Studio](https://docs.microsoft.com/visualstudio/profiling/index) include performance profilers, and both [Microsoft](understanding-performance-for-mixed-reality.md) and [Intel](https://software.intel.com/articles/vr-content-developer-guide) publish guidelines on performance profiling and optimization.</span></span> <span data-ttu-id="5568c-229">沒有效能的廣泛討論網址[了解效能 for Mixed Reality](understanding-performance-for-mixed-reality.md)。</span><span class="sxs-lookup"><span data-stu-id="5568c-229">There is an extensive discussion of performance available at [Understanding Performance for Mixed Reality](understanding-performance-for-mixed-reality.md).</span></span> <span data-ttu-id="5568c-230">此外，在 Unity 底下的特定詳細資料[Unity 的效能建議](performance-recommendations-for-unity.md)。</span><span class="sxs-lookup"><span data-stu-id="5568c-230">Further, there are specific details for Unity under [Performance Recommendations for Unity](performance-recommendations-for-unity.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="5568c-231">另請參閱</span><span class="sxs-lookup"><span data-stu-id="5568c-231">See also</span></span>
* [<span data-ttu-id="5568c-232">移植指南 Unity 的輸入</span><span class="sxs-lookup"><span data-stu-id="5568c-232">Input porting guide for Unity</span></span>](input-porting-guide-for-unity.md)
* [<span data-ttu-id="5568c-233">Windows Mixed Reality 最小電腦的硬體相容性指導方針</span><span class="sxs-lookup"><span data-stu-id="5568c-233">Windows Mixed Reality minimum PC hardware compatibility guidelines</span></span>](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines)
* [<span data-ttu-id="5568c-234">了解效能 for Mixed Reality</span><span class="sxs-lookup"><span data-stu-id="5568c-234">Understanding Performance for Mixed Reality</span></span>](understanding-performance-for-mixed-reality.md)
* [<span data-ttu-id="5568c-235">Unity 的效能建議</span><span class="sxs-lookup"><span data-stu-id="5568c-235">Performance Recommendations for Unity</span></span>](performance-recommendations-for-unity.md)
* [<span data-ttu-id="5568c-236">加入 Unity 中的 Xbox Live 的支援，適用於 UWP</span><span class="sxs-lookup"><span data-stu-id="5568c-236">Add Xbox Live support to Unity for UWP</span></span>](https://docs.microsoft.com/windows/uwp/xbox-live/get-started-with-partner/partner-add-xbox-live-to-unity-uwp)
