---
title: 移植指南
description: 逐步解說 walthrough 說明如何將現有的沉浸式應用程式移植到 Windows Mixed Reality。
author: chimerascorn
ms.author: alexturn
ms.date: 10/02/2018
ms.topic: article
keywords: 埠、移植、unity、中介軟體、引擎、UWP
ms.openlocfilehash: 06501742d4b5c30036982deef2ec2a88171912bf
ms.sourcegitcommit: d6ac8f1f545fe20cf1e36b83c0e7998b82fd02f8
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/14/2020
ms.locfileid: "81278036"
---
# <a name="porting-guides"></a><span data-ttu-id="69477-104">移植指南</span><span class="sxs-lookup"><span data-stu-id="69477-104">Porting guides</span></span>

<span data-ttu-id="69477-105">Windows 10 包含直接支援沉浸式和全像攝影耳機。</span><span class="sxs-lookup"><span data-stu-id="69477-105">Windows 10 includes support for immersive and holographic headsets directly.</span></span> <span data-ttu-id="69477-106">如果您已經為另一個裝置（例如 Oculus go Rift 或 HTC Vive）建立內容，這些專案就會相依于存在於作業系統平臺 API 的程式庫。</span><span class="sxs-lookup"><span data-stu-id="69477-106">If you have built content for another device such as the Oculus Rift or HTC Vive, these have dependencies on libraries that exist above the operating system's platform API.</span></span> <span data-ttu-id="69477-107">將現有內容帶入 Windows Mixed Reality 牽涉到將這些其他 Sdk 的使用重定至 Windows Api。</span><span class="sxs-lookup"><span data-stu-id="69477-107">Bringing existing content over to Windows Mixed Reality involves retargeting usage of these other SDKs to the Windows APIs.</span></span> <span data-ttu-id="69477-108">[適用于 mixed reality 的 Windows 平臺 api](https://docs.microsoft.com/uwp/api/Windows.Perception)僅適用于通用 WINDOWS 平臺（UWP）應用程式模型。</span><span class="sxs-lookup"><span data-stu-id="69477-108">The [Windows platform APIs for mixed reality](https://docs.microsoft.com/uwp/api/Windows.Perception) only work in the Universal Windows Platform (UWP) app model.</span></span> <span data-ttu-id="69477-109">因此，如果您的應用程式尚未針對 UWP 建立，則移植到 UWP 將會是移植體驗的一部分。</span><span class="sxs-lookup"><span data-stu-id="69477-109">So if your app is not already built for UWP, porting to UWP will be part of the porting experience.</span></span>

## <a name="porting-overview"></a><span data-ttu-id="69477-110">移植總覽</span><span class="sxs-lookup"><span data-stu-id="69477-110">Porting overview</span></span>

<span data-ttu-id="69477-111">概括而言，這些是移植現有內容所需的步驟：</span><span class="sxs-lookup"><span data-stu-id="69477-111">At a high-level, these are the steps involved in porting existing content:</span></span>
1. <span data-ttu-id="69477-112">**確定您的電腦正在執行 Windows 10 秋季建立者更新（16299）。**</span><span class="sxs-lookup"><span data-stu-id="69477-112">**Make sure your PC is running the Windows 10 Fall Creators Update (16299).**</span></span> <span data-ttu-id="69477-113">我們不再建議從內部跳躍略過的通道接收預覽組建，因為這些組建對混合現實開發而言並不是最穩定的。</span><span class="sxs-lookup"><span data-stu-id="69477-113">We no longer recommend receiving preview builds from the Insider Skip Ahead ring, as those builds won't be the most stable for mixed reality development.</span></span>
2. <span data-ttu-id="69477-114">**升級至圖形或遊戲引擎的最新版本。**</span><span class="sxs-lookup"><span data-stu-id="69477-114">**Upgrade to the latest version of your graphics or game engine.**</span></span> <span data-ttu-id="69477-115">遊戲引擎必須支援 Windows 10 SDK 版本10.0.15063.0 （于2017年4月發行）或更高版本。</span><span class="sxs-lookup"><span data-stu-id="69477-115">Game engines will need to support the Windows 10 SDK version 10.0.15063.0 (released in April 2017) or higher.</span></span>
3. <span data-ttu-id="69477-116">**升級任何中介軟體、外掛程式或元件。**</span><span class="sxs-lookup"><span data-stu-id="69477-116">**Upgrade any middleware, plug-ins or components.**</span></span> <span data-ttu-id="69477-117">如果您的應用程式包含任何元件，最好先升級至最新版本。</span><span class="sxs-lookup"><span data-stu-id="69477-117">If your app contains any components, it's a good idea to upgrade to the latest version.</span></span> <span data-ttu-id="69477-118">較新版本的最常見外掛程式支援 UWP。</span><span class="sxs-lookup"><span data-stu-id="69477-118">Newer versions of most common plug-ins have support for UWP.</span></span>
4. <span data-ttu-id="69477-119">**移除重複 sdk 的**相依性。</span><span class="sxs-lookup"><span data-stu-id="69477-119">**Remove dependencies on duplicate SDKs**.</span></span> <span data-ttu-id="69477-120">根據您的內容設為目標的裝置，您必須移除或有條件地編譯該 SDK （例如 SteamVR），才能改以 Windows Api 為目標。</span><span class="sxs-lookup"><span data-stu-id="69477-120">Depending on which device your content was targeting, you'll need to remove or conditionally compile out that SDK (e.g. SteamVR) so you can target the Windows APIs instead.</span></span>
5. <span data-ttu-id="69477-121">**解決組建問題。**</span><span class="sxs-lookup"><span data-stu-id="69477-121">**Work through build issues.**</span></span> <span data-ttu-id="69477-122">此時，移植練習僅適用于您的應用程式、您的引擎和您擁有的元件相依性。</span><span class="sxs-lookup"><span data-stu-id="69477-122">At this point, the porting exercise is specific to your app, your engine, and the component dependencies you have.</span></span>

## <a name="common-porting-steps"></a><span data-ttu-id="69477-123">一般移植步驟</span><span class="sxs-lookup"><span data-stu-id="69477-123">Common porting steps</span></span>

### <a name="common-step-1-make-sure-you-have-the-right-development-hardware"></a><span data-ttu-id="69477-124">一般步驟1：確定您有正確的開發硬體</span><span class="sxs-lookup"><span data-stu-id="69477-124">Common step 1: Make sure you have the right development hardware</span></span>

<span data-ttu-id="69477-125">[[安裝工具](install-the-tools.md#for-immersive-vr-headset-development)] 頁面會列出建議的開發硬體。</span><span class="sxs-lookup"><span data-stu-id="69477-125">The [install the tools](install-the-tools.md#for-immersive-vr-headset-development) page lists the recommended development hardware.</span></span>

### <a name="common-step-2-upgrade-to-the-latest-flight-of-windows-10"></a><span data-ttu-id="69477-126">常見步驟2：升級至最新的 Windows 10 航班</span><span class="sxs-lookup"><span data-stu-id="69477-126">Common step 2: Upgrade to the latest flight of Windows 10</span></span>

<span data-ttu-id="69477-127">Windows Mixed Reality 平臺仍在開發中，而且最有效率的是，我們建議您在「Windows 測試人員快速」的飛行。</span><span class="sxs-lookup"><span data-stu-id="69477-127">The Windows Mixed Reality platform is still under active development, and to be most effective, we recommend being on the "Windows Insider Fast" flight.</span></span> <span data-ttu-id="69477-128">為了能夠存取 windows 航班，您必須[加入 Windows 測試人員計畫](https://insider.windows.com/)。</span><span class="sxs-lookup"><span data-stu-id="69477-128">In order to have access to windows flights, you will need to [join the Windows Insider Program](https://insider.windows.com/).</span></span>
1. <span data-ttu-id="69477-129">安裝[Windows 10 建立者更新](https://www.microsoft.com/software-download/windows10)</span><span class="sxs-lookup"><span data-stu-id="69477-129">Install the [Windows 10 Creators Update](https://www.microsoft.com/software-download/windows10)</span></span>
2. <span data-ttu-id="69477-130">[加入](https://insider.windows.com/)Windows 測試人員計畫。</span><span class="sxs-lookup"><span data-stu-id="69477-130">[Join](https://insider.windows.com/) the Windows Insider Program.</span></span>
3. <span data-ttu-id="69477-131">啟用[開發人員模式](https://docs.microsoft.com/windows/uwp/get-started/enable-your-device-for-development)</span><span class="sxs-lookup"><span data-stu-id="69477-131">Enable [Developer Mode](https://docs.microsoft.com/windows/uwp/get-started/enable-your-device-for-development)</span></span>
4. <span data-ttu-id="69477-132">透過 [設定] 切換至 [ [Windows 測試人員快速航班](https://blogs.technet.microsoft.com/uktechnet/2016/07/01/joining-insider-preview)--> 更新 & 安全性] 區段</span><span class="sxs-lookup"><span data-stu-id="69477-132">Switch to the [Windows Insider Fast flights](https://blogs.technet.microsoft.com/uktechnet/2016/07/01/joining-insider-preview) through Settings --> Update & Security Section</span></span>

### <a name="common-step-3-upgrade-to-the-most-recent-build-of-visual-studio"></a><span data-ttu-id="69477-133">一般步驟3：升級至最新的 Visual Studio 組建</span><span class="sxs-lookup"><span data-stu-id="69477-133">Common step 3: Upgrade to the most recent build of Visual Studio</span></span>
* <span data-ttu-id="69477-134">請參閱 Visual Studio 2019 底下[的 [安裝工具](install-the-tools.md#installation-checklist)] 頁面</span><span class="sxs-lookup"><span data-stu-id="69477-134">Please see [Install the tools](install-the-tools.md#installation-checklist) page under Visual Studio 2019</span></span>

### <a name="common-step-4-be-ready-for-the-store"></a><span data-ttu-id="69477-135">一般步驟4：準備好存放區</span><span class="sxs-lookup"><span data-stu-id="69477-135">Common step 4: Be Ready for The Store</span></span>
* <span data-ttu-id="69477-136">儘早且經常使用[Windows 應用程式認證套件](https://developer.microsoft.com/windows/develop/app-certification-kit)（也稱為 WACK）！</span><span class="sxs-lookup"><span data-stu-id="69477-136">Use [Windows App Certification Kit](https://developer.microsoft.com/windows/develop/app-certification-kit) (aka WACK) early and often!</span></span>
* <span data-ttu-id="69477-137">使用可[移植性分析器](https://docs.microsoft.com/dotnet/standard/portability-analyzer)（[下載](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer)）</span><span class="sxs-lookup"><span data-stu-id="69477-137">Use [Portability Analyzer](https://docs.microsoft.com/dotnet/standard/portability-analyzer) ([Download](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer))</span></span>

### <a name="common-step-5-choose-the-correct-adapter"></a><span data-ttu-id="69477-138">一般步驟5：選擇正確的介面卡</span><span class="sxs-lookup"><span data-stu-id="69477-138">Common step 5: Choose the correct Adapter</span></span>
* <span data-ttu-id="69477-139">在具有兩個 Gpu 的筆記本這類系統中，以[正確的介面卡為目標](rendering-in-directx.md#hybrid-graphics-pcs-and-mixed-reality-applications)。</span><span class="sxs-lookup"><span data-stu-id="69477-139">In systems like notebooks with two GPUs, [target the correct adapter](rendering-in-directx.md#hybrid-graphics-pcs-and-mixed-reality-applications).</span></span> <span data-ttu-id="69477-140">這適用于 Unity 應用程式，除了原生 DirectX 應用程式之外，也會以明確或隱含的方式（媒體基礎）來建立 ID3D11Device，以供其功能使用。</span><span class="sxs-lookup"><span data-stu-id="69477-140">This applies to Unity apps, in addition to native DirectX apps, where a ID3D11Device is created, either explicitly or implicitly (Media Foundation), for its functionality.</span></span>

## <a name="unity-porting-guidance"></a><span data-ttu-id="69477-141">Unity 移植指引</span><span class="sxs-lookup"><span data-stu-id="69477-141">Unity porting guidance</span></span>

### <a name="unity-step-1-follow-the-common-porting-steps"></a><span data-ttu-id="69477-142">Unity 步驟1：遵循一般移植步驟</span><span class="sxs-lookup"><span data-stu-id="69477-142">Unity step 1: Follow the common porting steps</span></span>

<span data-ttu-id="69477-143">遵循所有的一般步驟。</span><span class="sxs-lookup"><span data-stu-id="69477-143">Follow all of the common steps.</span></span> <span data-ttu-id="69477-144">在步驟 #3 中，選取 [**使用 Unity 進行遊戲開發**] 工作負載。</span><span class="sxs-lookup"><span data-stu-id="69477-144">When in step #3, select the **Game Development with Unity** workload.</span></span> <span data-ttu-id="69477-145">您可以取消選取 Unity Editor 選擇性元件，因為您將會從下列指示安裝較新版本的 Unity。</span><span class="sxs-lookup"><span data-stu-id="69477-145">You may deselect the Unity Editor optional component since you'll be installing a newer version of Unity from the instructions below.</span></span>

### <a name="unity-step-2-upgrade-to-the-latest-public-build-of-unity-with-windows-mr-support"></a><span data-ttu-id="69477-146">Unity 步驟2：使用 Windows MR 支援升級至 Unity 的最新公開組建</span><span class="sxs-lookup"><span data-stu-id="69477-146">Unity step 2: Upgrade to the latest public build of Unity with Windows MR Support</span></span>
1. <span data-ttu-id="69477-147">下載 Unity 的最新[建議公用組建](install-the-tools.md)與混合現實支援。</span><span class="sxs-lookup"><span data-stu-id="69477-147">Download the latest [recommended public build of Unity](install-the-tools.md) with mixed reality support.</span></span>
2. <span data-ttu-id="69477-148">在開始之前，請先儲存您的專案複本</span><span class="sxs-lookup"><span data-stu-id="69477-148">Save a copy of your project before you get started</span></span>
3. <span data-ttu-id="69477-149">請參閱移植上的 Unity 所提供的[檔](https://docs.unity3d.com/Manual/UpgradeGuides.html)。</span><span class="sxs-lookup"><span data-stu-id="69477-149">Review the [documentation](https://docs.unity3d.com/Manual/UpgradeGuides.html) available from Unity on porting.</span></span>
4. <span data-ttu-id="69477-150">遵循 Unity 網站上的[指示](https://docs.unity3d.com/Manual/APIUpdater.html)，使用其自動 API 更新程式</span><span class="sxs-lookup"><span data-stu-id="69477-150">Follow the [instructions](https://docs.unity3d.com/Manual/APIUpdater.html) on Unity's site for using their automatic API updater</span></span>
5. <span data-ttu-id="69477-151">檢查並查看是否有其他需要進行的變更，以便讓您的專案執行，並處理任何剩餘的錯誤和警告。</span><span class="sxs-lookup"><span data-stu-id="69477-151">Check and see if there are additional changes that you need to make to get your project running, and work through any remaining errors and warnings.</span></span> <span data-ttu-id="69477-152">注意：如果您有相依的中介軟體，您可能需要更新該中介軟體才能開始進行（以下的步驟3中有更多詳細資料）。</span><span class="sxs-lookup"><span data-stu-id="69477-152">Note: If you have middleware that you depend on, you may need to update that middleware to get going (more details in step 3 below).</span></span>

### <a name="unity-step-3-upgrade-your-middleware-to-the-latest-versions"></a><span data-ttu-id="69477-153">Unity 步驟3：將您的中介軟體升級至最新版本</span><span class="sxs-lookup"><span data-stu-id="69477-153">Unity step 3: Upgrade your middleware to the latest versions</span></span>

<span data-ttu-id="69477-154">有了任何 Unity 更新，您很有可能需要更新您的遊戲或應用程式所依賴的一個或多個中介軟體套件。</span><span class="sxs-lookup"><span data-stu-id="69477-154">With any Unity update, there is a good chance that you need to update one or more middleware packages that your game or application depends on.</span></span> <span data-ttu-id="69477-155">此外，在所有中介軟體的最新版本上，會增加您在移植程式其餘部分的成功機率。</span><span class="sxs-lookup"><span data-stu-id="69477-155">Additionally, being on the latest version of all of your middleware will increase your likelihood of success throughout the rest of the porting process.</span></span> <span data-ttu-id="69477-156">許多中介軟體套件最近新增了對通用 Windows 平臺（UWP）的支援，而升級至最新版本可讓您運用該工作。</span><span class="sxs-lookup"><span data-stu-id="69477-156">Many middleware packages have recently added support for Universal Windows Platform (UWP), and upgrading to the most recent versions will let you leverage that work.</span></span>

### <a name="unity-step-4-target-your-application-to-run-on-universal-windows-platform-uwp"></a><span data-ttu-id="69477-157">Unity 步驟4：將您的應用程式目標設為在通用 Windows 平臺（UWP）上執行</span><span class="sxs-lookup"><span data-stu-id="69477-157">Unity step 4: Target your application to run on Universal Windows Platform (UWP)</span></span>

<span data-ttu-id="69477-158">安裝工具之後，您需要讓應用程式以通用 Windows 應用程式的身分執行。</span><span class="sxs-lookup"><span data-stu-id="69477-158">After installing the tools, you need to get your app running as a Universal Windows app.</span></span>
* <span data-ttu-id="69477-159">依照 Unity 提供的[詳細逐步](https://unity3d.com/partners/microsoft/porting-guides)解說逐步解說。</span><span class="sxs-lookup"><span data-stu-id="69477-159">Follow the [detailed step by step walk through](https://unity3d.com/partners/microsoft/porting-guides) provided by Unity.</span></span> <span data-ttu-id="69477-160">請注意，您應該隨時掌握適用于 Windows MR 的最新 LTS 版本（任何 20xx. 4 版）。</span><span class="sxs-lookup"><span data-stu-id="69477-160">Please note that you should stay on the latest LTS release (any 20xx.4 release) for Windows MR.</span></span>
* <span data-ttu-id="69477-161">如需更多 UWP 開發資源，請參閱《 [Windows 10 遊戲開發指南》](https://docs.microsoft.com/windows/uwp/gaming/e2e)。</span><span class="sxs-lookup"><span data-stu-id="69477-161">For more UWP development resources, take a look at the [Windows 10 game development guide](https://docs.microsoft.com/windows/uwp/gaming/e2e).</span></span>
* <span data-ttu-id="69477-162">請注意，Unity 會繼續改善 IL2CPP 支援;IL2CPP 讓一些 UWP 埠變得更容易。</span><span class="sxs-lookup"><span data-stu-id="69477-162">Please note that Unity continues to improve IL2CPP support; IL2CPP makes some UWP ports significantly easier.</span></span> <span data-ttu-id="69477-163">如果您目前的目標是 .Net 腳本後端，您應該考慮轉換以改用 IL2CPP 後端。</span><span class="sxs-lookup"><span data-stu-id="69477-163">If you are currently targeting the .Net scripting backend, you should consider converting to leverage the IL2CPP backend instead.</span></span>

<span data-ttu-id="69477-164">注意：如果您的應用程式與裝置特定服務有任何相依性，例如從串流進行的比對，您必須在此步驟停用它們。</span><span class="sxs-lookup"><span data-stu-id="69477-164">Note: If your application has any dependencies on device specific services, such as match making from Steam, you will need to disable them at this step.</span></span> <span data-ttu-id="69477-165">稍後，您可以連接到 Windows 所提供的對等服務。</span><span class="sxs-lookup"><span data-stu-id="69477-165">At a later time, you can hook up to the equivalent services that Windows provides.</span></span>

### <a name="unity-step-5-deprecated"></a><span data-ttu-id="69477-166">Unity 步驟5：（已淘汰）</span><span class="sxs-lookup"><span data-stu-id="69477-166">Unity step 5: (Deprecated)</span></span>

<span data-ttu-id="69477-167">不再需要步驟5。</span><span class="sxs-lookup"><span data-stu-id="69477-167">Step 5 is no longer required.</span></span> <span data-ttu-id="69477-168">我們會將它保留在此處，讓步驟的索引維持不變。</span><span class="sxs-lookup"><span data-stu-id="69477-168">We are leaving it here so that the indexing of steps remains the same.</span></span>

### <a name="unity-step-6-get-your-windows-mixed-reality-hardware-set-up"></a><span data-ttu-id="69477-169">Unity 步驟6：取得您的 Windows Mixed Reality 硬體設定</span><span class="sxs-lookup"><span data-stu-id="69477-169">Unity step 6: Get your Windows Mixed Reality hardware set up</span></span>
1. <span data-ttu-id="69477-170">流覽[沉浸式耳機設定](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/before-you-start
)中的步驟</span><span class="sxs-lookup"><span data-stu-id="69477-170">Review steps in [Immersive headset setup](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/before-you-start
)</span></span>
2. <span data-ttu-id="69477-171">瞭解如何[使用 Windows Mixed reality](using-the-windows-mixed-reality-simulator.md)模擬器，以及如何[流覽 windows mixed reality 首頁](navigating-the-windows-mixed-reality-home.md)</span><span class="sxs-lookup"><span data-stu-id="69477-171">Learn about [Using the Windows Mixed Reality simulator](using-the-windows-mixed-reality-simulator.md) and [Navigating the Windows Mixed Reality home](navigating-the-windows-mixed-reality-home.md)</span></span>

### <a name="unity-step-7-target-your-application-to-run-on-windows-mixed-reality"></a><span data-ttu-id="69477-172">Unity 步驟7：將您的應用程式設為目標以在 Windows Mixed Reality 上執行</span><span class="sxs-lookup"><span data-stu-id="69477-172">Unity step 7: Target your application to run on Windows Mixed Reality</span></span>
1. <span data-ttu-id="69477-173">首先，您必須移除或有條件地編譯特定 VR SDK 特定的任何其他程式庫支援。</span><span class="sxs-lookup"><span data-stu-id="69477-173">First, you must remove or conditionally compile out any other library support specific to a particular VR SDK.</span></span> <span data-ttu-id="69477-174">這些資產通常會以與其他 VR Sdk 不相容的方式來變更專案的設定和屬性，例如 Windows Mixed Reality。</span><span class="sxs-lookup"><span data-stu-id="69477-174">Those assets frequently change settings and properties on your project in ways that are incompatible with other VR SDKs, such as Windows Mixed Reality.</span></span>
    * <span data-ttu-id="69477-175">例如，如果您的專案參考 SteamVR SDK，則在匯出 Windows Store 組建目標時，您必須更新您的專案，以排除這些 prefabs 和腳本 API 呼叫。</span><span class="sxs-lookup"><span data-stu-id="69477-175">For example, if your project references the SteamVR SDK, you will need to update your project to exclude those prefabs and script API calls when exporting for the Windows Store build target.</span></span>
    * <span data-ttu-id="69477-176">即將推出其他 VR Sdk 有條件地排除特定步驟。</span><span class="sxs-lookup"><span data-stu-id="69477-176">Specific steps for conditionally excluding other VR SDKs is coming soon.</span></span>
2. <span data-ttu-id="69477-177">在您的 Unity 專案中，以[Windows 10 SDK 為目標](holograms-100.md#target-windows-10-sdk)</span><span class="sxs-lookup"><span data-stu-id="69477-177">In your Unity project, [target the Windows 10 SDK](holograms-100.md#target-windows-10-sdk)</span></span>
3. <span data-ttu-id="69477-178">針對每個場景，[設定相機](holograms-100.md#chapter-2---setup-the-camera)</span><span class="sxs-lookup"><span data-stu-id="69477-178">For each scene, [setup the camera](holograms-100.md#chapter-2---setup-the-camera)</span></span>

### <a name="unity-step-8-use-the-stage-to-place-content-on-the-floor"></a><span data-ttu-id="69477-179">Unity 步驟8：使用階段將內容放置在樓層上</span><span class="sxs-lookup"><span data-stu-id="69477-179">Unity step 8: Use the stage to place content on the floor</span></span>

<span data-ttu-id="69477-180">您可以在各式各樣的[經驗調整](coordinate-systems.md)範圍內打造混合現實體驗。</span><span class="sxs-lookup"><span data-stu-id="69477-180">You can build Mixed Reality experiences across a wide range of [experience scales](coordinate-systems.md).</span></span>

<span data-ttu-id="69477-181">如果您要移植**固定規模的經驗**，您必須確定 Unity 已設定為**固定**的追蹤空間類型：</span><span class="sxs-lookup"><span data-stu-id="69477-181">If you're porting a **seated-scale experience**, you must ensure Unity is set to the **Stationary** tracking space type:</span></span>

```cs
XRDevice.SetTrackingSpaceType(TrackingSpaceType.Stationary);
```

<span data-ttu-id="69477-182">這會設定 Unity 的全局座標系統，以追蹤[固定的參考框架](coordinate-systems.md#spatial-coordinate-systems)。</span><span class="sxs-lookup"><span data-stu-id="69477-182">This sets Unity's world coordinate system to track the [stationary frame of reference](coordinate-systems.md#spatial-coordinate-systems).</span></span> <span data-ttu-id="69477-183">在「固定」追蹤模式中，放在編輯器中的內容，就像是在相機的預設位置前方（[轉寄] 為-Z），會在應用程式啟動時顯示在使用者的前方。</span><span class="sxs-lookup"><span data-stu-id="69477-183">In the Stationary tracking mode, content placed in the editor just in front of the camera's default location (forward is -Z) will appear in front of the user when the app launches.</span></span> <span data-ttu-id="69477-184">若要 recenter 使用者的固定來源，您可以呼叫 Unity 的[XR。InputTracking. Recenter](https://docs.unity3d.com/ScriptReference/XR.InputTracking.Recenter.html)方法。</span><span class="sxs-lookup"><span data-stu-id="69477-184">To recenter the user's seated origin, you can call Unity's [XR.InputTracking.Recenter](https://docs.unity3d.com/ScriptReference/XR.InputTracking.Recenter.html) method.</span></span>

<span data-ttu-id="69477-185">如果您要移植的是**大規模體驗**或**會議室規模的體驗**，您將會放在與樓層相關的內容。</span><span class="sxs-lookup"><span data-stu-id="69477-185">If you're porting a **standing-scale experience** or **room-scale experience**, you'll be placing content relative to the floor.</span></span> <span data-ttu-id="69477-186">您的使用者使用 **[空間階段](coordinate-systems.md#spatial-coordinate-systems)** （代表使用者定義的樓層層級原點和選擇性的房間界限），這是您在第一次執行期間設定的原因。</span><span class="sxs-lookup"><span data-stu-id="69477-186">You reason about the user's floor using the **[spatial stage](coordinate-systems.md#spatial-coordinate-systems)**, which represents the user's defined floor-level origin and optional room boundary, set up during first run.</span></span> <span data-ttu-id="69477-187">針對這些經驗，您必須確定 Unity 已設定為**RoomScale**追蹤空間類型。</span><span class="sxs-lookup"><span data-stu-id="69477-187">For these experiences, you must ensure Unity is set to the **RoomScale** tracking space type.</span></span> <span data-ttu-id="69477-188">雖然 RoomScale 是預設值，但您會想要明確設定並確保您得到 true，以攔截使用者已將其電腦從其校正的房間中移出的情況：</span><span class="sxs-lookup"><span data-stu-id="69477-188">While RoomScale is the default, you'll want to set it explicitly and ensure you get back true, to catch situations where the user has moved their computer away from the room they calibrated:</span></span>

```cs
if (XRDevice.SetTrackingSpaceType(TrackingSpaceType.RoomScale))
{
    // RoomScale mode was set successfully.  App can now assume that y=0 in Unity world coordinate represents the floor.
}
else
{
    // RoomScale mode was not set successfully.  App cannot make assumptions about where the floor plane is.
}
```

<span data-ttu-id="69477-189">一旦您的應用程式成功設定 RoomScale 追蹤空間類型，放置在 y = 0 平面上的內容就會出現在樓層上。</span><span class="sxs-lookup"><span data-stu-id="69477-189">Once your app successfully sets the RoomScale tracking space type, content placed on the y=0 plane will appear on the floor.</span></span> <span data-ttu-id="69477-190">位於（0，0，0）的原點會是在室內設定期間使用者勇敢面對考驗的特定位置，其中-Z 代表在安裝期間所面臨的正向方向。</span><span class="sxs-lookup"><span data-stu-id="69477-190">The origin at (0, 0, 0) will be the specific place on the floor where the user stood during room setup, with -Z representing the forward direction they were facing during setup.</span></span>

<span data-ttu-id="69477-191">在腳本程式碼中，您可以在上呼叫 TryGetGeometry 方法，以取得界限多邊形，並指定 TrackedArea 的界限類型。</span><span class="sxs-lookup"><span data-stu-id="69477-191">In script code, you can then call the TryGetGeometry method on your the UnityEngine.Experimental.XR.Boundary type to get a boundary polygon, specifying a boundary type of TrackedArea.</span></span> <span data-ttu-id="69477-192">如果使用者定義界限（您會取得頂點清單），您就知道可以安全地提供**會議室規模的體驗**給使用者，讓他們能在其中四處流覽您建立的場景。</span><span class="sxs-lookup"><span data-stu-id="69477-192">If the user defined a boundary (you get back a list of vertices), you know it is safe to deliver a **room-scale experience** to the user, where they can walk around the scene you create.</span></span>

<span data-ttu-id="69477-193">請注意，當使用者對邊界進行方法時，系統將會自動呈現界限。</span><span class="sxs-lookup"><span data-stu-id="69477-193">Note that the system will automatically render the boundary when the user approaches it.</span></span> <span data-ttu-id="69477-194">您的應用程式不需要使用此多邊形來呈現界限本身。</span><span class="sxs-lookup"><span data-stu-id="69477-194">Your app does not need to use this polygon to render the boundary itself.</span></span>

<span data-ttu-id="69477-195">如需詳細資訊，請參閱在[Unity 中座標系統](coordinate-systems-in-unity.md)頁面。</span><span class="sxs-lookup"><span data-stu-id="69477-195">For more details, see the [Coordinate systems in Unity](coordinate-systems-in-unity.md) page.</span></span>

<span data-ttu-id="69477-196">有些應用程式會使用矩形來限制其互動。</span><span class="sxs-lookup"><span data-stu-id="69477-196">Some applications use a rectangle to constrain their interaction.</span></span> <span data-ttu-id="69477-197">UWP API 或 Unity 中不直接支援抓取最大的矩形。</span><span class="sxs-lookup"><span data-stu-id="69477-197">Retrieving the largest inscribed rectangle is not directly supported in the UWP API or Unity.</span></span> <span data-ttu-id="69477-198">以下連結的範例程式碼顯示如何在追蹤界限內尋找矩形。</span><span class="sxs-lookup"><span data-stu-id="69477-198">The example code linked to below shows how to find a rectangle within the traced bounds.</span></span> <span data-ttu-id="69477-199">這是以啟發學習法為基礎，因此可能找不到最佳的解決方案，不過結果通常與預期一致。</span><span class="sxs-lookup"><span data-stu-id="69477-199">It is heuristic based so may not find the optimal solution, however, results are generally consistent with expectations.</span></span> <span data-ttu-id="69477-200">演算法中的參數可以微調，以在處理時間的成本中尋找更精確的結果。</span><span class="sxs-lookup"><span data-stu-id="69477-200">Parameters in the algorithm can be tuned to find more precise results at the cost of processing time.</span></span> <span data-ttu-id="69477-201">此演算法是使用 Unity 的 5.6 preview MRTP 版本之混合現實工具組的分叉。</span><span class="sxs-lookup"><span data-stu-id="69477-201">The algorithm is in a fork of the Mixed Reality Toolkit that uses the 5.6 preview MRTP version of Unity.</span></span> <span data-ttu-id="69477-202">這不是公開提供。</span><span class="sxs-lookup"><span data-stu-id="69477-202">This is not publically available.</span></span> <span data-ttu-id="69477-203">程式碼應該可以直接在2017.2 和更新版本的 Unity 中使用。</span><span class="sxs-lookup"><span data-stu-id="69477-203">The code should be directly usable in 2017.2 and higher versions of Unity.</span></span> <span data-ttu-id="69477-204">程式碼將會在不久的將來移植到目前的 MRTK。</span><span class="sxs-lookup"><span data-stu-id="69477-204">The code will be ported to the current MRTK in the near future.</span></span>

<span data-ttu-id="69477-205">[GitHub 上的程式碼 zip](https://github.com/KevinKennedy/MixedRealityToolkit-Unity/releases/tag/5.6.MRTP20)檔案重要檔案：</span><span class="sxs-lookup"><span data-stu-id="69477-205">[zip file of code on GitHub](https://github.com/KevinKennedy/MixedRealityToolkit-Unity/releases/tag/5.6.MRTP20) Important files:</span></span>
* <span data-ttu-id="69477-206">資產/HoloToolkit/階段/腳本/StageManager .cs-使用方式的範例</span><span class="sxs-lookup"><span data-stu-id="69477-206">Assets/HoloToolkit/Stage/Scripts/StageManager.cs - example of usage</span></span>
* <span data-ttu-id="69477-207">資產/HoloToolkit/階段/腳本/LargestRectangle .cs-演算法的執行</span><span class="sxs-lookup"><span data-stu-id="69477-207">Assets/HoloToolkit/Stage/Scripts/LargestRectangle.cs - implementation of the algorithm</span></span>
* <span data-ttu-id="69477-208">資產/HoloToolkit-Run-unittests/Editor/Stage/LargestRectangleTest-演算法的簡單測試</span><span class="sxs-lookup"><span data-stu-id="69477-208">Assets/HoloToolkit-UnitTests/Editor/Stage/LargestRectangleTest.cs - trivial test of the algorithm</span></span>

<span data-ttu-id="69477-209">結果的範例：</span><span class="sxs-lookup"><span data-stu-id="69477-209">Example of results:</span></span>

![結果的範例](images/largestrectangle-400px.jpg)

<span data-ttu-id="69477-211">演算法是以 Daniel Smilkov：[多邊形中的最大矩形](https://d3plus.org/blog/behind-the-scenes/2014/07/08/largest-rect/)為基礎的 blog</span><span class="sxs-lookup"><span data-stu-id="69477-211">Algorithm is based on a blog by Daniel Smilkov: [Largest rectangle in a polygon](https://d3plus.org/blog/behind-the-scenes/2014/07/08/largest-rect/)</span></span>

### <a name="unity-step-9-work-through-your-input-model"></a><span data-ttu-id="69477-212">Unity 步驟9：逐步執行您的輸入模型</span><span class="sxs-lookup"><span data-stu-id="69477-212">Unity step 9: Work through your input model</span></span>

<span data-ttu-id="69477-213">以現有 HMD 為目標的每個遊戲或應用程式將會有一組其處理的輸入、體驗所需的輸入類型，以及它所呼叫以取得這些輸入的特定 Api。</span><span class="sxs-lookup"><span data-stu-id="69477-213">Each game or application targeting an existing HMD will have a set of inputs that it handles, types of inputs that it needs for the experience, and specific APIs that it calls to get those inputs.</span></span> <span data-ttu-id="69477-214">我們致力於嘗試讓它盡可能簡單明瞭，以利用 Windows Mixed Reality 提供的輸入。</span><span class="sxs-lookup"><span data-stu-id="69477-214">We have invested in trying to make it as simple and straightforward as possible to take advantage of the inputs available in Windows Mixed Reality.</span></span>
1. <span data-ttu-id="69477-215">請仔細閱讀 **[適用于 Unity 的輸入移植指南](input-porting-guide-for-unity.md)** ，以取得有關 Windows Mixed Reality 如何公開輸入的詳細資訊，以及如何對應至您的應用程式目前所能執行的工作。</span><span class="sxs-lookup"><span data-stu-id="69477-215">Read through the **[Input porting guide for Unity](input-porting-guide-for-unity.md)** for details of how Windows Mixed Reality exposes input, and how that maps to what your application may do today.</span></span>
2. <span data-ttu-id="69477-216">選擇您要利用 Unity 的跨 VR-SDK 輸入 API，或 MR 特定的輸入 API。</span><span class="sxs-lookup"><span data-stu-id="69477-216">Choose whether you are going to leverage Unity's cross-VR-SDK input API, or the MR-specific input API.</span></span> <span data-ttu-id="69477-217">Unity VR 應用程式現在會使用一般的 GetButton/GetAxis Api 來進行[oculus go 輸入](https://docs.unity3d.com/Manual/OculusControllers.html)和[OpenVR 輸入](https://docs.unity3d.com/Manual/OpenVRControllers.html)。</span><span class="sxs-lookup"><span data-stu-id="69477-217">The general Input.GetButton/Input.GetAxis APIs are used by Unity VR apps today for [Oculus input](https://docs.unity3d.com/Manual/OculusControllers.html) and [OpenVR input](https://docs.unity3d.com/Manual/OpenVRControllers.html).</span></span> <span data-ttu-id="69477-218">如果您的應用程式已經使用這些適用于動作控制器的 Api，這是最簡單的路徑，您應該只需要在輸入管理員中重新對應按鈕和軸。</span><span class="sxs-lookup"><span data-stu-id="69477-218">If your apps are already using these APIs for motion controllers, this is the easiest path - you should just need to remap buttons and axes in the Input Manager.</span></span>
    * <span data-ttu-id="69477-219">您可以使用一般的跨 VR-SDK 輸入來存取 Unity 中的動作控制器資料。 GetButton/GetAxis Api 或 MR 專屬的 UnityEngine. XR。輸入 Api。</span><span class="sxs-lookup"><span data-stu-id="69477-219">You can access motion controller data in Unity using either the general cross-VR-SDK Input.GetButton/Input.GetAxis APIs or the MR-specific UnityEngine.XR.WSA.Input APIs.</span></span> <span data-ttu-id="69477-220">（之前在 Unity 5.6 中的 UnityEngine. XR 命名空間）</span><span class="sxs-lookup"><span data-stu-id="69477-220">(previously in the UnityEngine.XR.WSA.Input namespace in Unity 5.6)</span></span>
    * <span data-ttu-id="69477-221">請參閱結合遊戲台和動作控制器的[工具組中的範例](https://github.com/Microsoft/HoloToolkit-Unity/pull/572)。</span><span class="sxs-lookup"><span data-stu-id="69477-221">See the [example in Toolkit](https://github.com/Microsoft/HoloToolkit-Unity/pull/572) that combines gamepad and motion controllers.</span></span>

### <a name="unity-step-10-performance-testing-and-tuning"></a><span data-ttu-id="69477-222">Unity 步驟10：效能測試和微調</span><span class="sxs-lookup"><span data-stu-id="69477-222">Unity step 10: Performance testing and tuning</span></span>

<span data-ttu-id="69477-223">Windows Mixed Reality 會在廣泛的裝置上提供，範圍從高階遊戲電腦到廣泛的市場主流電腦。</span><span class="sxs-lookup"><span data-stu-id="69477-223">Windows Mixed Reality will be available on a broad class of devices, ranging from high end gaming PCs, down to broad market mainstream PCs.</span></span> <span data-ttu-id="69477-224">根據您的目標市場，應用程式的可用計算和圖形預算會有顯著的差異。</span><span class="sxs-lookup"><span data-stu-id="69477-224">Depending on what market you are targeting, there is a significant difference in the available compute and graphics budgets for your application.</span></span> <span data-ttu-id="69477-225">在此移植練習中，您很可能會利用高階電腦，而且您的應用程式可以使用大量的計算和圖形預算。</span><span class="sxs-lookup"><span data-stu-id="69477-225">During this porting exercise, you are likely leveraging a premium PC, and have had significant compute and graphics budgets available to your app.</span></span> <span data-ttu-id="69477-226">如果您想要讓您的應用程式可供更多物件使用，您應該在[想要作為目標的代表性硬體](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines)上測試和分析應用程式。</span><span class="sxs-lookup"><span data-stu-id="69477-226">If you wish to make your app available to a broader audience, you should test and profile your app on [the representative hardware that you wish to target](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines).</span></span>

<span data-ttu-id="69477-227">[Unity](https://docs.unity3d.com/Manual/Profiler.html)和[Visual Studio](https://docs.microsoft.com/visualstudio/profiling/index)都包含效能分析工具，以及[Microsoft](understanding-performance-for-mixed-reality.md)和[Intel](https://software.intel.com/articles/vr-content-developer-guide)都發佈有關效能分析和優化的指導方針。</span><span class="sxs-lookup"><span data-stu-id="69477-227">Both [Unity](https://docs.unity3d.com/Manual/Profiler.html) and [Visual Studio](https://docs.microsoft.com/visualstudio/profiling/index) include performance profilers, and both [Microsoft](understanding-performance-for-mixed-reality.md) and [Intel](https://software.intel.com/articles/vr-content-developer-guide) publish guidelines on performance profiling and optimization.</span></span> <span data-ttu-id="69477-228">在[瞭解混合現實的效能](understanding-performance-for-mixed-reality.md)方面，有廣泛的效能討論。</span><span class="sxs-lookup"><span data-stu-id="69477-228">There is an extensive discussion of performance available at [Understanding Performance for Mixed Reality](understanding-performance-for-mixed-reality.md).</span></span> <span data-ttu-id="69477-229">此外，unity 的[效能建議](performance-recommendations-for-unity.md)下還有 unity 的特定詳細資料。</span><span class="sxs-lookup"><span data-stu-id="69477-229">Further, there are specific details for Unity under [Performance Recommendations for Unity](performance-recommendations-for-unity.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="69477-230">另請參閱</span><span class="sxs-lookup"><span data-stu-id="69477-230">See also</span></span>
* [<span data-ttu-id="69477-231">Unity 的輸入移植指南</span><span class="sxs-lookup"><span data-stu-id="69477-231">Input porting guide for Unity</span></span>](input-porting-guide-for-unity.md)
* [<span data-ttu-id="69477-232">Windows Mixed Reality 最低電腦硬體相容性指導方針</span><span class="sxs-lookup"><span data-stu-id="69477-232">Windows Mixed Reality minimum PC hardware compatibility guidelines</span></span>](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines)
* [<span data-ttu-id="69477-233">瞭解混合現實的效能</span><span class="sxs-lookup"><span data-stu-id="69477-233">Understanding Performance for Mixed Reality</span></span>](understanding-performance-for-mixed-reality.md)
* [<span data-ttu-id="69477-234">Unity 的效能建議</span><span class="sxs-lookup"><span data-stu-id="69477-234">Performance Recommendations for Unity</span></span>](performance-recommendations-for-unity.md)
* [<span data-ttu-id="69477-235">將 Xbox Live 支援新增至適用于 UWP 的 Unity</span><span class="sxs-lookup"><span data-stu-id="69477-235">Add Xbox Live support to Unity for UWP</span></span>](https://docs.microsoft.com/windows/uwp/xbox-live/get-started-with-partner/partner-add-xbox-live-to-unity-uwp)
