---
title: 空間對應設計
description: 若要有效使用 HoloLens 內的空間對應, 必須仔細考慮許多因素。
author: cre8ivepark
ms.author: dongpark
ms.date: 03/21/2018
ms.topic: article
keywords: Windows Mixed Reality, 設計, 空間對應, HoloLens, 表面重建, 網格
ms.openlocfilehash: 02e64727f9a23bea28e018d7c4e5a8b89c152447
ms.sourcegitcommit: 60f73ca23023c17c1da833c83d2a02f4dcc4d17b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/17/2019
ms.locfileid: "69566005"
---
# <a name="spatial-mapping-design"></a><span data-ttu-id="481eb-104">空間對應設計</span><span class="sxs-lookup"><span data-stu-id="481eb-104">Spatial mapping design</span></span>

<span data-ttu-id="481eb-105">若要有效使用 HoloLens 內的空間對應, 必須仔細考慮許多因素。</span><span class="sxs-lookup"><span data-stu-id="481eb-105">Effective use of spatial mapping within HoloLens requires careful consideration of many factors.</span></span>

## <a name="device-support"></a><span data-ttu-id="481eb-106">裝置支援</span><span class="sxs-lookup"><span data-stu-id="481eb-106">Device support</span></span>

<table>
    <colgroup>
    <col width="33%" />
    <col width="33%" />
    <col width="33%" />
    </colgroup>
    <tr>
        <td><span data-ttu-id="481eb-107"><strong>功能</strong></span><span class="sxs-lookup"><span data-stu-id="481eb-107"><strong>Feature</strong></span></span></td>
        <td><span data-ttu-id="481eb-108"><a href="hololens-hardware-details.md"><strong>HoloLens</strong></a></span><span class="sxs-lookup"><span data-stu-id="481eb-108"><a href="hololens-hardware-details.md"><strong>HoloLens</strong></a></span></span></td>
        <td><span data-ttu-id="481eb-109"><a href="immersive-headset-hardware-details.md"><strong>沉浸式頭戴裝置</strong></a></span><span class="sxs-lookup"><span data-stu-id="481eb-109"><a href="immersive-headset-hardware-details.md"><strong>Immersive headsets</strong></a></span></span></td>
    </tr>
     <tr>
        <td><span data-ttu-id="481eb-110">空間對應設計</span><span class="sxs-lookup"><span data-stu-id="481eb-110">Spatial mapping design</span></span></td>
        <td><span data-ttu-id="481eb-111">✔️</span><span class="sxs-lookup"><span data-stu-id="481eb-111">✔️</span></span></td>
        <td><span data-ttu-id="481eb-112">❌</span><span class="sxs-lookup"><span data-stu-id="481eb-112">❌</span></span></td>
    </tr>
</table>

## <a name="why-is-spatial-mapping-important"></a><span data-ttu-id="481eb-113">為什麼空間對應很重要？</span><span class="sxs-lookup"><span data-stu-id="481eb-113">Why is spatial mapping important?</span></span>

<span data-ttu-id="481eb-114">空間對應可以將物件放在實際的表面上。</span><span class="sxs-lookup"><span data-stu-id="481eb-114">Spatial mapping makes it possible to place objects on real surfaces.</span></span> <span data-ttu-id="481eb-115">這有助於錨定使用者世界中的物件, 並利用真實世界的深度提示。根據其他全息影像和真實世界物件 Occluding 您的全息影像, 有助於說服使用者這些全息影像實際上在其空間中。</span><span class="sxs-lookup"><span data-stu-id="481eb-115">This helps anchor objects in the user's world and takes advantage of real world depth cues. Occluding your holograms based on other holograms and real world objects helps convince the user that these holograms are actually in their space.</span></span> <span data-ttu-id="481eb-116">在空間中浮動或與使用者移動的全息影像, 將不會覺得真實。</span><span class="sxs-lookup"><span data-stu-id="481eb-116">Holograms floating in space or moving with the user will not feel as real.</span></span> <span data-ttu-id="481eb-117">可能的話, 請將專案放在緩和之下。</span><span class="sxs-lookup"><span data-stu-id="481eb-117">When possible, place items for comfort.</span></span>

<span data-ttu-id="481eb-118">在放置或移動全息影像時將表面視覺化 (使用簡單的投影方格)。</span><span class="sxs-lookup"><span data-stu-id="481eb-118">Visualize surfaces when placing or moving holograms (use a simple projected grid).</span></span> <span data-ttu-id="481eb-119">這可協助使用者知道他們可以在哪裡放置其全息影像, 並在使用者嘗試放置全息全像的位置尚未進行對應的情況下顯示。</span><span class="sxs-lookup"><span data-stu-id="481eb-119">This will help the user know where they can best place their holograms, and shows the user if the spot they are trying to place the hologram hasn't been mapped yet.</span></span> <span data-ttu-id="481eb-120">如果使用者的角度過多, 您可以將「佈告欄專案」導向至使用者。</span><span class="sxs-lookup"><span data-stu-id="481eb-120">You can "billboard items" toward the user if they end up at too much of an angle.</span></span>

## <a name="what-influences-spatial-mapping-quality"></a><span data-ttu-id="481eb-121">什麼會影響空間對應品質？</span><span class="sxs-lookup"><span data-stu-id="481eb-121">What influences spatial mapping quality?</span></span>

<span data-ttu-id="481eb-122">[這裡](environment-considerations-for-hololens.md)詳述的幾個因素可能會影響這些錯誤的頻率和嚴重性。</span><span class="sxs-lookup"><span data-stu-id="481eb-122">Several factors, detailed [here](environment-considerations-for-hololens.md), can affect the frequency and severity of these errors.</span></span>  <span data-ttu-id="481eb-123">不過, 您應該設計應用程式, 讓使用者即使在空間對應資料中出現錯誤, 也能夠達到其目標。</span><span class="sxs-lookup"><span data-stu-id="481eb-123">However, you should design your application so that the user is able to achieve their goals even in the presence of errors in the spatial mapping data.</span></span>

## <a name="the-environment-scanning-experience"></a><span data-ttu-id="481eb-124">環境掃描體驗</span><span class="sxs-lookup"><span data-stu-id="481eb-124">The environment scanning experience</span></span>

<span data-ttu-id="481eb-125">每個使用空間對應的應用程式都應該考慮提供「掃描經驗」;應用程式用來引導使用者掃描應用程式正常運作所需表面的進程。</span><span class="sxs-lookup"><span data-stu-id="481eb-125">Each application that uses spatial mapping should consider providing a 'scanning experience'; the process through which the application guides the user to scan surfaces that are necessary for the application to function correctly.</span></span>

<span data-ttu-id="481eb-126">![掃描的範例](images/sr-mixedworld-140429-8pm-00068-1000px.png)</span><span class="sxs-lookup"><span data-stu-id="481eb-126">![Example of scanning](images/sr-mixedworld-140429-8pm-00068-1000px.png)</span></span><br>
<span data-ttu-id="481eb-127">*掃描的範例*</span><span class="sxs-lookup"><span data-stu-id="481eb-127">*Example of scanning*</span></span>

<span data-ttu-id="481eb-128">此掃描體驗的本質可能會因為每個應用程式的需求而有很大的差異, 但兩個主要原則應該會引導其設計。</span><span class="sxs-lookup"><span data-stu-id="481eb-128">The nature of this scanning experience can vary greatly depending upon each application's needs, but two main principles should guide its design.</span></span>

<span data-ttu-id="481eb-129">首先,**與使用者進行明確通訊是主要的考慮**。</span><span class="sxs-lookup"><span data-stu-id="481eb-129">Firstly, **clear communication with the user is the primary concern**.</span></span> <span data-ttu-id="481eb-130">使用者應該一律知道是否符合應用程式的需求。</span><span class="sxs-lookup"><span data-stu-id="481eb-130">The user should always be aware of whether the application's requirements are being met.</span></span> <span data-ttu-id="481eb-131">如果不符合這些條件, 使用者應該立即清楚知道這是什麼, 而且應該很快就會採取適當的動作。</span><span class="sxs-lookup"><span data-stu-id="481eb-131">When they are not being met, it should be immediately clear to the user why this is so and they should be quickly led to take the appropriate action.</span></span>

<span data-ttu-id="481eb-132">其次,**應用程式應該嘗試在效率和可靠性之間取得平衡**。</span><span class="sxs-lookup"><span data-stu-id="481eb-132">Secondly, **applications should attempt to strike a balance between efficiency and reliability**.</span></span> <span data-ttu-id="481eb-133">當可以**可靠地**執行此動作時, 應用程式應該會自動分析空間對應資料以節省使用者時間。</span><span class="sxs-lookup"><span data-stu-id="481eb-133">When it is possible to do so **reliably**, applications should automatically analyze spatial mapping data to save the user time.</span></span> <span data-ttu-id="481eb-134">當您無法可靠地執行此動作時, 應用程式應該改為讓使用者快速提供所需的其他資訊給應用程式。</span><span class="sxs-lookup"><span data-stu-id="481eb-134">When it is not possible to do so reliably, applications should instead enable the user to quickly provide the application with the additional information it requires.</span></span>

<span data-ttu-id="481eb-135">為了協助設計正確的掃描經驗, 請考慮下列何種可能適用于您的應用程式:</span><span class="sxs-lookup"><span data-stu-id="481eb-135">To help design the right scanning experience, consider which of the following possibilities are applicable to your application:</span></span>

* <span data-ttu-id="481eb-136">**沒有掃描經驗**</span><span class="sxs-lookup"><span data-stu-id="481eb-136">**No scanning experience**</span></span>
   * <span data-ttu-id="481eb-137">應用程式可以順利運作, 而不需要任何引導式掃描體驗;它將瞭解在自然使用者移動期間觀察到的表面。</span><span class="sxs-lookup"><span data-stu-id="481eb-137">An application may function perfectly without any guided scanning experience; it will learn about surfaces that are observed in the course of natural user movement.</span></span>
   * <span data-ttu-id="481eb-138">例如, 可讓使用者在使用全像攝影的表面上繪製的應用程式, 只需要知道使用者目前可以看見的表面。</span><span class="sxs-lookup"><span data-stu-id="481eb-138">For example an application that lets the user draw on surfaces with holographic spray paint requires knowledge only of the surfaces currently visible to the user.</span></span>
   * <span data-ttu-id="481eb-139">如果環境是使用者已花很多時間使用 HoloLens 的情況, 則可能已完全掃描該環境。</span><span class="sxs-lookup"><span data-stu-id="481eb-139">The environment may be completely scanned already if it is one in which the user has already spent a lot of time using the HoloLens.</span></span>
   * <span data-ttu-id="481eb-140">但請記住, 空間對應所使用的相機只能看到使用者前方的 3.1 m, 因此空間對應將不會知道任何更遠的表面, 除非使用者已從較近的距離觀察到它們。</span><span class="sxs-lookup"><span data-stu-id="481eb-140">Bear in mind however that the camera used by spatial mapping can only see 3.1m in front of the user, so spatial mapping will not know about any more distant surfaces unless the user has observed them from a closer distance in the past.</span></span>
   * <span data-ttu-id="481eb-141">因此, 使用者瞭解已掃描的表面, 應用程式應該為此效果提供視覺化的意見反應, 例如, 將虛擬陰影轉型為掃描的表面, 可以協助使用者在這些表面上放置全息影像。</span><span class="sxs-lookup"><span data-stu-id="481eb-141">So the user understands which surfaces have been scanned, the application should provide visual feedback to this effect, for example casting virtual shadows onto scanned surfaces may help the user place holograms on those surfaces.</span></span>
   * <span data-ttu-id="481eb-142">在此情況下, 空間介面觀察者的周框應將每個框架更新為主體鎖定的[空間座標系統](coordinate-systems.md), 使其遵循使用者。</span><span class="sxs-lookup"><span data-stu-id="481eb-142">For this case, the spatial surface observer's bounding volumes should be updated each frame to a body-locked [spatial coordinate system](coordinate-systems.md), so that they follow the user.</span></span>

* <span data-ttu-id="481eb-143">**尋找適當的位置**</span><span class="sxs-lookup"><span data-stu-id="481eb-143">**Find a suitable location**</span></span>
   * <span data-ttu-id="481eb-144">應用程式可以設計成在具有特定需求的位置中使用。</span><span class="sxs-lookup"><span data-stu-id="481eb-144">An application may be designed for use in a location with specific requirements.</span></span>
   * <span data-ttu-id="481eb-145">例如, 應用程式可能需要使用者附近的空白區域, 才能安全地練習全像 kung-fu。</span><span class="sxs-lookup"><span data-stu-id="481eb-145">For example, the application may require an empty area around the user so they can safely practice holographic kung-fu.</span></span>
   * <span data-ttu-id="481eb-146">應用程式應該將任何特定的需求傳遞給使用者, 並以清楚的視覺效果回饋來加強。</span><span class="sxs-lookup"><span data-stu-id="481eb-146">Applications should communicate any specific requirements to the user up-front, and reinforce them with clear visual feedback.</span></span>
   * <span data-ttu-id="481eb-147">在此範例中, 應用程式應該將所需空白區域的範圍視覺化, 並以視覺化方式反白顯示此區域內任何不想要的物件。</span><span class="sxs-lookup"><span data-stu-id="481eb-147">In this example, the application should visualize the extent of the required empty area and visually highlight the presence of any undesired objects within this zone.</span></span>
   * <span data-ttu-id="481eb-148">在此情況下, 空間表面觀察器的周框磁片區應該在選擇的位置中使用世界鎖定的[空間座標系統](coordinate-systems.md)。</span><span class="sxs-lookup"><span data-stu-id="481eb-148">For this case, the spatial surface observer's bounding volumes should use a world-locked [spatial coordinate system](coordinate-systems.md) in the chosen location.</span></span>

* <span data-ttu-id="481eb-149">**尋找適當的表面設定**</span><span class="sxs-lookup"><span data-stu-id="481eb-149">**Find a suitable configuration of surfaces**</span></span>
   * <span data-ttu-id="481eb-150">應用程式可能需要特定的介面設定, 例如兩個大型、平面、相反的牆, 以建立非全像的鏡像大廳。</span><span class="sxs-lookup"><span data-stu-id="481eb-150">An application may require a specific configuration of surfaces, for example two large, flat, opposing walls to create a holographic hall of mirrors.</span></span>
   * <span data-ttu-id="481eb-151">在這種情況下, 應用程式必須分析空間對應所提供的表面, 以偵測適當的表面, 並將使用者導向至這些介面。</span><span class="sxs-lookup"><span data-stu-id="481eb-151">In such cases the application will need to analyze the surfaces provided by spatial mapping to detect suitable surfaces, and direct the user toward them.</span></span>
   * <span data-ttu-id="481eb-152">如果應用程式的表面分析不完全可靠, 使用者應該有一個 fallback 選項。</span><span class="sxs-lookup"><span data-stu-id="481eb-152">The user should have a fallback option if the application's surface analysis is not completely reliable.</span></span> <span data-ttu-id="481eb-153">例如, 如果應用程式不正確地將門口識別為平面, 則使用者需要一個簡單的方法來更正此錯誤。</span><span class="sxs-lookup"><span data-stu-id="481eb-153">For example, if the application incorrectly identifies a doorway as a flat wall, the user needs a simple way to correct this error.</span></span>

* <span data-ttu-id="481eb-154">**掃描環境的一部分**</span><span class="sxs-lookup"><span data-stu-id="481eb-154">**Scan part of the environment**</span></span>
   * <span data-ttu-id="481eb-155">應用程式可能只想要依使用者的指示來捕捉部分的環境。</span><span class="sxs-lookup"><span data-stu-id="481eb-155">An application may wish to only capture part of the environment, as directed by the user.</span></span>
   * <span data-ttu-id="481eb-156">例如, 應用程式會掃描部分房間, 讓使用者可以針對想要銷售的傢俱張貼全像的分類廣告。</span><span class="sxs-lookup"><span data-stu-id="481eb-156">For example, the application scans part of a room so the user may post a holographic classified ad for furniture they wish to sell.</span></span>
   * <span data-ttu-id="481eb-157">在此情況下, 應用程式應該在使用者于其掃描期間觀察到的區域內, 捕獲空間對應資料。</span><span class="sxs-lookup"><span data-stu-id="481eb-157">In this case, the application should capture spatial mapping data within the regions observed by the user during their scan.</span></span>

* <span data-ttu-id="481eb-158">**掃描整個聊天室**</span><span class="sxs-lookup"><span data-stu-id="481eb-158">**Scan the whole room**</span></span>
   * <span data-ttu-id="481eb-159">應用程式可能需要掃描目前房間中的所有介面, 包括使用者背後的表面。</span><span class="sxs-lookup"><span data-stu-id="481eb-159">An application may require a scan of all of the surfaces in the current room, including those behind the user.</span></span>
   * <span data-ttu-id="481eb-160">例如, 遊戲可能會將使用者 Gulliver 的角色, siege 從所有方向接近數百個小型 Lilliputians。</span><span class="sxs-lookup"><span data-stu-id="481eb-160">For example, a game may put the user in the role of Gulliver, under siege from hundreds of tiny Lilliputians approaching from all directions.</span></span>
   * <span data-ttu-id="481eb-161">在這種情況下, 應用程式必須判斷目前的房間中有多少表面已經過掃描, 並引導使用者的注視填滿明顯的間隙。</span><span class="sxs-lookup"><span data-stu-id="481eb-161">In such cases, the application will need to determine how many of the surfaces in the current room have already been scanned, and direct the user's gaze to fill in significant gaps.</span></span>
   * <span data-ttu-id="481eb-162">此程式的關鍵在於提供視覺化意見反應, 讓使用者清楚指出尚未掃描的表面。</span><span class="sxs-lookup"><span data-stu-id="481eb-162">The key to this process is providing visual feedback that makes it clear to the user which surfaces have not yet been scanned.</span></span> <span data-ttu-id="481eb-163">例如, 應用程式可以使用以[距離為基礎的霧化](https://msdn.microsoft.com/library/windows/desktop/bb173401%28v=vs.85%29.aspx), 以視覺方式反白顯示空間對應介面未涵蓋的區域。</span><span class="sxs-lookup"><span data-stu-id="481eb-163">The application could for example use [distance-based fog](https://msdn.microsoft.com/library/windows/desktop/bb173401%28v=vs.85%29.aspx) to visually highlight regions that are not covered by spatial mapping surfaces.</span></span>

* <span data-ttu-id="481eb-164">**製作環境的初始快照集**</span><span class="sxs-lookup"><span data-stu-id="481eb-164">**Take an initial snapshot of the environment**</span></span>
   * <span data-ttu-id="481eb-165">應用程式可能會想要在取得初始「快照集」之後忽略環境中的所有變更。</span><span class="sxs-lookup"><span data-stu-id="481eb-165">An application may wish to ignore all changes in the environment after taking an initial 'snapshot'.</span></span>
   * <span data-ttu-id="481eb-166">這可能適合用來避免使用者建立的資料中斷, 並與環境的初始狀態緊密結合。</span><span class="sxs-lookup"><span data-stu-id="481eb-166">This may be appropriate to avoid disruption of user-created data that is tightly coupled to the initial state of the environment.</span></span>
   * <span data-ttu-id="481eb-167">在此情況下, 當掃描完成時, 應用程式應該複製其初始狀態的空間對應資料。</span><span class="sxs-lookup"><span data-stu-id="481eb-167">In this case, the application should make a copy of the spatial mapping data in its initial state once the scan is complete.</span></span>
   * <span data-ttu-id="481eb-168">如果環境仍然正確地 pixels occluded 了全息影像, 應用程式應該會繼續接收空間對應資料的更新。</span><span class="sxs-lookup"><span data-stu-id="481eb-168">Applications should continue receiving updates to spatial mapping data if holograms are still to be correctly occluded by the environment.</span></span>
   * <span data-ttu-id="481eb-169">對於空間對應資料的持續更新也允許視覺化已發生的任何變更, 並向使用者說明環境先前和目前狀態之間的差異。</span><span class="sxs-lookup"><span data-stu-id="481eb-169">Continued updates to spatial mapping data also allow visualizing any changes that have occurred, clarifying to the user the differences between prior and present states of the environment.</span></span>

* <span data-ttu-id="481eb-170">**採取使用者起始的環境快照**</span><span class="sxs-lookup"><span data-stu-id="481eb-170">**Take user-initiated snapshots of the environment**</span></span>
   * <span data-ttu-id="481eb-171">應用程式可能只想要在使用者指示時回應環境變更。</span><span class="sxs-lookup"><span data-stu-id="481eb-171">An application may only wish to respond to environmental changes when instructed by the user.</span></span>
   * <span data-ttu-id="481eb-172">例如, 使用者可以在不同的時間捕捉其姿勢, 藉以建立多個 friend 的 3D ' statues '。</span><span class="sxs-lookup"><span data-stu-id="481eb-172">For example, the user could create multiple 3D 'statues' of a friend by capturing their poses at different moments.</span></span>

* <span data-ttu-id="481eb-173">**允許使用者變更環境**</span><span class="sxs-lookup"><span data-stu-id="481eb-173">**Allow the user to change the environment**</span></span>
   * <span data-ttu-id="481eb-174">應用程式可以設計成即時回應使用者環境中所做的任何變更。</span><span class="sxs-lookup"><span data-stu-id="481eb-174">An application may be designed to respond in real-time to any changes made in the user's environment.</span></span>
   * <span data-ttu-id="481eb-175">例如, 使用者繪製揭開可能會觸發「場景變更」, 以在另一端進行全像播放。</span><span class="sxs-lookup"><span data-stu-id="481eb-175">For example, the user drawing a curtain could trigger 'scene change' for a holographic play taking place on the other side.</span></span>

* <span data-ttu-id="481eb-176">**引導使用者避免空間對應資料中的錯誤**</span><span class="sxs-lookup"><span data-stu-id="481eb-176">**Guide the user to avoid errors in the spatial mapping data**</span></span>
   * <span data-ttu-id="481eb-177">應用程式在掃描其環境時, 可能會想要為使用者提供指引。</span><span class="sxs-lookup"><span data-stu-id="481eb-177">An application may wish to provide guidance to the user while they are scanning their environment.</span></span>
   * <span data-ttu-id="481eb-178">這可協助使用者避免[空間對應資料中](spatial-mapping-design.md#what-influences-spatial-mapping-quality)特定類型的錯誤, 例如, 離開 sunlit 視窗或鏡像。</span><span class="sxs-lookup"><span data-stu-id="481eb-178">This can help the user to avoid certain kinds of [errors in the spatial mapping data](spatial-mapping-design.md#what-influences-spatial-mapping-quality), for example by staying away from sunlit windows or mirrors.</span></span>

<span data-ttu-id="481eb-179">另一個要注意的詳細資料是空間對應資料的「範圍」不是無限的。</span><span class="sxs-lookup"><span data-stu-id="481eb-179">One additional detail to be aware of is that the 'range' of spatial mapping data is not unlimited.</span></span> <span data-ttu-id="481eb-180">雖然空間對應確實會建立大量的永久資料庫, 但它只會將資料提供給使用者周圍具有有限大小的「反升」應用程式。</span><span class="sxs-lookup"><span data-stu-id="481eb-180">Whilst spatial mapping does build a permanent database of large spaces, it only makes that data available to applications in a 'bubble' of limited size around the user.</span></span> <span data-ttu-id="481eb-181">因此, 如果您從長 corridor 的開端開始, 並從一開始就夠遠, 那麼最後的空間表面就會消失。</span><span class="sxs-lookup"><span data-stu-id="481eb-181">Thus if you start at the beginning of a long corridor and walk far enough away from the start, then eventually the spatial surfaces back at the beginning will disappear.</span></span> <span data-ttu-id="481eb-182">您可以藉由在應用程式中的介面從可用空間對應資料消失之後, 將這些表面快取, 藉此減輕此問題。</span><span class="sxs-lookup"><span data-stu-id="481eb-182">You can of course mitigate this by caching those surfaces in your application after they have disappeared from the available spatial mapping data.</span></span>

## <a name="mesh-processing"></a><span data-ttu-id="481eb-183">網格處理</span><span class="sxs-lookup"><span data-stu-id="481eb-183">Mesh processing</span></span>

<span data-ttu-id="481eb-184">這可能有助於偵測介面中常見的錯誤類型, 並視需要篩選、移除或修改空間對應資料。</span><span class="sxs-lookup"><span data-stu-id="481eb-184">It may help to detect common types of errors in surfaces and to filter, remove or modify the spatial mapping data as appropriate.</span></span>

<span data-ttu-id="481eb-185">請記住, 空間對應資料的目的是要盡可能忠實呈現到真實世界的表面, 因此您套用的任何處理風險會從「真」進一步改變您的表面。</span><span class="sxs-lookup"><span data-stu-id="481eb-185">Bear in mind that spatial mapping data is intended to be as faithful as possible to real-world surfaces, so any processing you apply risks shifting your surfaces further from the 'truth'.</span></span>

<span data-ttu-id="481eb-186">以下是一些您可能會覺得有用的不同網格處理類型範例:</span><span class="sxs-lookup"><span data-stu-id="481eb-186">Here are some examples of different types of mesh processing that you may find useful:</span></span>

* <span data-ttu-id="481eb-187">**孔填滿**</span><span class="sxs-lookup"><span data-stu-id="481eb-187">**Hole filling**</span></span>
   * <span data-ttu-id="481eb-188">如果無法掃描呈現深色資料的小型物件, 則會在周圍表面留下一個洞。</span><span class="sxs-lookup"><span data-stu-id="481eb-188">If a small object made of a dark material fails to scan, it will leave a hole in the surrounding surface.</span></span>
   * <span data-ttu-id="481eb-189">孔會影響遮蔽: 您可以在被視為不透明的真實世界表面中, 看到「到」一個洞處的全息影像。</span><span class="sxs-lookup"><span data-stu-id="481eb-189">Holes affect occlusion: holograms can be seen 'through' a hole in a supposedly opaque real-world surface.</span></span>
   * <span data-ttu-id="481eb-190">孔會影響 raycasts: 如果您使用 raycasts 來協助使用者與介面互動, 則這些光線可能不會想要通過洞。</span><span class="sxs-lookup"><span data-stu-id="481eb-190">Holes affect raycasts: if you are using raycasts to help users interact with surfaces, it may be undesirable for these rays to pass through holes.</span></span> <span data-ttu-id="481eb-191">其中一個緩和措施是使用多個 raycasts 的組合, 涵蓋適當大小的區域。</span><span class="sxs-lookup"><span data-stu-id="481eb-191">One mitigation is to use a bundle of multiple raycasts covering an appropriately sized region.</span></span> <span data-ttu-id="481eb-192">這可讓您篩選 ' 極端 ' 的結果, 如此一來, 即使某個 raycast 通過小洞, 匯總結果仍會是有效的。</span><span class="sxs-lookup"><span data-stu-id="481eb-192">This will allow you to filter 'outlier' results, so that even if one raycast passes through a small hole, the aggregate result will still be valid.</span></span> <span data-ttu-id="481eb-193">不過, 請注意, 這種方法是以計算成本來表示。</span><span class="sxs-lookup"><span data-stu-id="481eb-193">However, be aware that this approach comes at a computational cost.</span></span>
   * <span data-ttu-id="481eb-194">孔會影響物理衝突: 物理模擬所控制的物件可能會透過樓層中的洞下降, 並會遺失。</span><span class="sxs-lookup"><span data-stu-id="481eb-194">Holes affect physics collisions: an object controlled by physics simulation may drop through a hole in the floor and become lost.</span></span>
   * <span data-ttu-id="481eb-195">您可以在 surface 網格中以演算法方式填滿這類洞。</span><span class="sxs-lookup"><span data-stu-id="481eb-195">It is possible to algorithmically fill such holes in the surface mesh.</span></span> <span data-ttu-id="481eb-196">不過, 您必須調整您的演算法, 讓「真實漏洞」 (例如 windows 和門口) 不會填滿。</span><span class="sxs-lookup"><span data-stu-id="481eb-196">However, you will need to tune your algorithm so that 'real holes' such as windows and doorways do not get filled in.</span></span> <span data-ttu-id="481eb-197">很難以可靠地區分「真實漏洞」與「虛數孔」, 因此您必須試驗不同的啟發學習法, 例如「大小」和「界限圖形」。</span><span class="sxs-lookup"><span data-stu-id="481eb-197">It can be difficult to reliably differentiate 'real holes' from 'imaginary holes', so you will need to experiment with different heuristics such as 'size' and 'boundary shape'.</span></span>

* <span data-ttu-id="481eb-198">**Hallucination 移除**</span><span class="sxs-lookup"><span data-stu-id="481eb-198">**Hallucination removal**</span></span>
   * <span data-ttu-id="481eb-199">反射、明亮的燈和移動物件可能會使小型延遲的「hallucinations」浮動在空中。</span><span class="sxs-lookup"><span data-stu-id="481eb-199">Reflections, bright lights and moving objects can leave small lingering 'hallucinations' floating in mid-air.</span></span>
   * <span data-ttu-id="481eb-200">Hallucinations 會影響遮蔽: Hallucinations 可能會顯示為在和 occluding 其他全息影像之前移動的深色形狀。</span><span class="sxs-lookup"><span data-stu-id="481eb-200">Hallucinations affect occlusion: hallucinations may become visible as dark shapes moving in front of and occluding other holograms.</span></span>
   * <span data-ttu-id="481eb-201">Hallucinations 會影響 raycasts: 如果您使用 raycasts 協助使用者與表面互動, 這些光線可能會叫用 hallucination 而不是其背後的表面。</span><span class="sxs-lookup"><span data-stu-id="481eb-201">Hallucinations affect raycasts: if you are using raycasts to help users interact with surfaces, these rays could hit a hallucination instead of the surface behind it.</span></span> <span data-ttu-id="481eb-202">如同使用漏洞, 其中一個緩和措施是使用許多 raycasts, 而不是單一 raycast, 但同樣地, 這會產生計算成本。</span><span class="sxs-lookup"><span data-stu-id="481eb-202">As with holes, one mitigation is to use many raycasts instead of a single raycast, but again this will come at a computational cost.</span></span>
   * <span data-ttu-id="481eb-203">Hallucinations 會影響物理衝突: 由物理模擬控制的物件可能會卡在 hallucination 中, 而且無法在看似清楚的空間區域間移動。</span><span class="sxs-lookup"><span data-stu-id="481eb-203">Hallucinations affect physics collisions: an object controlled by physics simulation may become stuck against a hallucination and be unable to move through a seemingly clear area of space.</span></span>
   * <span data-ttu-id="481eb-204">您可以從 surface 網格篩選這類 hallucinations。</span><span class="sxs-lookup"><span data-stu-id="481eb-204">It is possible to filter such hallucinations from the surface mesh.</span></span> <span data-ttu-id="481eb-205">不過, 就像使用洞一樣, 您必須調整您的演算法, 如此一來, 就不會移除像是燈泡和門控點的實際小型物件。</span><span class="sxs-lookup"><span data-stu-id="481eb-205">However, as with holes, you will need to tune your algorithm so that real small objects such as lamp-stands and door handles do not get removed.</span></span>

* <span data-ttu-id="481eb-206">**平穩**</span><span class="sxs-lookup"><span data-stu-id="481eb-206">**Smoothing**</span></span>
   * <span data-ttu-id="481eb-207">空間對應可能會傳回看似粗略或「雜訊」的表面, 相較于其真實世界的對應專案。</span><span class="sxs-lookup"><span data-stu-id="481eb-207">Spatial mapping may return surfaces that appear to be rough or 'noisy' in comparison to their real-world counterparts.</span></span>
   * <span data-ttu-id="481eb-208">平滑度會影響物理衝突: 如果地面是粗略的, 實際模擬的高爾夫球球可能不會以直線平滑地在其上向前復原。</span><span class="sxs-lookup"><span data-stu-id="481eb-208">Smoothness affects physics collisions: if the floor is rough, a physically simulated golf ball may not roll smoothly across it in a straight line.</span></span>
   * <span data-ttu-id="481eb-209">平滑度會影響轉譯: 如果介面是直接視覺化的, 則粗略的表面法線會影響其外觀, 並干擾「整潔」外觀。</span><span class="sxs-lookup"><span data-stu-id="481eb-209">Smoothness affects rendering: if a surface is visualized directly, rough surface normals can affect its appearance and disrupt a 'clean' look.</span></span> <span data-ttu-id="481eb-210">使用著色器中用來呈現介面的適當光源和材質, 可以減輕這種情況。</span><span class="sxs-lookup"><span data-stu-id="481eb-210">It is possible to mitigate this by using appropriate lighting and textures in the shader that is used to render the surface.</span></span>
   * <span data-ttu-id="481eb-211">可以在表面網格中平滑粗糙度。</span><span class="sxs-lookup"><span data-stu-id="481eb-211">It is possible to smooth out roughness in a surface mesh.</span></span> <span data-ttu-id="481eb-212">不過, 這可能會使表面遠離對應的真實世界表面。</span><span class="sxs-lookup"><span data-stu-id="481eb-212">However, this may push the surface further away from the corresponding real-world surface.</span></span> <span data-ttu-id="481eb-213">維護鄰近的對應對於產生正確的全像投影遮蔽, 以及讓使用者能夠與全像攝影表面達成精確且可預測的互動, 是很重要的。</span><span class="sxs-lookup"><span data-stu-id="481eb-213">Maintaining a close correspondence is important to produce accurate hologram occlusion, and to enable users to achieve precise and predictable interactions with holographic surfaces.</span></span>
   * <span data-ttu-id="481eb-214">如果只需要修飾的變更, 可能就足以平滑頂點法線, 而不會變更頂點位置。</span><span class="sxs-lookup"><span data-stu-id="481eb-214">If only a cosmetic change is required, it may be sufficient to smooth vertex normals without changing vertex positions.</span></span>

* <span data-ttu-id="481eb-215">**平面尋找**</span><span class="sxs-lookup"><span data-stu-id="481eb-215">**Plane finding**</span></span>
   * <span data-ttu-id="481eb-216">應用程式可能會想要在空間對應所提供的表面上執行許多形式的分析。</span><span class="sxs-lookup"><span data-stu-id="481eb-216">There are many forms of analysis that an application may wish to perform on the surfaces provided by spatial mapping.</span></span>
   * <span data-ttu-id="481eb-217">一個簡單的範例是「平面尋找」;識別表面的界限、主要區域。</span><span class="sxs-lookup"><span data-stu-id="481eb-217">One simple example is 'plane finding'; identifying bounded, mostly-planar regions of surfaces.</span></span>
   * <span data-ttu-id="481eb-218">平面區域可用來做為全像攝影的工作介面, 也就是可由應用程式自動放置全像攝影內容的區域。</span><span class="sxs-lookup"><span data-stu-id="481eb-218">Planar regions can be used as holographic work-surfaces, regions where holographic content can be automatically placed by the application.</span></span>
   * <span data-ttu-id="481eb-219">平面區域可以限制使用者介面, 以引導使用者與最符合其需求的表面進行互動。</span><span class="sxs-lookup"><span data-stu-id="481eb-219">Planar regions can constrain the user interface, to guide users to interact with the surfaces that best suit their needs.</span></span>
   * <span data-ttu-id="481eb-220">平面區域可在真實世界中用來做為全像, 對功能物件 (例如 LCD 畫面、表格或白板) 進行全像投影。</span><span class="sxs-lookup"><span data-stu-id="481eb-220">Planar regions can be used as in the real world, for holographic counterparts to functional objects such as LCD screens, tables or whiteboards.</span></span>
   * <span data-ttu-id="481eb-221">平面區域可以定義播放區域, 形成 videogame 層級的基礎。</span><span class="sxs-lookup"><span data-stu-id="481eb-221">Planar regions can define play areas, forming the basis of videogame levels.</span></span>
   * <span data-ttu-id="481eb-222">平面區域可以協助虛擬代理程式流覽真實世界, 方法是識別真實人員可能會進行的樓層。</span><span class="sxs-lookup"><span data-stu-id="481eb-222">Planar regions can aid virtual agents to navigate the real world, by identifying the areas of floor that real people are likely to walk on.</span></span>

## <a name="prototyping-and-debugging"></a><span data-ttu-id="481eb-223">原型設計和調試</span><span class="sxs-lookup"><span data-stu-id="481eb-223">Prototyping and debugging</span></span>

### <a name="useful-tools"></a><span data-ttu-id="481eb-224">有用的工具</span><span class="sxs-lookup"><span data-stu-id="481eb-224">Useful tools</span></span>
* <span data-ttu-id="481eb-225">[HoloLens 模擬器](using-the-hololens-emulator.md)可用來使用空間對應來開發應用程式, 而不需要存取實體 HoloLens。</span><span class="sxs-lookup"><span data-stu-id="481eb-225">The [HoloLens emulator](using-the-hololens-emulator.md) can be used to develop applications using spatial mapping without access to a physical HoloLens.</span></span> <span data-ttu-id="481eb-226">它可讓您在實際環境中模擬 HoloLens 上的即時會話, 其中包含您的應用程式通常會使用的所有資料, 包括 HoloLens 動作、空間座標系統和空間對應網格。</span><span class="sxs-lookup"><span data-stu-id="481eb-226">It allows you to simulate a live session on a HoloLens in a realistic environment, with all of the data your application would normally consume, including HoloLens motion, spatial coordinate systems and spatial mapping meshes.</span></span> <span data-ttu-id="481eb-227">這可用來提供可靠且可重複的輸入, 這在偵測問題及評估程式碼變更時很有用。</span><span class="sxs-lookup"><span data-stu-id="481eb-227">This can be used to provide reliable, repeatable input, which can be useful for debugging problems and evaluating changes to your code.</span></span>
* <span data-ttu-id="481eb-228">若要重現案例, 請從即時 HoloLens 透過網路捕獲空間對應資料, 然後將它儲存到磁片, 然後在後續的調試階段中重複使用它。</span><span class="sxs-lookup"><span data-stu-id="481eb-228">To reproduce a scenarios, capture spatial mapping data over the network from a live HoloLens, then save it to disk and reuse it in subsequent debugging sessions.</span></span>
* <span data-ttu-id="481eb-229">[Windows 裝置入口網站 3d view](using-the-windows-device-portal.md#3d-view)提供了一種方式, 可讓您查看目前可透過空間對應系統取得的所有空間表面。</span><span class="sxs-lookup"><span data-stu-id="481eb-229">The [Windows device portal 3D view](using-the-windows-device-portal.md#3d-view) provides a way to see all of the spatial surfaces currently available via the spatial mapping system.</span></span> <span data-ttu-id="481eb-230">這可為應用程式內的空間表面進行比較,例如, 您可以輕鬆地分辨是否有任何空間表面遺失或顯示在錯誤的位置。</span><span class="sxs-lookup"><span data-stu-id="481eb-230">This provides a basis of comparison for the spatial surfaces inside your application; for example you can easily tell if any spatial surfaces are missing or are being displayed in the wrong place.</span></span>

### <a name="general-prototyping-guidance"></a><span data-ttu-id="481eb-231">一般原型指引</span><span class="sxs-lookup"><span data-stu-id="481eb-231">General prototyping guidance</span></span>
* <span data-ttu-id="481eb-232">由於空間對應資料中的[錯誤](spatial-mapping-design.md#what-influences-spatial-mapping-quality)可能會對使用者的體驗造成強烈影響, 因此建議您在各種不同的環境中測試您的應用程式。</span><span class="sxs-lookup"><span data-stu-id="481eb-232">Because [errors](spatial-mapping-design.md#what-influences-spatial-mapping-quality) in the spatial mapping data may strongly affect your user's experience, we recommend that you test your application in a wide variety of environments.</span></span>
* <span data-ttu-id="481eb-233">千萬不要在相同位置 (例如您的辦公桌) 中永遠進行測試。</span><span class="sxs-lookup"><span data-stu-id="481eb-233">Don't get trapped in the habit of always testing in the same location, for example at your desk.</span></span> <span data-ttu-id="481eb-234">請務必在不同位置、圖形、大小和材質的各種表面上進行測試。</span><span class="sxs-lookup"><span data-stu-id="481eb-234">Make sure to test on various surfaces of different positions, shapes, sizes and materials.</span></span>
* <span data-ttu-id="481eb-235">同樣地, 雖然綜合或記錄的資料可用於進行調試, 但不太依賴相同的幾個測試案例。</span><span class="sxs-lookup"><span data-stu-id="481eb-235">Similarly, while synthetic or recorded data can be useful for debugging, don't become too reliant upon the same few test cases.</span></span> <span data-ttu-id="481eb-236">這可能會延遲找出更多測試會稍早發現的重要問題。</span><span class="sxs-lookup"><span data-stu-id="481eb-236">This may delay finding important issues that more varied testing would have caught earlier.</span></span>
* <span data-ttu-id="481eb-237">最好是使用實際 (而且在理想的指導) 使用者來執行測試, 因為他們可能無法使用 HoloLens 或您的應用程式, 其方式與您的做法完全相同。</span><span class="sxs-lookup"><span data-stu-id="481eb-237">It is a good idea to perform testing with real (and ideally un-coached) users, because they may not use the HoloLens or your application in exactly the same way that you do.</span></span> <span data-ttu-id="481eb-238">事實上, 這可能會讓您感到驚訝, 人們的行為、知識和假設有多容易!</span><span class="sxs-lookup"><span data-stu-id="481eb-238">In fact, it may surprise you how divergent people's behavior, knowledge and assumptions can be!</span></span>

## <a name="see-also"></a><span data-ttu-id="481eb-239">另請參閱</span><span class="sxs-lookup"><span data-stu-id="481eb-239">See also</span></span>
* [<span data-ttu-id="481eb-240">空間位置掃描視覺效果</span><span class="sxs-lookup"><span data-stu-id="481eb-240">Room scan visualization</span></span>](room-scan-visualization.md)
* [<span data-ttu-id="481eb-241">空間音效設計</span><span class="sxs-lookup"><span data-stu-id="481eb-241">Spatial sound design</span></span>](spatial-sound-design.md)
* [<span data-ttu-id="481eb-242">Unity 中的持續性</span><span class="sxs-lookup"><span data-stu-id="481eb-242">Persistence in Unity</span></span>](persistence-in-unity.md)
