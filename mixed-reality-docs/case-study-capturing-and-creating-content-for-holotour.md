---
title: 案例研究-擷取及建立 HoloTour 的內容
description: Microsoft HoloLens 的 HoloTour 提供世界各地的圖示位置的擬真 3D 的個人導覽。
author: DannyAskew
ms.author: daaske
ms.date: 03/21/2018
ms.topic: article
keywords: 混合實境 HoloTour、 HoloLens、 Windows
ms.openlocfilehash: 6c9e5f44c439310883c8b0271187a7b2263b0854
ms.sourcegitcommit: 384b0087899cd835a3a965f75c6f6c607c9edd1b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/12/2019
ms.locfileid: "59591145"
---
# <a name="case-study---capturing-and-creating-content-for-holotour"></a>案例研究-擷取及建立 HoloTour 的內容

Microsoft HoloLens 的 HoloTour 提供世界各地的圖示位置的擬真 3D 的個人導覽。 為設計工具、 演出者、 產生者、 音訊設計師和努力找這個專案的開發人員，建立已知位置 convincingly 真正的 3D 轉譯需要具創意及技術的強項的。

## <a name="the-tech"></a>技術

與 HoloTour，我們想要讓其他人瀏覽一些全世界最令人讚嘆的目的地 — 像是[馬丘比丘遺跡](https://en.wikipedia.org/wiki/Machu_Picchu)秘魯或現代[Piazza Navona](https://en.wikipedia.org/wiki/Piazza_Navona)義大利-直接從自己客廳中。 我們的小組會變得 HoloTour 目標 「 讓您覺得就真的了 」。 需要不只是圖片或視訊體驗。 利用獨特的顯示、 追蹤和音訊的 HoloLens 的技術，我們相信我們幾乎可以傳輸您的其他位置。 我們必須擷取景點、 聲音和我們瀏覽，然後再重新建立的我們的應用程式內的每個位置的 3d 幾何圖形。

若要這樣做，我們需要在 360 ° 攝影機 rig 方向的音訊擷取。 它擷取所需極高的解析度，如此錄影畫面看起來會務求時播放的 HoloLens 和相機需要彼此鄰近位置以減少連結的成品。 我們想要完整球面的涵蓋範圍，不只是沿著水平分割，但上方和下方您以及。 Rig 可攜性，以便我們可以讓它在世界各地，也需要。 我們評估現成可用的選項，並發現它們只是沒有夠好，了解我們的願景 – 不管是因為解析、 成本及大小。 如果找不到相機 rig 滿足我們的需求，我們必須建立一個自己。

### <a name="building-the-rig"></a>建置 rig

第一個版本 — 磁帶和 14 GoPro 相機源自黏貼，Velcro，d，過去 MacGyver 原本的。 完成之後檢閱從自訂的製造 rig 低階解決方案的所有項目，GoPro 數位相機都最後我們的最佳選項因為它們是小型且價格實惠，而且有方便使用的記憶體內部儲存體。 衩怮是特別重要，因為它可讓我們將相機相當接近 — 觀景窗之間的小距離，將會較小的連結的成品。 我們唯一相機排列方式，讓我們能夠取得完整的球體涵蓋範圍*加上*以智慧方式對齊相機及平滑一些成品連結的程序期間不足，無法重疊。

善用[空間音效](spatial-sound.md)HoloLens 上的功能是建立 convincingly 真實人沉迷的體驗的關鍵。 我們使用相機三腳架，它會擷取從四個方向我們觀景窗位置的聲音，請在下方平均分攤工作量的四個麥克風陣列提供足夠的資訊，我們的場景中建立空間的音效。

![我們的 360 ° 相機 rig 設定 filming Pantheon 之外。](images/camera-pantheon-200px.png)

我們的 360 ° 相機 rig 設定 filming Pantheon 之外。 


我們測試出我們的自製 rig 採取最接近 「 西雅圖 」 Rattlesnake Ridge 擷取頂端遠足的景象。 結果中，雖然大幅小於完美比您目前在 HoloTour 中看到的位置提供給我們，我們的 rig 設計已夠好，讓您覺得您真的有信心。

我們從 Velcro 和黏貼升級我們 rig，3D 列印相機外罩為，而且購買 GoPro 數位相機，來簡化電池管理的外部電池組件。 然後我們又更廣泛的測試，到建立縮圖教學課程的城市人口 coast 和圖示的舊金山金門大橋橋接器的舊金山旅行。 此相機 rig 是我們用來執行大部分的我們擷取您瀏覽 HoloTour 中的位置。

![360 ° 相機 rig filming 馬丘比丘中。](images/camera-machu-pichu-500px.png)

360 ° 相機 rig filming 馬丘比丘中。 


## <a name="behind-the-scenes"></a>幕後

之前 filming，我們需要找出哪些位置我們想要包含在我們虛擬之旅。 羅馬我們要出貨的第一個位置，我們想要取得正確的因此我們決定事先進行偵察車程。 我們已傳送一組六個的人員 — 包括美術人員、 設計師和產生者，如我們所考慮之網站的親自請瀏覽。 該趟車程支付所花費的大約 9 天 – 旅行，其餘針對 filming 的 2.5。 （如馬丘比丘我們選擇不要 scout 行程時，事先研究和預約緩衝區的幾天 filming。）

在 羅馬，小組採取的每個區域的相片，並記下感興趣的事實，以及實際考量，例如有多麼難傳入每個位置及困難就到影片因為當場或限制。 這乍聽之下像是假期，但很多工作。 天在早上早期啟動，將會進入非停駐點到晚上。 每個晚上，錄影畫面在西雅圖，若要檢閱小組已上傳。 

![在羅馬我們擷取小組。](images/holotour-filming-crew-rome-500px.jpg) 

在羅馬我們擷取小組。 


Scout 車程已完成之後，最終的計劃已針對實際 filming。 這需要，我們要到影片，哪一天，在和時間的詳細的清單。 每天海外是昂貴的因此這些車程需要能夠有效率。 我們退費的輔助線和羅馬中的處理常式，以協助我們，並充分運用從每一天，若要在終止後的日出之前。 我們要取得最佳的錄影畫面可能為了讓您覺得真正至關緊要。

### <a name="capturing-the-video"></a>擷取影片

在擷取期間進行幾個簡單的東西，可以讓後置處理更輕鬆。 例如，每當您拉攏從多個相機的映像，您得到視覺成品因為每部相機有稍微不同的檢視。 接近物件是相機、 較大的差異檢視中，以及連結的成品將會愈大。 以下是簡單的方法，以視覺化方式檢視問題： 保留您捲動方塊呈現，並與只有一個眼睛看看它。 現在，請切換的眼睛。 您會看到，拇指會移動相對於背景會出現。 如果您保留拇指進一步遠離您的面孔，並重複進行實驗，拇指會移動較少。 這明顯移動是連結的問題類似我們面臨著：您看的例如我們的數位相機，看不到完全相同的映像，因為會以極小的距離分隔。

因為很容易避免同時 filming 加以更正後的處理中超出的最差的成品，我們會嘗試防止人員和項目很遠的地方就可以排除要連結特寫物件需要的試圖觀景窗。 維護大型的清除解決我們的數位相機可能是我們著眼於期間的最大挑戰之一，我們要發揮創意，讓它運作。 使用本機的輔助線是在管理當場，大有幫助，但我們也發現，使用登入，有時小型圓錐體或 bean 包和 — 標示我們 filming 空間已於合理範圍內有效，特別是因為我們只需要在每個位置取得短暫的錄影畫面時，才。 通常若要取得良好的擷取，最好是剛抵達極早期在早上，大部分的人顯示之前。

一些其他有用的擷取技術是直接來自於傳統的影片作法。 比方說，我們會使用色彩修正卡片上所有我們的數位相機和擷取的參照相片的紋理和更新版本，我們可能需要的物件。 

![顯示色彩修正卡片的馬丘比丘粗略剪。](images/rough-cut-machu-picchu-500px.png)

粗略剪下的 Pantheon 錄影畫面之前編結。

### <a name="processing-the-video"></a>處理的影片

擷取 360 ° 內容只是第一步 — 許多處理，才能將我們擷取原始的攝影機錄影畫面轉換成您在 HoloTour 中看到的最後一個資產。 一旦我們回到我們需要才會從 14 不同攝影機的視訊首頁摘要，並將它轉換成單一的連續視訊，具有最少的構件。 我們的藝術小組用來結合和 unicode 資料採用 polish 擷取錄影畫面的數種工具，我們在開發管線，以盡量的處理最佳化。 錄影畫面必須是已更正和移除令人分心的項目和成品，或新增的生命週期和移動所有的目標在於增強的實際上變成有該滿足感的補充隨身然後複合的拼接在一起，色彩。

![粗略剪下的 Pantheon 錄影畫面之前編結。](images/rough-cut-pantheon-500px.png)

粗略剪下的 Pantheon 錄影畫面之前編結。 


要編結的影片，我們會使用名為的工具[PTGui](http://www.ptgui.com/)和它整合到我們處理管線。 一部分的後續處理我們從我們的影片仍擷取框架，並找到尋找適合這些框架的其中一個連結模式。 我們接著會套用到自訂外掛程式，允許我們視訊的演出者微調及調整在之後的效果 中的複合 （compositing） 時，直接連結的模式，我們撰寫的這種模式。 

![螢幕擷取畫面的 PTGui 顯示已縫合的 Pantheon 錄影畫面。](images/stitching-tool-pantheon-500px.png)

螢幕擷取畫面的 PTGui 顯示已縫合的 Pantheon 錄影畫面。 


### <a name="video-playback"></a>視訊播放

錄影範圍的處理已完成，我們有無縫式的影片，但是它是富含之後大型 — 大約 8 K 解析。 解碼視訊會耗費資源，並有極少數的電腦可處理 8k 影片，所以接下來的挑戰在於尋找 HoloLens 上播放這部影片的方式。 我們開發出一些策略，以避免產生的成本，同時仍讓使用者感覺像是他們已檢視整個視訊解碼。

最簡單的最佳化是為了避免解碼的視訊不會變更大部分的組件。 我們撰寫工具，以識別每個場景中有少量或沒有影片的區域。 對於這些區域我們顯示的靜態影像，而不是解碼視訊每個畫面格。 若要達到這個目的，我們會分割成較小的區塊龐大的影片。

我們也會確保我們已解碼的每個像素，最有效地使用項目。 我們使用了壓縮技術以降低的影片; 大小已實驗我們將根據它會投射到; 幾何多邊形視訊的區域我們會調整 Uv，而且重新包含多少細節不同多邊形為基礎的影片。 這項工作的結果是什麼啟動為單一 8k 視訊轉換成看起來幾乎難以理解，除非經過適當地重新投射至場景的區塊數。 為遊戲開發人員了解紋理對應和 UV 封裝，這看起來可能很熟悉。 

![最佳化之前 Pantheon 完整檢視。](images/pantheon-before-optimization-500px.png) 

最佳化之前 Pantheon 完整檢視。 


![Pantheon，已處理的視訊播放的右半部。](images/pantheon-process-video-playback-500px.png) 

Pantheon，已處理的視訊播放的右半部。 


![單一影片的區域，最佳化並封裝後的範例。](images/single-video-region-after-optimization-500px.png) 

單一影片的區域，最佳化並封裝後的範例。 


我們使用的另一個訣竅是為了避免解碼不在主動檢視您的影片。 在 HoloTour，您只可以在任何給定的時刻看到完整的場景的一部分。 我們只會解碼內外短時間內欄位的視角 (FOV) 影片。 旋轉您的標頭時，我們開始播放視訊的區域，現在會以您的視野，並停止播放不再其內的。 大部分的人甚至不會發覺發生此問題，但如果您開啟快速，您會看到視訊將帶啟動第二個 — 在此同時，您會看到哪些再淡出回到影片準備就緒後的靜態影像。

要使用此策略我們開發了大量的視訊播放系統。 我們可以最佳化的低層級的播放程式碼才能視訊切換非常有效率。 此外，我們必須以特殊的方式，來使您能夠快速地在任何時間，以切換至任何視訊編碼我們的影片。 此播放管線花費大量的開發時間，讓我們在階段中，實作它。 我們開始的較簡易系統，比較沒有效率，但允許設計工具和演出者名稱，工作的經驗，和緩慢的增強功能的更強固的播放系統，讓我們能夠在最終的品質標準出貨。 這個最終的系統有我們 Unity 設定在場景和播放引擎的監視影片中所建立的自訂工具。

### <a name="recreating-near-space-objects-in-3d"></a>重新建立在 3D 空間接近物件

影片組成大多 HoloTour 中, 看到的內容，但有一些靠近您的位置，例如在 Piazza Navona 繪製 Pantheon 或您迅速在空照圖場景熱空氣球形文字說明外部流水的出現的 3D 物件。 這些 3D 物件很遠的地方是很重要，因為人為的深度認知會很鄰近，但不是很好。 我們能夠僥倖脫身影片的距離，但若要允許使用者其空間和人員覺得真的有四處巡察，鄰近的物件需要深度。 這個技術非常類似於就可能會看到在自然記錄博物館 — 圖片西洋鏡實體景觀、 工廠和動物 specimens 在前景，但 recedes 到巧妙地遮罩的遮光繪製在背景中。

某些物件會只是 3D 資產，我們建立並加入至場景方向，以增強體驗。 繪製和熱空氣球形文字說明屬於此分類，因為它們不存在時我們圖書館。 類似於遊戲資產，它們由建立我們小組的 3D 演出者並適當地處理的方式。 我們放在接近您的狀態，我們場景和遊戲引擎可以呈現它們兩個 HoloLens 顯示，讓它們顯示為 3D 物件。

其他資產，例如流水外部 Pantheon，存在於中的位置，其中我們拍攝視訊，並將這些物件從影片到 3D 的真實物件，我們要做一些事情。

首先，我們需要每個物件的其他資訊。 Filming 的位置，在我們的小組擷取大量的這些物件的參考影片，讓我們必須夠詳細準確地重新建立紋理的影像。 小組也執行[photogrammetry](https://en.wikipedia.org/wiki/Photogrammetry)掃描，這會建構從數十個 2D 影像、 3D 模型讓我們約略的物件模型在完美的規模。

當我們處理我們錄影畫面，稍後將會取代 3D 的表示法的物件會移除從視訊。 3D 資產是 photogrammetry 模型為基礎，但清除，並簡化了我們的演出者。 對於某些物件，我們可以使用視訊的部分 — 例如 water 上紋理流水 — 但大多數的流水現在是 3D 物件，可讓使用者察覺深度，並依其周圍體驗中的有限空間。 大幅有如下的附近的空間物件加入真實性的意義，並協助讓使用者在虛擬位置。 

![移除與流水 pantheon 錄影畫面。 它會取代 3D 資產。](images/object-removal-pantheon-500px.png)

移除與流水 pantheon 錄影畫面。 它會取代 3D 資產。


## <a name="final-thoughts"></a>結論

很明顯地，沒有更多 以建立此內容比此處討論的內容。 有幾個場景，我們要呼叫它們 「 不可能的檢視方塊 」，包括熱空氣的球形文字說明賽車和 gladiator 對抗競技場打，花了更具創意的方法中。 我們將會解決這些在未來的案例研究。

我們希望共用解決方案的更大的挑戰，我們必須在實際執行期間會很有幫助其他開發人員，且您已經使用這些技巧來建立您自己的沈浸式體驗的 HoloLens 靈感。 (如果您執行動作，請確定在 與我們分享[HoloLens 的應用程式開發論壇](https://forums.hololens.com/)！)

## <a name="about-the-authors"></a>關於作者

<table style="border:0">
<tr>
<td style="border:0" width="60px"> <img alt="David Haley" width="60" height="60" src="images/haley.png" /></td>
<td style="border:0" width="408"> <b>David Haley</b>是資深開發人員已了解有關相機 rig 和視訊播放比他認為可能來自 HoloTour 上運作。</td>
<td style="border:0" width="60px"> <img alt="Danny Askew" width="60" height="60" src="images/askew.png" /></td>
<td style="border:0" width="408"> <b>Danny Askew</b>是視訊演出者提出確定場 Rome 是越好，真是完美。</td>
</tr>
<tr>
<td style="border:0" width="60px"> <img alt="Jason Syltebo" width="60" height="60" src="images/syltebo.png" /></td>
<td style="border:0" width="408"> <b>Jason Syltebo</b>是確保您會遇到的每個您瀏覽，即使您回到過去的目的地 soundscape 音訊設計師。</td>
<td style="border:0" width="60px"> <img alt="Travis Steiner" width="60" height="60" src="images/steiner.png" /></td>
<td style="border:0" width="408"> <b>Travis 史坦</b>是設計主管人員研究 scouted 位置、 建立和車程計劃，並導向 filming 站台上。</td>
</tr>
</table>



## <a name="see-also"></a>另請參閱
* [影片：Microsoft HoloLens：HoloTour](https://www.youtube.com/watch?v=pLd9WPlaMpY)
