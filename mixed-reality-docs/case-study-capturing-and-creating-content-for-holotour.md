---
title: 案例研究-擷取及建立 HoloTour 的內容
description: Microsoft HoloLens 的 HoloTour 提供世界各地的圖示位置的擬真 3D 的個人導覽。
author: DannyAskew
ms.author: daaske
ms.date: 03/21/2018
ms.topic: article
keywords: 混合實境 HoloTour、 HoloLens、 Windows
ms.openlocfilehash: 6c9e5f44c439310883c8b0271187a7b2263b0854
ms.sourcegitcommit: 384b0087899cd835a3a965f75c6f6c607c9edd1b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/12/2019
ms.locfileid: "59591145"
---
# <a name="case-study---capturing-and-creating-content-for-holotour"></a><span data-ttu-id="bda47-104">案例研究-擷取及建立 HoloTour 的內容</span><span class="sxs-lookup"><span data-stu-id="bda47-104">Case study - Capturing and creating content for HoloTour</span></span>

<span data-ttu-id="bda47-105">Microsoft HoloLens 的 HoloTour 提供世界各地的圖示位置的擬真 3D 的個人導覽。</span><span class="sxs-lookup"><span data-stu-id="bda47-105">HoloTour for Microsoft HoloLens provides immersive 3D personal tours of iconic locations around the world.</span></span> <span data-ttu-id="bda47-106">為設計工具、 演出者、 產生者、 音訊設計師和努力找這個專案的開發人員，建立已知位置 convincingly 真正的 3D 轉譯需要具創意及技術的強項的。</span><span class="sxs-lookup"><span data-stu-id="bda47-106">As the designers, artists, producers, audio designers, and developers working on this project found out, creating a convincingly real 3D rendering of a well-known location takes a unique blend of creative and technological wizardry.</span></span>

## <a name="the-tech"></a><span data-ttu-id="bda47-107">技術</span><span class="sxs-lookup"><span data-stu-id="bda47-107">The tech</span></span>

<span data-ttu-id="bda47-108">與 HoloTour，我們想要讓其他人瀏覽一些全世界最令人讚嘆的目的地 — 像是[馬丘比丘遺跡](https://en.wikipedia.org/wiki/Machu_Picchu)秘魯或現代[Piazza Navona](https://en.wikipedia.org/wiki/Piazza_Navona)義大利-直接從自己客廳中。</span><span class="sxs-lookup"><span data-stu-id="bda47-108">With HoloTour, we wanted to make it possible for people to visit some of the world’s most amazing destinations—like the [ruins of Machu Picchu](https://en.wikipedia.org/wiki/Machu_Picchu) in Peru or the modern day [Piazza Navona](https://en.wikipedia.org/wiki/Piazza_Navona) in Italy—right from their own living rooms.</span></span> <span data-ttu-id="bda47-109">我們的小組會變得 HoloTour 目標 「 讓您覺得就真的了 」。</span><span class="sxs-lookup"><span data-stu-id="bda47-109">Our team made it the goal of HoloTour to “make you feel like you’re really there.”</span></span> <span data-ttu-id="bda47-110">需要不只是圖片或視訊體驗。</span><span class="sxs-lookup"><span data-stu-id="bda47-110">The experience needed to be more than just pictures or videos.</span></span> <span data-ttu-id="bda47-111">利用獨特的顯示、 追蹤和音訊的 HoloLens 的技術，我們相信我們幾乎可以傳輸您的其他位置。</span><span class="sxs-lookup"><span data-stu-id="bda47-111">By leveraging the unique display, tracking, and audio technology of HoloLens we believed we could virtually transport you to another place.</span></span> <span data-ttu-id="bda47-112">我們必須擷取景點、 聲音和我們瀏覽，然後再重新建立的我們的應用程式內的每個位置的 3d 幾何圖形。</span><span class="sxs-lookup"><span data-stu-id="bda47-112">We would need to capture the sights, sounds, and three-dimensional geometry of every location we visited and then recreate that within our app.</span></span>

<span data-ttu-id="bda47-113">若要這樣做，我們需要在 360 ° 攝影機 rig 方向的音訊擷取。</span><span class="sxs-lookup"><span data-stu-id="bda47-113">In order to do this, we needed a 360° camera rig with directional audio capture.</span></span> <span data-ttu-id="bda47-114">它擷取所需極高的解析度，如此錄影畫面看起來會務求時播放的 HoloLens 和相機需要彼此鄰近位置以減少連結的成品。</span><span class="sxs-lookup"><span data-stu-id="bda47-114">It needed to capture at extremely high resolution, so that the footage would look crisp when played back on a HoloLens and the cameras would need to be positioned close together in order to minimize stitching artifacts.</span></span> <span data-ttu-id="bda47-115">我們想要完整球面的涵蓋範圍，不只是沿著水平分割，但上方和下方您以及。</span><span class="sxs-lookup"><span data-stu-id="bda47-115">We wanted full spherical coverage, not just along the horizon, but above and below you as well.</span></span> <span data-ttu-id="bda47-116">Rig 可攜性，以便我們可以讓它在世界各地，也需要。</span><span class="sxs-lookup"><span data-stu-id="bda47-116">The rig also needed to be portable so that we could take it all over the world.</span></span> <span data-ttu-id="bda47-117">我們評估現成可用的選項，並發現它們只是沒有夠好，了解我們的願景 – 不管是因為解析、 成本及大小。</span><span class="sxs-lookup"><span data-stu-id="bda47-117">We evaluated available off-the-shelf options and realized they simply weren’t good enough to realize our vision – either because of resolution, cost, or size.</span></span> <span data-ttu-id="bda47-118">如果找不到相機 rig 滿足我們的需求，我們必須建立一個自己。</span><span class="sxs-lookup"><span data-stu-id="bda47-118">If we couldn’t find a camera rig that satisfied our needs, we would have to build one ourselves.</span></span>

### <a name="building-the-rig"></a><span data-ttu-id="bda47-119">建置 rig</span><span class="sxs-lookup"><span data-stu-id="bda47-119">Building the rig</span></span>

<span data-ttu-id="bda47-120">第一個版本 — 磁帶和 14 GoPro 相機源自黏貼，Velcro，d，過去 MacGyver 原本的。</span><span class="sxs-lookup"><span data-stu-id="bda47-120">The first version—made from cardboard, Velcro, duct tape, and 14 GoPro cameras—was something MacGyver would have been proud of.</span></span> <span data-ttu-id="bda47-121">完成之後檢閱從自訂的製造 rig 低階解決方案的所有項目，GoPro 數位相機都最後我們的最佳選項因為它們是小型且價格實惠，而且有方便使用的記憶體內部儲存體。</span><span class="sxs-lookup"><span data-stu-id="bda47-121">After reviewing everything from low-end solutions to custom manufactured rigs, GoPro cameras were ultimately the best option for us because they were small, affordable, and had easy-to-use memory storage.</span></span> <span data-ttu-id="bda47-122">衩怮是特別重要，因為它可讓我們將相機相當接近 — 觀景窗之間的小距離，將會較小的連結的成品。</span><span class="sxs-lookup"><span data-stu-id="bda47-122">The small form factor was especially important because it allowed us to place cameras fairly close together—the smaller the distance between cameras, the smaller the stitching artifacts will be.</span></span> <span data-ttu-id="bda47-123">我們唯一相機排列方式，讓我們能夠取得完整的球體涵蓋範圍*加上*以智慧方式對齊相機及平滑一些成品連結的程序期間不足，無法重疊。</span><span class="sxs-lookup"><span data-stu-id="bda47-123">Our unique camera arrangement allowed us to get full sphere coverage *plus* enough overlap to intelligently align cameras and smooth out some artifacts during the stitching process.</span></span>

<span data-ttu-id="bda47-124">善用[空間音效](spatial-sound.md)HoloLens 上的功能是建立 convincingly 真實人沉迷的體驗的關鍵。</span><span class="sxs-lookup"><span data-stu-id="bda47-124">Taking advantage of the [spatial sound](spatial-sound.md) capabilities on HoloLens is critical to creating a convincingly real immersive experience.</span></span> <span data-ttu-id="bda47-125">我們使用相機三腳架，它會擷取從四個方向我們觀景窗位置的聲音，請在下方平均分攤工作量的四個麥克風陣列提供足夠的資訊，我們的場景中建立空間的音效。</span><span class="sxs-lookup"><span data-stu-id="bda47-125">We used a four-microphone array situated beneath the cameras on the tripod, which would capture sound from the location of our camera in four directions, giving us enough information to create spatial sounds in our scenes.</span></span>

![我們的 360 ° 相機 rig 設定 filming Pantheon 之外。](images/camera-pantheon-200px.png)

<span data-ttu-id="bda47-127">我們的 360 ° 相機 rig 設定 filming Pantheon 之外。</span><span class="sxs-lookup"><span data-stu-id="bda47-127">Our 360° camera rig set up for filming outside the Pantheon.</span></span> 


<span data-ttu-id="bda47-128">我們測試出我們的自製 rig 採取最接近 「 西雅圖 」 Rattlesnake Ridge 擷取頂端遠足的景象。</span><span class="sxs-lookup"><span data-stu-id="bda47-128">We tested out our homemade rig by taking it up to Rattlesnake Ridge near Seattle, capturing the scenery at the top of the hike.</span></span> <span data-ttu-id="bda47-129">結果中，雖然大幅小於完美比您目前在 HoloTour 中看到的位置提供給我們，我們的 rig 設計已夠好，讓您覺得您真的有信心。</span><span class="sxs-lookup"><span data-stu-id="bda47-129">The result, though significantly less polished than the locations you see in HoloTour today, gave us confidence that our rig design was good enough to make you feel like you’re really there.</span></span>

<span data-ttu-id="bda47-130">我們從 Velcro 和黏貼升級我們 rig，3D 列印相機外罩為，而且購買 GoPro 數位相機，來簡化電池管理的外部電池組件。</span><span class="sxs-lookup"><span data-stu-id="bda47-130">We upgraded our rig from Velcro and cardboard to a 3D-printed camera housing and bought external battery packs for the GoPro cameras to simplify battery management.</span></span> <span data-ttu-id="bda47-131">然後我們又更廣泛的測試，到建立縮圖教學課程的城市人口 coast 和圖示的舊金山金門大橋橋接器的舊金山旅行。</span><span class="sxs-lookup"><span data-stu-id="bda47-131">We then did a more extensive test, traveling down to San Francisco to create a miniature tour of the city’s coast and the iconic Golden Gate bridge.</span></span> <span data-ttu-id="bda47-132">此相機 rig 是我們用來執行大部分的我們擷取您瀏覽 HoloTour 中的位置。</span><span class="sxs-lookup"><span data-stu-id="bda47-132">This camera rig is what we used for most of our captures of the locations you visit in HoloTour.</span></span>

![360 ° 相機 rig filming 馬丘比丘中。](images/camera-machu-pichu-500px.png)

<span data-ttu-id="bda47-134">360 ° 相機 rig filming 馬丘比丘中。</span><span class="sxs-lookup"><span data-stu-id="bda47-134">The 360° camera rig filming in Machu Picchu.</span></span> 


## <a name="behind-the-scenes"></a><span data-ttu-id="bda47-135">幕後</span><span class="sxs-lookup"><span data-stu-id="bda47-135">Behind the scenes</span></span>

<span data-ttu-id="bda47-136">之前 filming，我們需要找出哪些位置我們想要包含在我們虛擬之旅。</span><span class="sxs-lookup"><span data-stu-id="bda47-136">Before filming, we needed to figure out which locations we wanted to include on our virtual tour.</span></span> <span data-ttu-id="bda47-137">羅馬我們要出貨的第一個位置，我們想要取得正確的因此我們決定事先進行偵察車程。</span><span class="sxs-lookup"><span data-stu-id="bda47-137">Rome was the first location we intended to ship and we wanted to get it right, so we decided to do a scouting trip in advance.</span></span> <span data-ttu-id="bda47-138">我們已傳送一組六個的人員 — 包括美術人員、 設計師和產生者，如我們所考慮之網站的親自請瀏覽。</span><span class="sxs-lookup"><span data-stu-id="bda47-138">We sent a team of six people—including artists, designers, and producers—for an in-person visit to the sites we were considering.</span></span> <span data-ttu-id="bda47-139">該趟車程支付所花費的大約 9 天 – 旅行，其餘針對 filming 的 2.5。</span><span class="sxs-lookup"><span data-stu-id="bda47-139">The trip took about 9 days – 2.5 for travel, the rest for filming.</span></span> <span data-ttu-id="bda47-140">（如馬丘比丘我們選擇不要 scout 行程時，事先研究和預約緩衝區的幾天 filming。）</span><span class="sxs-lookup"><span data-stu-id="bda47-140">(For Machu Picchu we opted not to do a scout trip, researching in advance and booking a few days of buffer for filming.)</span></span>

<span data-ttu-id="bda47-141">在 羅馬，小組採取的每個區域的相片，並記下感興趣的事實，以及實際考量，例如有多麼難傳入每個位置及困難就到影片因為當場或限制。</span><span class="sxs-lookup"><span data-stu-id="bda47-141">While in Rome, the team took photos of each area and noted interesting facts as well as practical considerations, such as how hard it is to travel to each spot and how difficult it would be to film because of crowds or restrictions.</span></span> <span data-ttu-id="bda47-142">這乍聽之下像是假期，但很多工作。</span><span class="sxs-lookup"><span data-stu-id="bda47-142">This may sound like a vacation, but it’s a lot of work.</span></span> <span data-ttu-id="bda47-143">天在早上早期啟動，將會進入非停駐點到晚上。</span><span class="sxs-lookup"><span data-stu-id="bda47-143">Days started early in the morning and would go non-stop until evening.</span></span> <span data-ttu-id="bda47-144">每個晚上，錄影畫面在西雅圖，若要檢閱小組已上傳。</span><span class="sxs-lookup"><span data-stu-id="bda47-144">Each night, footage was uploaded for the team back in Seattle to review.</span></span> 

![在羅馬我們擷取小組。](images/holotour-filming-crew-rome-500px.jpg) 

<span data-ttu-id="bda47-146">在羅馬我們擷取小組。</span><span class="sxs-lookup"><span data-stu-id="bda47-146">Our capture crew in Rome.</span></span> 


<span data-ttu-id="bda47-147">Scout 車程已完成之後，最終的計劃已針對實際 filming。</span><span class="sxs-lookup"><span data-stu-id="bda47-147">After the scout trip was completed, a final plan was made for actual filming.</span></span> <span data-ttu-id="bda47-148">這需要，我們要到影片，哪一天，在和時間的詳細的清單。</span><span class="sxs-lookup"><span data-stu-id="bda47-148">This required a detailed list of where we were going to film, on what day, and at what time.</span></span> <span data-ttu-id="bda47-149">每天海外是昂貴的因此這些車程需要能夠有效率。</span><span class="sxs-lookup"><span data-stu-id="bda47-149">Every day overseas is expensive, so these trips needed to be efficient.</span></span> <span data-ttu-id="bda47-150">我們退費的輔助線和羅馬中的處理常式，以協助我們，並充分運用從每一天，若要在終止後的日出之前。</span><span class="sxs-lookup"><span data-stu-id="bda47-150">We booked guides and handlers in Rome to help us and fully used every day from before sunrise to after sunset.</span></span> <span data-ttu-id="bda47-151">我們要取得最佳的錄影畫面可能為了讓您覺得真正至關緊要。</span><span class="sxs-lookup"><span data-stu-id="bda47-151">We need to get the best footage possible in order to make you feel like you’re really there.</span></span>

### <a name="capturing-the-video"></a><span data-ttu-id="bda47-152">擷取影片</span><span class="sxs-lookup"><span data-stu-id="bda47-152">Capturing the video</span></span>

<span data-ttu-id="bda47-153">在擷取期間進行幾個簡單的東西，可以讓後置處理更輕鬆。</span><span class="sxs-lookup"><span data-stu-id="bda47-153">Doing a few simple things during capture can make post-processing much easier.</span></span> <span data-ttu-id="bda47-154">例如，每當您拉攏從多個相機的映像，您得到視覺成品因為每部相機有稍微不同的檢視。</span><span class="sxs-lookup"><span data-stu-id="bda47-154">For example, whenever you stitch together images from multiple cameras, you end up with visual artifacts because each camera has a slightly different view.</span></span> <span data-ttu-id="bda47-155">接近物件是相機、 較大的差異檢視中，以及連結的成品將會愈大。</span><span class="sxs-lookup"><span data-stu-id="bda47-155">The closer objects are to the camera, the larger the difference between the views, and the larger the stitching artifacts will be.</span></span> <span data-ttu-id="bda47-156">以下是簡單的方法，以視覺化方式檢視問題： 保留您捲動方塊呈現，並與只有一個眼睛看看它。</span><span class="sxs-lookup"><span data-stu-id="bda47-156">Here's an easy way to visualize the problem: hold your thumb up in front of your face and look at it with only one eye.</span></span> <span data-ttu-id="bda47-157">現在，請切換的眼睛。</span><span class="sxs-lookup"><span data-stu-id="bda47-157">Now switch eyes.</span></span> <span data-ttu-id="bda47-158">您會看到，拇指會移動相對於背景會出現。</span><span class="sxs-lookup"><span data-stu-id="bda47-158">You’ll see that your thumb appears to move relative to the background.</span></span> <span data-ttu-id="bda47-159">如果您保留拇指進一步遠離您的面孔，並重複進行實驗，拇指會移動較少。</span><span class="sxs-lookup"><span data-stu-id="bda47-159">If you hold your thumb further away from your face and repeat the experiment, your thumb will appear to move less.</span></span> <span data-ttu-id="bda47-160">這明顯移動是連結的問題類似我們面臨著：您看的例如我們的數位相機，看不到完全相同的映像，因為會以極小的距離分隔。</span><span class="sxs-lookup"><span data-stu-id="bda47-160">That apparent movement is similar to the stitching problem we faced: Your eyes, like our cameras, don’t see the exact same image because they are separated by a little distance.</span></span>

<span data-ttu-id="bda47-161">因為很容易避免同時 filming 加以更正後的處理中超出的最差的成品，我們會嘗試防止人員和項目很遠的地方就可以排除要連結特寫物件需要的試圖觀景窗。</span><span class="sxs-lookup"><span data-stu-id="bda47-161">Because it’s much easier to prevent the worst artifacts while filming than it is to correct them in post-processing, we tried to keep people and things far away from the camera in the hopes we could eliminate the need to stitch close-up objects.</span></span> <span data-ttu-id="bda47-162">維護大型的清除解決我們的數位相機可能是我們著眼於期間的最大挑戰之一，我們要發揮創意，讓它運作。</span><span class="sxs-lookup"><span data-stu-id="bda47-162">Maintaining a large clearing around our camera was probably one of the biggest challenges we had during shooting and we had to get creative to make it work.</span></span> <span data-ttu-id="bda47-163">使用本機的輔助線是在管理當場，大有幫助，但我們也發現，使用登入，有時小型圓錐體或 bean 包和 — 標示我們 filming 空間已於合理範圍內有效，特別是因為我們只需要在每個位置取得短暫的錄影畫面時，才。</span><span class="sxs-lookup"><span data-stu-id="bda47-163">Working with local guides was a huge help in managing crowds, but we also found that using signs—and sometimes small cones or bean bags—to mark our filming space was reasonably effective, especially since we only needed to get a short amount of footage at each location.</span></span> <span data-ttu-id="bda47-164">通常若要取得良好的擷取，最好是剛抵達極早期在早上，大部分的人顯示之前。</span><span class="sxs-lookup"><span data-stu-id="bda47-164">Often the best way to get a good capture was to just to arrive very early in the morning, before most people showed up.</span></span>

<span data-ttu-id="bda47-165">一些其他有用的擷取技術是直接來自於傳統的影片作法。</span><span class="sxs-lookup"><span data-stu-id="bda47-165">Some other useful capture techniques come straight from traditional film practices.</span></span> <span data-ttu-id="bda47-166">比方說，我們會使用色彩修正卡片上所有我們的數位相機和擷取的參照相片的紋理和更新版本，我們可能需要的物件。</span><span class="sxs-lookup"><span data-stu-id="bda47-166">For example, we used a color correction card on all of our cameras and captured reference photos of textures and objects we might need later.</span></span> 

![顯示色彩修正卡片的馬丘比丘粗略剪。](images/rough-cut-machu-picchu-500px.png)

<span data-ttu-id="bda47-168">粗略剪下的 Pantheon 錄影畫面之前編結。</span><span class="sxs-lookup"><span data-stu-id="bda47-168">A rough cut of Pantheon footage before stitching.</span></span>

### <a name="processing-the-video"></a><span data-ttu-id="bda47-169">處理的影片</span><span class="sxs-lookup"><span data-stu-id="bda47-169">Processing the video</span></span>

<span data-ttu-id="bda47-170">擷取 360 ° 內容只是第一步 — 許多處理，才能將我們擷取原始的攝影機錄影畫面轉換成您在 HoloTour 中看到的最後一個資產。</span><span class="sxs-lookup"><span data-stu-id="bda47-170">Capturing 360° content is only the first step—a lot of processing is needed to convert the raw camera footage we captured into the final assets you see in HoloTour.</span></span> <span data-ttu-id="bda47-171">一旦我們回到我們需要才會從 14 不同攝影機的視訊首頁摘要，並將它轉換成單一的連續視訊，具有最少的構件。</span><span class="sxs-lookup"><span data-stu-id="bda47-171">Once we were back home we needed to take the video from 14 different camera feeds and turn it into a single continuous video with minimal artifacts.</span></span> <span data-ttu-id="bda47-172">我們的藝術小組用來結合和 unicode 資料採用 polish 擷取錄影畫面的數種工具，我們在開發管線，以盡量的處理最佳化。</span><span class="sxs-lookup"><span data-stu-id="bda47-172">Our art team used a number of tools to combine and polish the captured footage and we developed a pipeline to optimize the processing as much as possible.</span></span> <span data-ttu-id="bda47-173">錄影畫面必須是已更正和移除令人分心的項目和成品，或新增的生命週期和移動所有的目標在於增強的實際上變成有該滿足感的補充隨身然後複合的拼接在一起，色彩。</span><span class="sxs-lookup"><span data-stu-id="bda47-173">The footage had to be stitched together, color corrected, and then composited to remove distracting elements and artifacts or to add supplemental pockets of life and motion, all with the goal to enhance that feeling of actually being there.</span></span>

![粗略剪下的 Pantheon 錄影畫面之前編結。](images/rough-cut-pantheon-500px.png)

<span data-ttu-id="bda47-175">粗略剪下的 Pantheon 錄影畫面之前編結。</span><span class="sxs-lookup"><span data-stu-id="bda47-175">A rough cut of Pantheon footage before stitching.</span></span> 


<span data-ttu-id="bda47-176">要編結的影片，我們會使用名為的工具[PTGui](http://www.ptgui.com/)和它整合到我們處理管線。</span><span class="sxs-lookup"><span data-stu-id="bda47-176">To stitch the videos together, we used a tool called [PTGui](http://www.ptgui.com/) and integrated it into our processing pipeline.</span></span> <span data-ttu-id="bda47-177">一部分的後續處理我們從我們的影片仍擷取框架，並找到尋找適合這些框架的其中一個連結模式。</span><span class="sxs-lookup"><span data-stu-id="bda47-177">As part of post-processing we extracted still frames from our videos and found a stitching pattern that looked good for one of those frames.</span></span> <span data-ttu-id="bda47-178">我們接著會套用到自訂外掛程式，允許我們視訊的演出者微調及調整在之後的效果 中的複合 （compositing） 時，直接連結的模式，我們撰寫的這種模式。</span><span class="sxs-lookup"><span data-stu-id="bda47-178">We then applied that pattern to a custom plugin we wrote that allowed our video artists to fine tune and tweak the stitching pattern directly while compositing in After Effects.</span></span> 

![螢幕擷取畫面的 PTGui 顯示已縫合的 Pantheon 錄影畫面。](images/stitching-tool-pantheon-500px.png)

<span data-ttu-id="bda47-180">螢幕擷取畫面的 PTGui 顯示已縫合的 Pantheon 錄影畫面。</span><span class="sxs-lookup"><span data-stu-id="bda47-180">Screenshot of PTGui showing the stitched Pantheon footage.</span></span> 


### <a name="video-playback"></a><span data-ttu-id="bda47-181">視訊播放</span><span class="sxs-lookup"><span data-stu-id="bda47-181">Video playback</span></span>

<span data-ttu-id="bda47-182">錄影範圍的處理已完成，我們有無縫式的影片，但是它是富含之後大型 — 大約 8 K 解析。</span><span class="sxs-lookup"><span data-stu-id="bda47-182">After processing of the footage is completed, we have a seamless video but it’s extraordinarily large—around 8K resolution.</span></span> <span data-ttu-id="bda47-183">解碼視訊會耗費資源，並有極少數的電腦可處理 8k 影片，所以接下來的挑戰在於尋找 HoloLens 上播放這部影片的方式。</span><span class="sxs-lookup"><span data-stu-id="bda47-183">Decoding video is expensive and there are very few computers that can handle an 8K video so the next challenge was finding a way to play this video back on HoloLens.</span></span> <span data-ttu-id="bda47-184">我們開發出一些策略，以避免產生的成本，同時仍讓使用者感覺像是他們已檢視整個視訊解碼。</span><span class="sxs-lookup"><span data-stu-id="bda47-184">We developed a number of strategies to avoid the cost of decoding while still making the user feel like they were viewing the entire video.</span></span>

<span data-ttu-id="bda47-185">最簡單的最佳化是為了避免解碼的視訊不會變更大部分的組件。</span><span class="sxs-lookup"><span data-stu-id="bda47-185">The easiest optimization is to avoid decoding parts of the video that don’t change much.</span></span> <span data-ttu-id="bda47-186">我們撰寫工具，以識別每個場景中有少量或沒有影片的區域。</span><span class="sxs-lookup"><span data-stu-id="bda47-186">We wrote a tool to identify areas in each scene that have little or no motion.</span></span> <span data-ttu-id="bda47-187">對於這些區域我們顯示的靜態影像，而不是解碼視訊每個畫面格。</span><span class="sxs-lookup"><span data-stu-id="bda47-187">For those regions we show a static image rather than decoding a video each frame.</span></span> <span data-ttu-id="bda47-188">若要達到這個目的，我們會分割成較小的區塊龐大的影片。</span><span class="sxs-lookup"><span data-stu-id="bda47-188">To make this possible, we divided up the massive video into much smaller chunks.</span></span>

<span data-ttu-id="bda47-189">我們也會確保我們已解碼的每個像素，最有效地使用項目。</span><span class="sxs-lookup"><span data-stu-id="bda47-189">We also made sure that every pixel we decoded was used most effectively.</span></span> <span data-ttu-id="bda47-190">我們使用了壓縮技術以降低的影片; 大小已實驗我們將根據它會投射到; 幾何多邊形視訊的區域我們會調整 Uv，而且重新包含多少細節不同多邊形為基礎的影片。</span><span class="sxs-lookup"><span data-stu-id="bda47-190">We experimented with compression techniques to lower the size of the video; we split the video regions according to the polygons of the geometry it would be projected onto; we adjusted UVs and repacked the videos based on how much detail different polygons included.</span></span> <span data-ttu-id="bda47-191">這項工作的結果是什麼啟動為單一 8k 視訊轉換成看起來幾乎難以理解，除非經過適當地重新投射至場景的區塊數。</span><span class="sxs-lookup"><span data-stu-id="bda47-191">The result of this work is that what started as a single 8k video turned into many chunks that look almost unintelligible until they are properly re-projected into the scene.</span></span> <span data-ttu-id="bda47-192">為遊戲開發人員了解紋理對應和 UV 封裝，這看起來可能很熟悉。</span><span class="sxs-lookup"><span data-stu-id="bda47-192">For a game developer who understands texture mapping and UV packing, this will probably look familiar.</span></span> 

![最佳化之前 Pantheon 完整檢視。](images/pantheon-before-optimization-500px.png) 

<span data-ttu-id="bda47-194">最佳化之前 Pantheon 完整檢視。</span><span class="sxs-lookup"><span data-stu-id="bda47-194">A full view of the Pantheon before optimizations.</span></span> 


![Pantheon，已處理的視訊播放的右半部。](images/pantheon-process-video-playback-500px.png) 

<span data-ttu-id="bda47-196">Pantheon，已處理的視訊播放的右半部。</span><span class="sxs-lookup"><span data-stu-id="bda47-196">The right half of the Pantheon, processed for video playback.</span></span> 


![單一影片的區域，最佳化並封裝後的範例。](images/single-video-region-after-optimization-500px.png) 

<span data-ttu-id="bda47-198">單一影片的區域，最佳化並封裝後的範例。</span><span class="sxs-lookup"><span data-stu-id="bda47-198">Example of a single video region after optimization and packing.</span></span> 


<span data-ttu-id="bda47-199">我們使用的另一個訣竅是為了避免解碼不在主動檢視您的影片。</span><span class="sxs-lookup"><span data-stu-id="bda47-199">Another trick we used was to avoid decoding video you aren’t actively viewing.</span></span> <span data-ttu-id="bda47-200">在 HoloTour，您只可以在任何給定的時刻看到完整的場景的一部分。</span><span class="sxs-lookup"><span data-stu-id="bda47-200">While in HoloTour, you can only see part of the full scene at any given moment.</span></span> <span data-ttu-id="bda47-201">我們只會解碼內外短時間內欄位的視角 (FOV) 影片。</span><span class="sxs-lookup"><span data-stu-id="bda47-201">We only decode videos within or shortly outside of your field of view (FOV).</span></span> <span data-ttu-id="bda47-202">旋轉您的標頭時，我們開始播放視訊的區域，現在會以您的視野，並停止播放不再其內的。</span><span class="sxs-lookup"><span data-stu-id="bda47-202">As you rotate your head, we start playing the regions of the video that are now in your FOV and stop playing ones that are no longer within it.</span></span> <span data-ttu-id="bda47-203">大部分的人甚至不會發覺發生此問題，但如果您開啟快速，您會看到視訊將帶啟動第二個 — 在此同時，您會看到哪些再淡出回到影片準備就緒後的靜態影像。</span><span class="sxs-lookup"><span data-stu-id="bda47-203">Most people won’t even notice this is happening, but if you turn around rapidly, you’ll see the video takes a second to start— in the meantime you’ll see a static image which then fades back to video once it’s ready.</span></span>

<span data-ttu-id="bda47-204">要使用此策略我們開發了大量的視訊播放系統。</span><span class="sxs-lookup"><span data-stu-id="bda47-204">To make this strategy work we developed an extensive video playback system.</span></span> <span data-ttu-id="bda47-205">我們可以最佳化的低層級的播放程式碼才能視訊切換非常有效率。</span><span class="sxs-lookup"><span data-stu-id="bda47-205">We optimized the low level playback code in order to make video switching extremely efficient.</span></span> <span data-ttu-id="bda47-206">此外，我們必須以特殊的方式，來使您能夠快速地在任何時間，以切換至任何視訊編碼我們的影片。</span><span class="sxs-lookup"><span data-stu-id="bda47-206">Additionally, we had to encode our videos in a special way to make it possible to rapidly switch to any video at any time.</span></span> <span data-ttu-id="bda47-207">此播放管線花費大量的開發時間，讓我們在階段中，實作它。</span><span class="sxs-lookup"><span data-stu-id="bda47-207">This playback pipeline took a significant amount of development time so we implemented it in stages.</span></span> <span data-ttu-id="bda47-208">我們開始的較簡易系統，比較沒有效率，但允許設計工具和演出者名稱，工作的經驗，和緩慢的增強功能的更強固的播放系統，讓我們能夠在最終的品質標準出貨。</span><span class="sxs-lookup"><span data-stu-id="bda47-208">We started with a simpler system that was less efficient, but allowed designers and artists to work on the experience, and slowly improved it to a more robust playback system that allowed us to ship at the final quality bar.</span></span> <span data-ttu-id="bda47-209">這個最終的系統有我們 Unity 設定在場景和播放引擎的監視影片中所建立的自訂工具。</span><span class="sxs-lookup"><span data-stu-id="bda47-209">This final system had custom tools we created within Unity to set up the video within the scene and monitor the playback engine.</span></span>

### <a name="recreating-near-space-objects-in-3d"></a><span data-ttu-id="bda47-210">重新建立在 3D 空間接近物件</span><span class="sxs-lookup"><span data-stu-id="bda47-210">Recreating near-space objects in 3D</span></span>

<span data-ttu-id="bda47-211">影片組成大多 HoloTour 中, 看到的內容，但有一些靠近您的位置，例如在 Piazza Navona 繪製 Pantheon 或您迅速在空照圖場景熱空氣球形文字說明外部流水的出現的 3D 物件。</span><span class="sxs-lookup"><span data-stu-id="bda47-211">Videos make up the majority of what you see in HoloTour, but there are a number of 3D objects that appear close to you, such as the painting in Piazza Navona, the fountain outside the Pantheon, or the hot air balloon you stand in for aerial scenes.</span></span> <span data-ttu-id="bda47-212">這些 3D 物件很遠的地方是很重要，因為人為的深度認知會很鄰近，但不是很好。</span><span class="sxs-lookup"><span data-stu-id="bda47-212">These 3D objects are important because human depth perception is very good up close, but not very good far away.</span></span> <span data-ttu-id="bda47-213">我們能夠僥倖脫身影片的距離，但若要允許使用者其空間和人員覺得真的有四處巡察，鄰近的物件需要深度。</span><span class="sxs-lookup"><span data-stu-id="bda47-213">We can get away with video in the distance, but to allow users to walk around their space and feel like they’re really there, nearby objects need depth.</span></span> <span data-ttu-id="bda47-214">這個技術非常類似於就可能會看到在自然記錄博物館 — 圖片西洋鏡實體景觀、 工廠和動物 specimens 在前景，但 recedes 到巧妙地遮罩的遮光繪製在背景中。</span><span class="sxs-lookup"><span data-stu-id="bda47-214">This technique is similar to the sort of thing you might see in a natural history museum—picture a diorama that has physical landscaping, plants, and animal specimens in the foreground, but recedes into a cleverly masked matte painting in the background.</span></span>

<span data-ttu-id="bda47-215">某些物件會只是 3D 資產，我們建立並加入至場景方向，以增強體驗。</span><span class="sxs-lookup"><span data-stu-id="bda47-215">Some objects are simply 3D assets we created and added to the scene to enhance the experience.</span></span> <span data-ttu-id="bda47-216">繪製和熱空氣球形文字說明屬於此分類，因為它們不存在時我們圖書館。</span><span class="sxs-lookup"><span data-stu-id="bda47-216">The painting and the hot air balloon fall into this category because they weren’t present when we filmed.</span></span> <span data-ttu-id="bda47-217">類似於遊戲資產，它們由建立我們小組的 3D 演出者並適當地處理的方式。</span><span class="sxs-lookup"><span data-stu-id="bda47-217">Similar to game assets, they were created by a 3D artist on our team and textured appropriately.</span></span> <span data-ttu-id="bda47-218">我們放在接近您的狀態，我們場景和遊戲引擎可以呈現它們兩個 HoloLens 顯示，讓它們顯示為 3D 物件。</span><span class="sxs-lookup"><span data-stu-id="bda47-218">We place these in our scenes near where you stand, and the game engine can render them to the two HoloLens displays so that they appear as a 3D object.</span></span>

<span data-ttu-id="bda47-219">其他資產，例如流水外部 Pantheon，存在於中的位置，其中我們拍攝視訊，並將這些物件從影片到 3D 的真實物件，我們要做一些事情。</span><span class="sxs-lookup"><span data-stu-id="bda47-219">Other assets, like the fountain outside the Pantheon, are real objects that exist in the locations where we're shooting video, but to bring these objects out of the video and into 3D, we have to do a number of things.</span></span>

<span data-ttu-id="bda47-220">首先，我們需要每個物件的其他資訊。</span><span class="sxs-lookup"><span data-stu-id="bda47-220">First, we need additional information about each object.</span></span> <span data-ttu-id="bda47-221">Filming 的位置，在我們的小組擷取大量的這些物件的參考影片，讓我們必須夠詳細準確地重新建立紋理的影像。</span><span class="sxs-lookup"><span data-stu-id="bda47-221">While on location for filming, our team captured a lot of reference footage of these objects so that we would have enough detailed images to accurately recreate the textures.</span></span> <span data-ttu-id="bda47-222">小組也執行[photogrammetry](https://en.wikipedia.org/wiki/Photogrammetry)掃描，這會建構從數十個 2D 影像、 3D 模型讓我們約略的物件模型在完美的規模。</span><span class="sxs-lookup"><span data-stu-id="bda47-222">The team also performed a [photogrammetry](https://en.wikipedia.org/wiki/Photogrammetry) scan, which constructs a 3D model from dozens of 2D images, giving us a rough model of the object at perfect scale.</span></span>

<span data-ttu-id="bda47-223">當我們處理我們錄影畫面，稍後將會取代 3D 的表示法的物件會移除從視訊。</span><span class="sxs-lookup"><span data-stu-id="bda47-223">As we process our footage, objects that will later be replaced with a 3D representation are removed from the video.</span></span> <span data-ttu-id="bda47-224">3D 資產是 photogrammetry 模型為基礎，但清除，並簡化了我們的演出者。</span><span class="sxs-lookup"><span data-stu-id="bda47-224">The 3D asset is based on the photogrammetry model but cleaned up and simplified by our artists.</span></span> <span data-ttu-id="bda47-225">對於某些物件，我們可以使用視訊的部分 — 例如 water 上紋理流水 — 但大多數的流水現在是 3D 物件，可讓使用者察覺深度，並依其周圍體驗中的有限空間。</span><span class="sxs-lookup"><span data-stu-id="bda47-225">For some objects, we can use parts of the video—such as the water texture on the fountain—but most of the fountain is now a 3D object, which allows users to perceive depth and walk around it in a limited space in the experience.</span></span> <span data-ttu-id="bda47-226">大幅有如下的附近的空間物件加入真實性的意義，並協助讓使用者在虛擬位置。</span><span class="sxs-lookup"><span data-stu-id="bda47-226">Having near-space objects like this greatly adds to the sense of realism and helps to ground the users in the virtual location.</span></span> 

![移除與流水 pantheon 錄影畫面。](images/object-removal-pantheon-500px.png)

<span data-ttu-id="bda47-229">移除與流水 pantheon 錄影畫面。</span><span class="sxs-lookup"><span data-stu-id="bda47-229">Pantheon footage with the fountain removed.</span></span> <span data-ttu-id="bda47-230">它會取代 3D 資產。</span><span class="sxs-lookup"><span data-stu-id="bda47-230">It will be replaced with a 3D asset.</span></span>


## <a name="final-thoughts"></a><span data-ttu-id="bda47-231">結論</span><span class="sxs-lookup"><span data-stu-id="bda47-231">Final thoughts</span></span>

<span data-ttu-id="bda47-232">很明顯地，沒有更多 以建立此內容比此處討論的內容。</span><span class="sxs-lookup"><span data-stu-id="bda47-232">Obviously, there was more to creating this content than what we've discussed here.</span></span> <span data-ttu-id="bda47-233">有幾個場景，我們要呼叫它們 「 不可能的檢視方塊 」，包括熱空氣的球形文字說明賽車和 gladiator 對抗競技場打，花了更具創意的方法中。</span><span class="sxs-lookup"><span data-stu-id="bda47-233">There are a few scenes—we like to call them "impossible perspectives"—including the hot air balloon ride and the gladiator fight in the Colosseum, which took a more creative approach.</span></span> <span data-ttu-id="bda47-234">我們將會解決這些在未來的案例研究。</span><span class="sxs-lookup"><span data-stu-id="bda47-234">We'll address these in a future case study.</span></span>

<span data-ttu-id="bda47-235">我們希望共用解決方案的更大的挑戰，我們必須在實際執行期間會很有幫助其他開發人員，且您已經使用這些技巧來建立您自己的沈浸式體驗的 HoloLens 靈感。</span><span class="sxs-lookup"><span data-stu-id="bda47-235">We hope that sharing solutions to some of the bigger challenges we had during production is helpful to other developers and that you're inspired to use some of these techniques to create your own immersive experiences for HoloLens.</span></span> <span data-ttu-id="bda47-236">(如果您執行動作，請確定在 與我們分享[HoloLens 的應用程式開發論壇](https://forums.hololens.com/)！)</span><span class="sxs-lookup"><span data-stu-id="bda47-236">(And if you do, please make sure to share it with us on the [HoloLens App Development forum](https://forums.hololens.com/)!)</span></span>

## <a name="about-the-authors"></a><span data-ttu-id="bda47-237">關於作者</span><span class="sxs-lookup"><span data-stu-id="bda47-237">About the authors</span></span>

<table style="border:0">
<tr>
<td style="border:0" width="60px"> <img alt="David Haley" width="60" height="60" src="images/haley.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="bda47-238"><b>David Haley</b>是資深開發人員已了解有關相機 rig 和視訊播放比他認為可能來自 HoloTour 上運作。</span><span class="sxs-lookup"><span data-stu-id="bda47-238"><b>David Haley</b> is a Senior Developer who learned more about camera rigs and video playback than he thought possible from working on HoloTour.</span></span></td>
<td style="border:0" width="60px"> <img alt="Danny Askew" width="60" height="60" src="images/askew.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="bda47-239"><b>Danny Askew</b>是視訊演出者提出確定場 Rome 是越好，真是完美。</span><span class="sxs-lookup"><span data-stu-id="bda47-239"><b>Danny Askew</b> is a Video Artist who made sure your journey through Rome was as flawless as possible.</span></span></td>
</tr>
<tr>
<td style="border:0" width="60px"> <img alt="Jason Syltebo" width="60" height="60" src="images/syltebo.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="bda47-240"><b>Jason Syltebo</b>是確保您會遇到的每個您瀏覽，即使您回到過去的目的地 soundscape 音訊設計師。</span><span class="sxs-lookup"><span data-stu-id="bda47-240"><b>Jason Syltebo</b> is an Audio Designer who made sure you could experience the soundscape of every destination you visit, even when you go back in time.</span></span></td>
<td style="border:0" width="60px"> <img alt="Travis Steiner" width="60" height="60" src="images/steiner.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="bda47-241"><b>Travis 史坦</b>是設計主管人員研究 scouted 位置、 建立和車程計劃，並導向 filming 站台上。</span><span class="sxs-lookup"><span data-stu-id="bda47-241"><b>Travis Steiner</b> is a Design Director who researched and scouted locations, created trip plans, and directed filming on site.</span></span></td>
</tr>
</table>



## <a name="see-also"></a><span data-ttu-id="bda47-242">另請參閱</span><span class="sxs-lookup"><span data-stu-id="bda47-242">See also</span></span>
* [<span data-ttu-id="bda47-243">影片：Microsoft HoloLens：HoloTour</span><span class="sxs-lookup"><span data-stu-id="bda47-243">Video: Microsoft HoloLens: HoloTour</span></span>](https://www.youtube.com/watch?v=pLd9WPlaMpY)
