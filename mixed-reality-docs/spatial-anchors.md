---
title: 空間的錨點
description: 最佳作法來呈現穩定全像投影中使用空間的錨點的詳細資訊。
author: thetuvix
ms.author: alexturn
ms.date: 02/24/2019
ms.topic: article
ms.localizationpriority: high
keywords: 座標系統、 空間座標系統、 全球規模、 全球、 小數位數、 位置、 方向、 錨點、 空間的錨點、 世界鎖定時，世界鎖定的持續性，共用
ms.openlocfilehash: 16165194d040ad22f7885897eddcc65cf9dcaec3
ms.sourcegitcommit: 1c0fbee8fa887525af6ed92174edc42c05b25f90
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 05/16/2019
ms.locfileid: "65730854"
---
# <a name="spatial-anchors"></a><span data-ttu-id="4542d-104">空間的錨點</span><span class="sxs-lookup"><span data-stu-id="4542d-104">Spatial anchors</span></span>

<span data-ttu-id="4542d-105">空間的錨點表示系統應該追蹤的一段時間的世界中很重要的一點。</span><span class="sxs-lookup"><span data-stu-id="4542d-105">A spatial anchor represents an important point in the world that the system should keep track of over time.</span></span> <span data-ttu-id="4542d-106">每個錨點已[座標系統](coordinate-systems.md)的參考框架，以確保錨定全像投影保持精確地在放置或如有需要相對於其他的錨點，可調整的情況。</span><span class="sxs-lookup"><span data-stu-id="4542d-106">Each anchor has a [coordinate system](coordinate-systems.md) that adjusts as needed, relative to other anchors or frames of reference, in order to ensure that anchored holograms stay precisely in place.</span></span>  <span data-ttu-id="4542d-107">轉譯錨點的座標系統中全像圖可讓您在任何時候最精確的設定位置來進行該全像圖。</span><span class="sxs-lookup"><span data-stu-id="4542d-107">Rendering a hologram in an anchor's coordinate system gives you the most accurate positioning for that hologram at any given time.</span></span> <span data-ttu-id="4542d-108">這個代價小幅度的調整一段時間至全像的位置，因為系統持續將它移回至相對於真實世界的地方。</span><span class="sxs-lookup"><span data-stu-id="4542d-108">This comes at the cost of small adjustments over time to the hologram's position, as the system continually moves it back into place relative to the real world.</span></span>

<span data-ttu-id="4542d-109">您也可以保存，並跨應用程式工作階段和跨裝置共用空間的錨點：</span><span class="sxs-lookup"><span data-stu-id="4542d-109">You can also persist and share spatial anchors across app sessions and across devices:</span></span>
* <span data-ttu-id="4542d-110">藉由將本機空間錨點儲存到磁碟和更新版本重新的載入，您的應用程式可以理解真實世界中相同的位置，在單一的 HoloLens 裝置上的多個應用程式工作階段之間。</span><span class="sxs-lookup"><span data-stu-id="4542d-110">By saving local spatial anchors to disk and loading them back later, your app can reason about the same location in the real world across multiple app sessions on a single HoloLens device.</span></span>
* <span data-ttu-id="4542d-111">藉由使用<a href="https://docs.microsoft.com/azure/spatial-anchors/overview" target="_blank">Azure 空間的錨點</a>若要建立雲端錨點，您的應用程式可以跨多個 HoloLens、 iOS 和 Android 裝置共用空間的錨點。</span><span class="sxs-lookup"><span data-stu-id="4542d-111">By using <a href="https://docs.microsoft.com/azure/spatial-anchors/overview" target="_blank">Azure Spatial Anchors</a> to create a cloud anchor, your app can share a spatial anchor across multiple HoloLens, iOS and Android devices.</span></span> <span data-ttu-id="4542d-112">擁有呈現雷射，使用相同的空間錨點的每個裝置，所有的使用者會看到全像圖會出現在真實世界中相同的位置。</span><span class="sxs-lookup"><span data-stu-id="4542d-112">By having each device render a hologram using the same spatial anchor, all users will see the hologram appear at the same place in the real world.</span></span>  <span data-ttu-id="4542d-113">這可讓您即時分享經驗。</span><span class="sxs-lookup"><span data-stu-id="4542d-113">This allows for real-time shared experiences.</span></span>
* <span data-ttu-id="4542d-114">您也可以使用<a href="https://docs.microsoft.com/azure/spatial-anchors/overview" target="_blank">Azure 空間的錨點</a>非同步闀持續性跨 HoloLens、 iOS 和 Android 裝置。</span><span class="sxs-lookup"><span data-stu-id="4542d-114">You can also use <a href="https://docs.microsoft.com/azure/spatial-anchors/overview" target="_blank">Azure Spatial Anchors</a> for asynchronous hologram persistence across HoloLens, iOS and Android devices.</span></span>  <span data-ttu-id="4542d-115">藉由共用持久的雲端空間錨點，多個裝置可以觀察相同的保存全像經過一段時間，即使這些裝置不存在一起在相同的時間。</span><span class="sxs-lookup"><span data-stu-id="4542d-115">By sharing a durable cloud spatial anchor, multiple devices can observe the same persisted hologram over time, even if those devices are not present together at the same time.</span></span>

<span data-ttu-id="4542d-116">針對常設-小數位數或聊天室擴展體驗將會維持在 5 公尺直徑內的行動網卡桌面耳機，您通常只可以使用[階段參照](coordinate-systems.md#stage-frame-of-reference)而不空間的錨點，提供您單一用於轉譯的所有內容的座標系統。</span><span class="sxs-lookup"><span data-stu-id="4542d-116">For standing-scale or room-scale experiences for tethered desktop headsets that will stay within a 5-meter diameter, you can usually just use the [stage frame of reference](coordinate-systems.md#stage-frame-of-reference) instead of spatial anchors, providing you a single coordinate system in which to render all content.</span></span> <span data-ttu-id="4542d-117">不過，如果您的應用程式想要讓超過 5 公尺走廊 HoloLens 上的使用者，則可能作業系統在整個的建築物、 樓層您必須空間的錨點，以保留內容穩定。</span><span class="sxs-lookup"><span data-stu-id="4542d-117">However, if your app intends to let users wander beyond 5 meters on HoloLens, perhaps operating throughout an entire floor of a building, you'll need spatial anchors to keep content stable.</span></span>

<span data-ttu-id="4542d-118">適用於全像投影應該保持固定在世界中，一旦放錨點是空間的錨點時，它無法移動。</span><span class="sxs-lookup"><span data-stu-id="4542d-118">While spatial anchors are great for holograms that should remain fixed in the world, once an anchor is placed, it can't be moved.</span></span> <span data-ttu-id="4542d-119">有更適合動態全像投影，以及使用者應標記的錨點的替代方案。</span><span class="sxs-lookup"><span data-stu-id="4542d-119">There are alternatives to anchors that are more appropriate for dynamic holograms that should tag along with the user.</span></span> <span data-ttu-id="4542d-120">最好的方式是使用靜態參考座標系 （Unity 的全局座標為基礎） 或附加的畫面格的參考動態全像投影的位置。</span><span class="sxs-lookup"><span data-stu-id="4542d-120">It is best to position dynamic holograms using a stationary frame of reference (the foundation for Unity's world coordinates) or an attached frame of reference.</span></span>

## <a name="best-practices"></a><span data-ttu-id="4542d-121">最佳作法</span><span class="sxs-lookup"><span data-stu-id="4542d-121">Best practices</span></span>

<span data-ttu-id="4542d-122">這些空間的錨點指導方針可協助您呈現穩定全像投影，以精確追蹤真實的世界。</span><span class="sxs-lookup"><span data-stu-id="4542d-122">These spatial anchor guidelines will help you render stable holograms that accurately track the real world.</span></span>

### <a name="create-spatial-anchors-where-users-place-them"></a><span data-ttu-id="4542d-123">建立使用者放置它們的空間錨點</span><span class="sxs-lookup"><span data-stu-id="4542d-123">Create spatial anchors where users place them</span></span>

<span data-ttu-id="4542d-124">大部分的情況下，使用者應該明確地放置空間的錨點的項目。</span><span class="sxs-lookup"><span data-stu-id="4542d-124">Most of the time, users should be the ones explicitly placing spatial anchors.</span></span>

<span data-ttu-id="4542d-125">比方說，在 HoloLens，應用程式有交集的使用者[視線](gaze.md)與光線[空間對應](spatial-mapping.md)網狀結構，讓使用者決定雷射的位置。</span><span class="sxs-lookup"><span data-stu-id="4542d-125">For example, on HoloLens, an app can intersect the user's [gaze](gaze.md) ray with the [spatial mapping](spatial-mapping.md) mesh to let the user decide where to place a hologram.</span></span> <span data-ttu-id="4542d-126">當使用者點選要放置該全像圖時，建立空間的錨點交集處，並接著將全像圖放在該錨點的座標系統的原點。</span><span class="sxs-lookup"><span data-stu-id="4542d-126">When the user taps to place that hologram, create a spatial anchor at the intersection point and then place the hologram at the origin of that anchor's coordinate system.</span></span>

<span data-ttu-id="4542d-127">本機空間錨點進行，若要建立，高效能和系統會將其內部的資料如果多個錨點可以共用其基礎的感應器資料。</span><span class="sxs-lookup"><span data-stu-id="4542d-127">Local spatial anchors are easy and performant to create, and the system will consolidate their internal data if multiple anchors can share their underlying sensor data.</span></span> <span data-ttu-id="4542d-128">通常，您應該建立新本機空間錨點的使用者明確地將，每個全像下面所述，例如全像投影的固定群組的情況除外。</span><span class="sxs-lookup"><span data-stu-id="4542d-128">You should typically create a new local spatial anchor for each hologram that a user explicitly places, except in cases outlined below such as rigid groups of holograms.</span></span>

### <a name="always-render-anchored-holograms-within-3-meters-of-their-anchor"></a><span data-ttu-id="4542d-129">一定會轉譯錨定在其錨定的 3 公尺全像投影</span><span class="sxs-lookup"><span data-stu-id="4542d-129">Always render anchored holograms within 3 meters of their anchor</span></span>

<span data-ttu-id="4542d-130">空間的錨點來穩固其錨點的原始附近的座標系統。</span><span class="sxs-lookup"><span data-stu-id="4542d-130">Spatial anchors stabilize their coordinate system near the anchor's origin.</span></span> <span data-ttu-id="4542d-131">如果您從該原點超過約 3 公尺呈現全像投影，這些全像投影可能會遇到比例從該原點，由於推桿 arm 效果的距離明顯位置錯誤。</span><span class="sxs-lookup"><span data-stu-id="4542d-131">If you render holograms more than about 3 meters from that origin, those holograms may experience noticeable positional errors in proportion to their distance from that origin, due to lever-arm effects.</span></span> <span data-ttu-id="4542d-132">適用於使用者代表附近錨點，因為全像太遠從使用者，這表示較遠的全像 angular 錯誤會很小。</span><span class="sxs-lookup"><span data-stu-id="4542d-132">That works if the user stands near the anchor, since the hologram is far away from the user too, meaning the angular error of the distant hologram will be small.</span></span> <span data-ttu-id="4542d-133">不過，如果使用者可走到該較遠的全像圖，然後會在他們的檢視，使遠處的錨點的原始推桿 arm 效果很明顯大。</span><span class="sxs-lookup"><span data-stu-id="4542d-133">However, if the user walks up to that distant hologram, it will then be large in their view, making the lever-arm effects from the faraway anchor origin quite obvious.</span></span>

### <a name="group-holograms-that-should-form-a-rigid-cluster"></a><span data-ttu-id="4542d-134">群組全像應該形成固定叢集投影</span><span class="sxs-lookup"><span data-stu-id="4542d-134">Group holograms that should form a rigid cluster</span></span>

<span data-ttu-id="4542d-135">如果應用程式必須要有這些維護固定的關聯性，以另一個全像投影，多個全像投影可以共用相同空間的錨點。</span><span class="sxs-lookup"><span data-stu-id="4542d-135">Multiple holograms can share the same spatial anchor if the app expects those holograms to maintain fixed relationships to one another.</span></span>

<span data-ttu-id="4542d-136">比方說，如果您以動畫顯示房間內的全像攝影版太陽系，最好將所有單一的錨點太陽系物件繫結在管理中心中，使其相對於其他順暢地移動。</span><span class="sxs-lookup"><span data-stu-id="4542d-136">For example, if you are animating a holographic solar system in a room, it's better to tie all of the solar system objects to a single anchor in the center, so that they move smoothly relative to each other.</span></span> <span data-ttu-id="4542d-137">在此情況下，它是太陽系整體而言，錨定，即使其元件部分將以動態方式移動周圍的錨點。</span><span class="sxs-lookup"><span data-stu-id="4542d-137">In this case, it is the solar system as a whole that is anchored, even though its component parts are moving dynamically around the anchor.</span></span>

<span data-ttu-id="4542d-138">金鑰必須注意維護全像穩定性是遵循上述的 3 計量規則。</span><span class="sxs-lookup"><span data-stu-id="4542d-138">The key caveat here to maintain hologram stability is to follow the 3-meter rule above.</span></span>

### <a name="render-highly-dynamic-holograms-using-the-stationary-frame-of-reference-instead-of-a-local-spatial-anchor"></a><span data-ttu-id="4542d-139">轉譯高動態全像投影使用靜態參考座標系，而不本機的空間錨點</span><span class="sxs-lookup"><span data-stu-id="4542d-139">Render highly dynamic holograms using the stationary frame of reference instead of a local spatial anchor</span></span>

<span data-ttu-id="4542d-140">如果您有高動態的雷射，例如出外四處空間或遵循使用者附近的牆浮動 UI 字元最好是略過本機空間錨點，並呈現這些全像投影所提供的座標系統中的直接[</c0>靜態參考座標系<spanclass="notranslate">](coordinate-systems.md#stationary-frame-of-reference)（也就是在 Unity 中，您達到此目的而 WorldAnchor 不全局座標中直接置於全像投影）。</span></span><span class="sxs-lookup"><span data-stu-id="4542d-140">If you have a highly dynamic hologram, such as a character walking around the room, or a floating UI that follows along the wall near the user, it is best to skip local spatial anchors and render those holograms directly in the coordinate system provided by the [stationary frame of reference](coordinate-systems.md#stationary-frame-of-reference) (i.e. in Unity, you achieve this by placing holograms directly in world coordinates without a WorldAnchor).</span></span> <span data-ttu-id="4542d-141">在靜態參考座標系全像投影時可能會遇到漂移使用者遠低於全像圖，但這不太可能會注意到的動態全像投影： 全像經常移動，或其影片持續保持它接近使用者其中漂移會降到最低。</span><span class="sxs-lookup"><span data-stu-id="4542d-141">Holograms in a stationary frame of reference may experience drift when the user is far from the hologram, but this is less likely to be noticeable for dynamic holograms: either the hologram is constantly moving anyway, or its motion constantly keeps it close to the user, where drift will be minimized.</span></span>

<span data-ttu-id="4542d-142">動態全像投影的其中一個有趣的案例是一種錨定的座標系統到另一個以動畫顯示的物件。</span><span class="sxs-lookup"><span data-stu-id="4542d-142">One interesting case of dynamic holograms is an object that is animating from one anchored coordinate system to another.</span></span> <span data-ttu-id="4542d-143">比方說，您可能會有兩個 castle 化 10 公尺，在他們自己的空間錨點，每個引發在其他 castle cannonball 一個 castle。</span><span class="sxs-lookup"><span data-stu-id="4542d-143">For example, you might have two castles 10 meters apart, each on their own spatial anchor, with one castle firing a cannonball at the other castle.</span></span> <span data-ttu-id="4542d-144">目前 cannonball 引發時，您可以在靜態參考座標系，以便與第一個的 castle 錨定的座標系統中 cannon 一致的適當位置轉譯。</span><span class="sxs-lookup"><span data-stu-id="4542d-144">At the moment the cannonball is fired, you can render it at the appropriate location in the stationary frame of reference, so as to coincide with the cannon in the first castle's anchored coordinate system.</span></span> <span data-ttu-id="4542d-145">它接著可以遵循其檔案在空中 10 公尺其軌跡中靜態參考座標系。</span><span class="sxs-lookup"><span data-stu-id="4542d-145">It can then follow its trajectory in the stationary frame of reference as it flies 10 meters through the air.</span></span> <span data-ttu-id="4542d-146">當 cannonball 到達其他 castle 時，您可以選擇將移到第二個的 castle 錨定的座標系統，以供物理具有該 castle 固定的內文的計算。</span><span class="sxs-lookup"><span data-stu-id="4542d-146">As the cannonball reaches the other castle, you may choose to move it into the second castle's anchored coordinate system to allow for physics calculations with that castle's rigid bodies.</span></span>

<span data-ttu-id="4542d-147">如果您在裝置之間共用高動態的全像圖，您必須挑選做為其父代，某些雲端空間錨點，以在裝置間無法共用的 「 定態的參考框架。</span><span class="sxs-lookup"><span data-stu-id="4542d-147">If you are sharing a highly dynamic hologram across devices, you will need to pick some cloud spatial anchor to act as their parent, as stationary frames of reference cannot be shared across devices.</span></span>  <span data-ttu-id="4542d-148">不過，在此情況下，您應該確定是動態的全像圖或檢視的裝置都保留在錨點的 3 個計量半徑，以確保全像圖會出現在所有裝置上的穩定。</span><span class="sxs-lookup"><span data-stu-id="4542d-148">However, in this case, you should ensure that either either the dynamic hologram or the devices viewing it remain within the anchor's 3 meter radius, to ensure the hologram appears stable on all devices.</span></span>

### <a name="avoid-creating-a-grid-of-spatial-anchors"></a><span data-ttu-id="4542d-149">避免建立空間的錨點的方格</span><span class="sxs-lookup"><span data-stu-id="4542d-149">Avoid creating a grid of spatial anchors</span></span>

<span data-ttu-id="4542d-150">您可能會想要讓使用者將逐步引導，移動錨定至錨點轉換動態物件卸除規則方格空間的錨點的應用程式。</span><span class="sxs-lookup"><span data-stu-id="4542d-150">You may be tempted to have your app drop a regular grid of spatial anchors as the user walks around, transitioning dynamic objects from anchor to anchor as they move around.</span></span> <span data-ttu-id="4542d-151">不過，這牽涉到大量管理您的應用程式，而不需要系統本身會在內部維護深入的感應器資料的好處。</span><span class="sxs-lookup"><span data-stu-id="4542d-151">However, this involves a lot of management for your app, without the benefit of the deep sensor data that the system itself maintains internally.</span></span> <span data-ttu-id="4542d-152">在這些情況下，您通常會達到更好的結果，更不費力放置您全像投影中的靜態參考座標，如上節所述。</span><span class="sxs-lookup"><span data-stu-id="4542d-152">For these cases, you will usually achieve better results with less effort by placing your holograms in the stationary frame of reference, as described in the section above.</span></span>

<span data-ttu-id="4542d-153">當預先定位雲端靜態空格周圍的空間錨點的一組，請考慮將空間的錨點放在使用者將會遇到上述，原則每金鑰全像投影的位置，而不是建立任意方格中的錨點。</span><span class="sxs-lookup"><span data-stu-id="4542d-153">When pre-positioning a set of cloud spatial anchors around a static space, consider placing the spatial anchors at the locations of the key holograms the user will encounter per the principle above, rather than creating an arbitrary grid of anchors.</span></span>  <span data-ttu-id="4542d-154">這可確保您會取得這些金鑰全像投影最大的穩定性。</span><span class="sxs-lookup"><span data-stu-id="4542d-154">This ensures that you'll get maximum stability for those key holograms.</span></span>

### <a name="release-local-spatial-anchors-you-no-longer-need"></a><span data-ttu-id="4542d-155">發行您不再需要的本機空間錨點</span><span class="sxs-lookup"><span data-stu-id="4542d-155">Release local spatial anchors you no longer need</span></span>

<span data-ttu-id="4542d-156">本機空間錨點作用中時，系統會排定優先順序接近該錨點的感應器資料的保留。</span><span class="sxs-lookup"><span data-stu-id="4542d-156">While a local spatial anchor is active, the system will prioritize keeping around the sensor data that is near that anchor.</span></span> <span data-ttu-id="4542d-157">如果您無法再使用空間的錨點，用來存取其座標系統的停駐點。</span><span class="sxs-lookup"><span data-stu-id="4542d-157">If you are no longer using a spatial anchor, stop accessing its coordinate system.</span></span> <span data-ttu-id="4542d-158">這可讓視要移除其基礎感應器資料。</span><span class="sxs-lookup"><span data-stu-id="4542d-158">This will allow its underlying sensor data to be removed as necessary.</span></span>

<span data-ttu-id="4542d-159">這是您已保存至空間的錨點存放區的本機錨點特別重要。</span><span class="sxs-lookup"><span data-stu-id="4542d-159">This is especially important for local anchors you have persisted to the spatial anchor store.</span></span> <span data-ttu-id="4542d-160">這些錨點背後的感應器資料會保留周圍永久允許您的應用程式，以尋找會錨定在未來的應用程式工作階段，這會減少追蹤其他的錨點的可用空間。</span><span class="sxs-lookup"><span data-stu-id="4542d-160">The sensor data behind these anchors will be kept around permanently to allow your app to find that anchor in future app sessions, which will reduce the space available to track other anchors.</span></span> <span data-ttu-id="4542d-161">保存只有這些本機錨點，您需要再次在未來的工作階段中找到並移除它們從存放區時，它們不會再對使用者有意義。</span><span class="sxs-lookup"><span data-stu-id="4542d-161">Persist only those local anchors that you need to find again in future sessions and remove them from the store when they are no longer meaningful to the user.</span></span>

<span data-ttu-id="4542d-162">針對雲端空間錨點，隨著您的案例需要，可以調整您的儲存體。</span><span class="sxs-lookup"><span data-stu-id="4542d-162">For cloud spatial anchors, your storage can scale as your scenario requires.</span></span>  <span data-ttu-id="4542d-163">您可以儲存多個雲端錨點如有需要您知道您的使用者將不需要再次會錨定在尋找全像投影時，才將它們釋出。</span><span class="sxs-lookup"><span data-stu-id="4542d-163">You may store as many cloud anchors as needed, releasing them only when you know that your users will not need to locate holograms at that anchor again.</span></span>

## <a name="see-also"></a><span data-ttu-id="4542d-164">另請參閱</span><span class="sxs-lookup"><span data-stu-id="4542d-164">See also</span></span>
* [<span data-ttu-id="4542d-165">座標系統</span><span class="sxs-lookup"><span data-stu-id="4542d-165">Coordinate systems</span></span>](coordinate-systems.md)
* [<span data-ttu-id="4542d-166">混合實境中的共用體驗</span><span class="sxs-lookup"><span data-stu-id="4542d-166">Shared experiences in mixed reality</span></span>](shared-experiences-in-mixed-reality.md)
* <span data-ttu-id="4542d-167"><a href="https://docs.microsoft.com/azure/spatial-anchors" target="_blank">Azure Spatial Anchors</a></span><span class="sxs-lookup"><span data-stu-id="4542d-167"><a href="https://docs.microsoft.com/azure/spatial-anchors" target="_blank">Azure Spatial Anchors</a></span></span>
* [<span data-ttu-id="4542d-168">Unity 中的持續性</span><span class="sxs-lookup"><span data-stu-id="4542d-168">Persistence in Unity</span></span>](persistence-in-unity.md)
* [<span data-ttu-id="4542d-169">DirectX 中的空間錨點</span><span class="sxs-lookup"><span data-stu-id="4542d-169">Spatial anchors in DirectX</span></span>](coordinate-systems-in-directx.md#place-holograms-in-the-world-using-spatial-anchors)
* [<span data-ttu-id="4542d-170">案例研究-仔細檢查您實際上的漏洞</span><span class="sxs-lookup"><span data-stu-id="4542d-170">Case study - Looking through holes in your reality</span></span>](case-study-looking-through-holes-in-your-reality.md)
