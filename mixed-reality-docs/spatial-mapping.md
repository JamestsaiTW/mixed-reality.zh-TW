---
title: 空間對應
description: 空間對應詳細呈現 HoloLens 四周圍環境中的實際介面。
author: mattzmsft
ms.author: mazeller
ms.date: 03/21/2018
ms.topic: article
keywords: 空間對應、 HoloLens、 混合的實境，介面的重構、 網狀結構、 sr
ms.openlocfilehash: 31abeca624512f1d5e721dbe879ca2243cf41345
ms.sourcegitcommit: 384b0087899cd835a3a965f75c6f6c607c9edd1b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/12/2019
ms.locfileid: "59597102"
---
# <a name="spatial-mapping"></a>空間對應

空間對應提供詳細的呈現 HoloLens、 周圍環境中的實際介面，可讓開發人員建立逼真的混合的實境體驗。 藉由合併具有虛擬世界的真實世界應用程式可以讓全像投影看起來很實際。 應用程式可以也較自然地配合使用者的期望藉由提供熟悉的真實世界行為和互動方式。

<br>

>[!VIDEO https://www.youtube.com/embed/zff2aQ1RaVo]

## <a name="device-support"></a>裝置支援

<table>
<tr>
<th>功能</th><th style="width:150px"> <a href="hololens-hardware-details.md">HoloLens （第 1 代）</a></th><th style="width:150px">HoloLens 2</th><th style="width:150px"> <a href="immersive-headset-hardware-details.md">沈浸式耳機</a></th>
</tr><tr>
<td> 空間對應</td><td style="text-align: center;"> ✔️</td><td style="text-align: center;"> ✔️</td><td style="text-align: center;"></td>
</tr>
</table>



## <a name="conceptual-overview"></a>概念式概觀

![涵蓋聊天室的網狀結構介面](images/SurfaceReconstruction.jpg)<br>
*空間對應網狀結構涵蓋聊天室的範例*

用於空間對應的兩個主要的物件類型為 '空間介面 Observer' 和' 空間介面 '。

應用程式會提供空間介面觀察者與一或多個週框的磁碟區，來定義的空間中的應用程式希望接收空間的對應資料區域。 針對每個這些磁碟區，空間的對應會提供一組的空間表面的應用程式。

（在相對於真實世界的固定位置），這些磁碟區可能是靜態，或它們可能會附加至 HoloLens （它們移動，但不是會旋轉，HoloLens 與在環境移動）。 每個空間的介面描述小的磁碟區的空間，以附加至世界鎖定三角網格中的真實世界表面[空間座標系統](coordinate-systems.md)。

HoloLens 收集有關環境的新資料和空間表面的環境變更發生時，會出現、 消失，而變更。

## <a name="common-usage-scenarios"></a>常見使用案例

![常見設定對應的空間使用方式案例的說明：放置、 阻擋、 物理學與導覽](images/sm-concepts-1000px.png)

### <a name="placement"></a>放置

空間對應提供給應用程式呈現給使用者; 的自然且熟悉的形式的互動的機會會比將您的手機下放在桌更自然？

限制全像投影的位置 (或更廣泛地空間位置的任何選取範圍) 欺騙介面上提供自然對應 3D （空間中的點） 2D （介面上的點）。 這會減少使用者必須提供給應用程式，而讓使用者互動的更快、 更容易且更精確的資訊數量。 這是特別是，則為 true，因為 '距離外傳' 不是我們用來實際傳達給其他人或電腦的項目。 當我們點與我們的手指時，我們會指定方向，但不是會在距離。

一個重要的警告是，當應用程式會推斷方向的距離 (例如藉由執行沿著以尋找最接近使用者的視線方向 raycast 空間介面)，這必須產生的使用者是否能夠可靠地預測的結果。 否則，使用者會失去其意義的控制項，而且這可能很快就會令人沮喪。 這可協助的其中一個方法是執行多個 raycasts，而不是其中一個。 彙總的結果應該更順暢和更容易預測、 較不容易發生 （如有可能因光線通過微小的漏洞，或按下的使用者並不知道的幾何） 會影響從暫時性 '極端值' 結果。 彙總或平滑處理，也可以執行一段時間;例如，您可以限制最快速度的雷射可以改變使用者的距離。 最小和最大距離的值，只限制也可協助，讓正在移動全像圖不會突然離開飛到距離或有損毀回使用者的臉部。

應用程式也可以使用的形狀和方向的表面指南全像位置。 全像攝影版的椅子不應該透過牆滲透，並且應該是清除使用最低限度值即使稍微分配不平均。 這種功能可能會依賴使用物理衝突，而不是只 raycasts，不過類似的考量會套用。 如果置入全像有許多小型的多邊形突出，例如腿的椅子上的合理的那些多邊形的物理條件表示展開至順暢地進行更多的項目，使其更能為移轉而不需要的空間表面投影片擷取。

在極端，使用者輸入，可以簡化立即完全和空間的介面可以用來執行完全自動的全像放置。 例如，應用程式無法置於全像攝影版的 light switch 某處使用者按下的背景牆。 可預測性相同警告適用於雙向這裡;如果使用者需要掌控全像放置的功能，但應用程式並不一定會全像投影它們所預期的位置 （如果 light switch 出現使用者無法連線的地方），這會是令人沮喪的體驗。 它實際上是較差，若要執行自動放置的功能需要使用者更正部分的情況下，比只是需要使用者一律會執行放置本身;因為成功的自動放置*預期*，手動更正覺得負擔 ！

也請注意，應用程式的位置，取決於應用程式的使用空間的介面的能力[掃描體驗](spatial-mapping-design.md#the-environment-scanning-experience)。 如果尚未經過掃描介面，則它不能用於放置。 這是由應用程式做出這個使用者，清楚了解，以便它們可以協助掃描新的介面，或選取新的位置。

視覺化回饋給使用者最重要的是在放置期間。 使用者必須知道全像相對於與最接近的表面[紮效果](spatial-mapping.md#visualization)。 它們應該先了解為什麼它們全像移動受到 （例如，由於衝突與另一個鄰近的介面）。 如果它們不能將雷射放在目前的位置，然後視覺化回饋應該要為何不清楚。 例如，如果使用者嘗試進行全像攝影版的沙發上卡一半到牆上、 則位於牆沙發部分應該 pulsate 生氣的色彩。 或者，相反地，如果應用程式中，使用者可以看到真實世界介面的位置找不到工作空間的介面，然後應用程式應該清楚這。 明顯缺少這方面的接地效果可能會達到這個目的。

### <a name="occlusion"></a>遮蔽

空間對應介面的主要用途之一是只要 occlude 全像投影。 這個簡單的行為會產生重大影響對全像投影，有助於建立真正視為與使用者相同的實體空間親和力有意義的認知的真實性。

阻擋也提供資訊給使用者;當全像圖看起來阻擋的真實世界的介面，這會提供其他視覺化該闀世界空間位置回應。 相反地，會受阻擋可以也常見*隱藏*從使用者的資訊; occluding 全像投影背後牆可以減少視覺雜亂直覺的方式。 若要隱藏或顯示雷射，使用者只必須移動其標頭。

阻擋也可用來活絡期望根據熟悉的實體互動; 人性化使用者介面如果雷射會阻擋的介面，這是因為該介面是純色，因此使用者應該會希望全像圖會*衝突*與介面，並不只是通過它。

有時候，阻擋全像投影的是不想要的。 如果使用者需要能夠互動雷射，他們必須能夠看到，即使它位於實際介面。 在此情況下，它通常可以合理地以不同的方式呈現這類雷射時 （例如，藉由減少其亮度），它會阻擋。 如此一來，使用者將能夠以視覺化方式找出全像圖，但它們仍會知道它後面的項目。

### <a name="physics"></a>物理

使用物理模擬是另一種空間對應可以用來強化*存在*的全像投影在使用者的實體空間中。 當我全像攝影版的拖放球彙實際上我桌關閉、 不斷在最低限度值和在沙發上就會消失時，可能會對我相信這一切都不沒什麼困難。

物理模擬也提供應用程式使用自然且熟悉的物理式互動的機會。 移動周圍的全像攝影版傢俱地板上可能會讓使用者更容易如果家具回應，彷彿它已在適當的慣性和磨擦與 floor 滑動。

若要產生實際的實體行為，您可能需要執行一些[網格處理](spatial-mapping.md#mesh-processing)填滿漏洞，例如移除浮動 hallucinations 和平滑處理粗糙表面。

您也需要考慮如何您的應用程式[掃描體驗](spatial-mapping-design.md#the-environment-scanning-experience)會影響其物理模擬。 首先，遺漏介面不會與任何項目; 衝突關閉辦公室角落和已知的世界尾端拖放球轉動關閉時，會發生什麼事？ 其次，您必須決定是否會繼續回應一段時間的環境中的變更。 在某些情況下，您會想要盡快; 回應假設是否使用者使用門和 furniture 作為可移動 barricades 中的內送的 Roman 箭號 tempest 的防禦。 在其他情況下，您可能想要忽略新的更新;您地板上推動您全像攝影版跑車弧形周圍突然可能不那麼有趣，如果您的 dog 決定位於中間的追蹤。

### <a name="navigation"></a>巡覽

應用程式可用來授與全像攝影版的字元 （或代理程式） 能夠瀏覽中的相同方式來實際人員的真實世界空間的對應資料。 這可以幫助您藉由限制它們的自然、 熟悉的行為，為使用者及他們朋友的同一組強化出現全像攝影版的字元。

瀏覽功能可能有使用者，以及幫助的。 瀏覽對應建置在一個區域後, 就無法共用為全像攝影版的指示，針對不熟悉的新使用者提供該位置中。 無法設計此對應，來協助保持呆板 '' 傳送流量順利完成，或避免在危險的位置，例如建築工地的意外。

參與實作導覽功能的重要技術挑戰會可靠偵測查核 （讓人不在資料表逐步 ！） 的介面和非失誤性接納 （讓人不逐步解說已關閉的機門 ！） 的環境中的變更。 網狀結構可能需要一些[處理](spatial-mapping.md#mesh-processing)它就不能用於路徑規劃和瀏覽虛擬字元之前。 平滑化網格和移除 hallucinations 有助於避免成為停滯的字元。 您也可以大幅簡化網狀結構，以加快字元的路徑規劃和瀏覽計算。 這些挑戰已收到大量的注意 videogame 技術，開發並取得的研究文獻中有關這些主題的豐富。

請注意在 Unity 的內建 NavMesh 功能無法搭配空間對應介面。 這是因為應用程式之前無法得知空間對應介面啟動，而需要從來源資產事先產生 NavMesh 資料檔案。 也請注意，空間的對應系統將不會提供[太遠介面的相關資訊](spatial-mapping-design.md#the-environment-scanning-experience)從使用者的目前位置。 讓應用程式必須 '記得' 介面本身是否建置非常大的區域的對應。

### <a name="visualization"></a>視覺效果

大部分的情況很適合空間表面不可見的;最小化視覺雜亂，並讓真實世界自己會說話。 不過，有時候適合以視覺化方式檢視空間的對應介面直接，儘管其實際對應項目已顯示。

例如，當使用者嘗試放置到介面 (separated 全像攝影版的封包在牆上，例如) 上的全像很實用 '接地' 全像投射陰影到介面上的。 這可讓使用者更清楚意義的全像和介面之間的確切實體附近。 這也是以視覺化方式 '預覽' 變更之前使用者認可至該處的更多一般作法的範例。

透過視覺化介面，應用程式可以與使用者共用其了解環境。 例如，全像攝影版的棋盤遊戲無法以視覺化方式檢視水平的介面，它已識別為 「 資料表 」，讓使用者知道他們應該前往互動。

視覺化介面，可以是適合用來向使用者顯示附近會從檢視隱藏的空間。 可從其起居室的絨布提供簡單的方式來授與使用者存取其廚房 （和所有其包含全像投影）。

空間對應所提供的網狀結構介面可能不是特別 '全新的'。 因此務必適當地將其視覺化。 傳統的光源計算可能會反白顯示曲面法線中的錯誤擾亂視覺的方式，儘管投射到介面上的 [清除] 紋理可以協助您讓它的一個更有條理的外觀。 您也可執行[網格處理](spatial-mapping.md#mesh-processing)改善網格屬性，此介面上會呈現之前。

## <a name="using-the-surface-observer"></a>使用介面的觀察者

空間對應的起點是表面的觀察者。 程式流程如下所示：
* 建立介面的觀察者的物件
   * 提供一或多個空間的磁碟區，來定義應用程式希望接收的資料空間對應的感興趣的區域。 空間的磁碟區是空間的只需定義區域，例如球體或方塊的圖形。
   * 使用世界鎖定空間座標系統的空間的磁碟區，來識別實體世界的固定的區域。
   * 使用空間的磁碟區，更新每個畫面格與主體鎖定空間座標系統中，找出的移動 （但不會旋轉） 空間的區域與使用者。
   * 稍後在任何時間，為應用程式或使用者變更的狀態，可能會變更這些空間的磁碟區。
* 用於輪詢或通知擷取空間介面的相關資訊
   * 您可能 '輪詢' 空間介面狀態介面的觀察者在任何時間。 或者，您可能會註冊介面觀察者的 '介面變更 」 事件，以空間介面已變更時，會通知應用程式。
   * 針對動態空間磁碟區，例如位在檢視的範圍或主體而鎖定的磁碟區，應用程式必須輪詢變更每個畫面格藉由設定感興趣的區域，然後取得目前的空間表面。
   * 對於靜態的磁碟區，例如全球鎖定的 cube，涵蓋單一的空間，應用程式可以登錄 '介面變更' 的事件，在該磁碟區的空間表面可能已變更時收到通知。
* 處理序的介面變更
   * 逐一查看一組提供的空間表面。
   * 分類空間表面為新增、 變更或移除。
   * 每個新增或變更空間介面，視提交非同步要求，以接收更新的網狀結構，表示介面的目前狀態的詳細資料所需的層級。
* 處理非同步網狀結構要求 （在下列各節中的詳細資料）。

## <a name="mesh-caching"></a>Mesh 快取

空間表面密集三角網格來表示。 儲存、 轉譯和處理這些網格可以耗用大量計算和儲存體資源。 因此，每個應用程式應該採用網格，快取配置符合其需求，為了盡量減少使用網格處理和儲存體的資源。 此配置應該判斷其網狀結構保留和要捨棄，以及何時更新每個空間的介面網狀結構。

有許多考量那里討論到直接將告知您的應用程式應該如何達到快取網狀結構。 您應該考慮使用者如何透過環境移動、 所需的介面、 不同的介面將會觀察到和何時應該擷取環境中的變更。

當解譯 '介面變更' 的事件介面的觀察者所提供，基本快取邏輯的網狀結構如下所示：
* 如果應用程式看到之前未看過的空間的介面識別碼，它應該將這視為新的空間介面。
* 如果應用程式會具有已知識別碼空間的介面，但使用新的更新時間，它應該將這視為更新的空間介面。
* 如果應用程式不會再看到具有已知識別碼空間的介面，它應該將這視為已移除的空間介面。

負責每個應用程式，然後進行下列選擇：
* 針對新的空間表面，不應網狀結構要求嗎？
   * 通常應該立即要求網格的新空間的介面，可能很有用的新資訊提供給使用者。
   * 不過，新的空間表面接近，並在使用者之前，應該會提供優先順序，而且應該先要求其網狀結構。
   * 如果不需要新的網狀結構，如果例如應用程式具有永久或暫時 '凍結' 其環境的模型，則它應該不會要求。
* 如已更新的空間表面，不應網狀結構要求嗎？
   * 已更新的空間表面接近，並在使用者之前的優先順序應，應該先要求其網狀結構。
   * 它也可能是適用於新的介面比為了更新介面，尤其是在掃描的體驗提供較高的優先順序。
   * 若要限制處理成本，應用程式可能想要啟用它們處理空間介面的更新速率的節流設定。
   * 它可能推斷空間介面的變更是次要時，例如，如果介面的界限很小，在此情況下更新可能不重要，程序。
   * 雖然在此情況下，它可能會更有效率的方式修改空間週框的磁碟區，使用介面的觀察者，可能會請完全忽略目前的使用者感興趣的區域之外的空間表面的更新。
* 移除空間的介面，如應網狀結構捨棄嗎？
   * 通常網狀結構應捨棄立即移除空間的介面，如，使得闀阻擋保持正確。
   * 不過，如果應用程式有理由相信，空間的介面將會重新顯示短時間內 （或許是根據使用者經驗的設計），則可能是更有效率的方式保留它比以捨棄其網狀結構，並稍後再重新建立它。
   * 如果應用程式建立使用者環境的大規模模型然後它可能不想要完全捨棄任何網格。 它仍然需要限制資源使用量，可能是由多工緩衝處理到磁碟的網格如空間表面會消失。
   * 請注意，某些較罕見的事件，空間的介面產生期間可能會導致空間的介面，以將其取代新的空間表面類似的位置，但不同的識別碼。 因此，選擇不捨棄移除的介面的應用程式應該注意不要結束註冊與多個高重疊空間介面網格涵蓋相同的位置。
* 應該針對任何其他的空間表面捨棄網格嗎？
   * 即使在工作空間的介面存在，如果它不再有用的使用者經驗則應予捨棄。 例如，如果應用程式 '取代' 門廊的另一端聊天室替代的虛擬空間然後該聊天室中的空間介面不會再造成影響。

以下是範例網狀結構的快取策略，使用空間和時態磁滯現象：
* 請考慮使用範圍形狀空間的磁碟區依照使用者的視線，看一下並四處巡察的感興趣的應用程式。
* 空間的介面可能會消失暫時從這個磁碟區只是因為使用者看起來與介面，或者步驟遠離...只有要回頭查看以前或更接近再次一點時間更新版本。 在此情況下，捨棄並重新建立此介面網狀結構代表許多備援的處理。
* 若要減少處理的變更數目，應用程式會使用兩個空間介面觀察者，其中包含在另一個。 較大的磁碟區會更低的球面接著使用者 '延遲';以確保其中心內之使用者的 2.0 metres 必要時，它只會移動。
* 新增和更新的空間表面網格處理永遠都會從較小內部介面觀察者，但網格會快取，直到它們從較大的外部介面觀察者便會消失。 這可讓應用程式，以避免處理許多重複的變更，因為本機使用者移動。
* 由於空間的介面也可能因為追蹤遺失暫時消失，應用程式也會捨棄已移除的空間表面延遲期間追蹤遺失。
* 一般情況下，應用程式應該評估降低的更新處理和增加的記憶體使用量，以判斷其理想的快取策略之間的權衡取捨。

## <a name="rendering"></a>轉譯

有空間對應網格容易用於轉譯的三種主要方式：
* 介面的視覺效果
   * 它通常是可直接以視覺化方式檢視空間的介面。 比方說，轉型 'shadows' 從到空間介面的物件可以提供很有幫助的視覺化回饋給使用者時它們會在介面上放置全像投影。
   * 要謹記在心的一點是，空間的網格是不同種類的 3D 的演出者可能會建立的網格。 三角形拓撲不會為 [清除] 以人類看得建立拓樸，網狀結構將會遭受[各種錯誤](spatial-mapping-design.md#what-influences-spatial-mapping-quality)。
   * 若要建立賞心悅目的視覺化美觀，可能因此想要執行一些[網格處理](spatial-mapping.md#mesh-processing)，例如，若要填滿漏洞或平滑的曲面法線。 您也可能會想要使用專案演出者設計紋理著色器，而不是直接視覺化網狀拓樸和 normals 網格上。
* 針對 occluding 真實世界介面背後全像投影
   * 空間的介面可以呈現在僅限深度的階段中的哪一個只會影響[深度緩衝區](https://msdn.microsoft.com/library/windows/desktop/bb219616(v=vs.85).aspx)並不會影響色彩呈現目標。
   * 這會裝填 occlude 接著呈現全像投影空間介面背後的深度緩衝區。 全像投影的精確阻擋增強全像投影真正使用者的實體空間中存在的意義。
   * 若要啟用僅限深度的轉譯，更新您要設定的 blend 狀態[RenderTargetWriteMask](https://msdn.microsoft.com/library/windows/desktop/hh404492(v=vs.85).aspx)為零的所有色彩呈現目標。
* 修改全像投影阻擋實際呈現的外觀
   * 它會阻擋時，會隱藏通常轉譯的幾何。 即可達成此目的設定深度函式您[深度樣板狀態](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx)到 「 小於或等於 」，因而導致可只會針對幾何**接近**比所有先前呈現觀景窗幾何。
   * 不過，它可能適用於保留特定 geometry 可見，即使它會阻擋，以及修改其外觀時阻擋這種方式提供視覺化回饋給使用者。 比方說，這可讓應用程式顯示使用者的物件進行清楚指出，同時位置位於實際介面。
   * 若要這麼做，呈現 geometry 與不同的著色器建立所需的 'occluded' 外觀的第二次。 第二次呈現 geometry 前, 變更兩個您[深度樣板狀態](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx)。 首先，設定為 「 大於或等於 」 的 深度函式，以便幾何將會顯示只會針對**進一步**所有先前呈現 geometry 比相機中。 接下來，設定為零，DepthWriteMask，以便將不會修改深度緩衝區 (深度緩衝區應該繼續代表幾何的深度**接近**到攝影機)。

[效能](understanding-performance-for-mixed-reality.md)轉譯空間對應網格時，是重要的考量。 以下是一些轉譯效能技術特定轉譯空間對應網格：
* 調整三角形密度
   * 當提出要求的空間表面網狀結構從您的 surface 觀察者時，要求最低密度之三角網格可滿足您的需求。
   * 合理更改三角形密度，根據介面的距離，從使用者介面的介面進行，以及其相關性的使用者經驗。
   * 減少三角形計數會減少記憶體使用量和 GPU 上的頂點處理成本，但它不會影響像素處理成本。
* 執行範圍剔除
   * 範圍剔除，就會略過繪圖顯示位在目前範圍之外，所以看不到的物件。 這會減少 CPU 和 GPU 處理成本。
   * 因為剔除網狀結構每列方式執行，而且空間介面可能很大，分成較小的區塊中的每個空間的介面網狀結構可能會導致更有效率的剔除 （其中呈現較少的幕後三角形）。 是有代價的不過;您有更多節點網路，多個繪製呼叫您必須進行的這可能會增加 CPU 成本。 在極端的情況下，挑選自己的計算範圍可能甚至會有可測量的 CPU 成本。
* 調整轉譯順序
   * 空間介面通常都很大，因為它們代表了使用者整個環境的周圍的地方。 像素處理 GPU 的成本可能因此非常高，尤其是在沒有可見的幾何 （包括空間的介面和其他全像投影） 的多個圖層。 在此情況下，距離使用者最近的圖層會 occluding 進一步在任何層級，因此在浪費任何 GPU 時間轉譯這些更遠距的圖層。
   * 若要減少此備援的工作，在 GPU 上，最好先呈現不透明的介面，以由前至後的順序 (進一步的第一個、 更遠距的最後一個)。 'Opaque' 是指的介面設定中的 DepthWriteMask 您[深度樣板狀態](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx)。 最接近的表面會進行轉譯時，它們將質數深度緩衝區，以更遠距介面像素處理器在 GPU 上有效率地略過。

## <a name="mesh-processing"></a>網格處理

應用程式可能會想要執行[各種作業](spatial-mapping.md#mesh-processing)上空間曲面的網狀結構，以符合其需求。 與每個空間的介面網格所提供的索引和頂點資料會使用與相同的熟悉配置[端點和索引緩衝區](https://msdn.microsoft.com/library/windows/desktop/bb147325%28v=vs.85%29.aspx)，用於呈現三角網格中所有現代轉譯 Api。 不過，要注意的一個重點是空間對應三角形有**front-順時針彎曲順序**。 每一個三角形表示網格索引緩衝區中的三個頂點索引和這些索引會識別中的三角形頂點**順時針**三角形從檢視時的順序**front**側邊。 前面部分 （或外部） 的空間表面的網格對應跟您想要 （可見） 的真實世界表面的正面。

如果介面的觀察者所提供的粗略三角形密度是仍然不足粗略-這項工作相當耗費運算資源的網狀結構簡化並已執行的執行階段產生的各種應用程式應該只執行提供層級的詳細資料。

由於每個介面的觀察者可提供多個未連接的空間表面，有些應用程式可能會想要裁剪這些空間介面網狀結構針對每個其他，然後壓縮程式它們在一起。 一般情況下，[裁剪] 步驟是必要的因為空間介面網格附近通常會稍微重疊。

## <a name="raycasting-and-collision"></a>Raycasting 和衝突

為了讓物理 API (例如[Havok](http://www.havok.com/)) raycasting 和衝突的功能為應用程式提供的空間面，應用程式必須提供空間介面網狀結構來物理 API。 通常用於物理的網狀結構具有下列屬性：
* 它們包含僅有少量的三角形。 物理作業都需密集運算比轉譯作業。
* 也就是 ' water-嚴格 '。 要具備紮實的表面不應該有小型有漏洞;甚至太小，因此不可見的漏洞可能會造成問題。
* 它們會轉換成凸 hulls。 凸 hulls 有幾個多邊形，而且免費提供的漏洞，而且也有更多的運算有效率的方式處理比未經處理的三角形網狀結構。

當執行 raycasts 針對空間的介面，請記住這些介面通常很複雜時，雜亂的雜亂少詳細資料-只是完整的圖形就像您的支援中心 ！ 這表示單一 raycast 通常不足以提供您足夠圖形的相關資訊的介面和電話附近的空白空間的形狀。 它是因此通常是個好主意，來執行許多 raycasts 小區域內，以及衍生介面的更可靠的了解使用彙總的結果。 比方說，使用 10 raycasts 平均指南全像放置在介面上會產生更順暢且較不 '抖動的' 的結果使用只是單一 raycast。

不過，請記得，每個 raycast 可以有高的計算成本。 因此根據您的使用方式案例您應該取捨的其他 raycasts 的計算成本 （執行每個畫面格） 的計算成本對[網格處理](spatial-mapping.md#mesh-processing)來緩和及移除空間表面 （漏洞執行更新空間網狀結構時）。

## <a name="troubleshooting"></a>疑難排解
* 為了讓介面的網格是 orientated 正確，每個 GameObject 必須能夠建構其網狀結構將它傳送至 SurfaceObeserver 之前為作用中。 否則，網格會顯示在但旋轉的空間，在奇怪的角度。
* 執行通訊的指令碼與 SurfaceObserver GameObject 必須設為原始伺服器。 否則，所有您建立並傳送給 SurfaceObserver 以已建構其網格 Gameobject 必須位移等於父遊戲物件的位移。 這可讓您顯示數個計量消失，因此很難進行偵錯 發生什麼情況的網格。

## <a name="see-also"></a>另請參閱
* [座標系統](coordinate-systems.md)
* [DirectX 中的空間對應](spatial-mapping-in-directx.md)
* [在 Unity 中的空間對應](spatial-mapping-in-unity.md)
* [空間對應設計](spatial-mapping-design.md)
* [案例研究-仔細檢查您實際上的漏洞](case-study-looking-through-holes-in-your-reality.md)
